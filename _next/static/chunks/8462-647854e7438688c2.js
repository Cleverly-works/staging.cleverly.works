"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8462],{88462:function(e,n,t){t.d(n,{e:function(){return eI}});var r=t(47568),o=t(26042),i=t(69396),d=t(99534),s=t(7297),l=t(97582),a=t(85893),c=t(67294),u=t(11163),p=t.n(u),h=t(30381),f=t.n(h),v=t(45697),x=t.n(v),b=t(66252),m=t(28852),g=t(84808),y=t(98456),j=t(70917),Z=t(10166),w=t(51233),C=t(61730),k=t(38812),S=t(77773),P=t(46842),E=t(56903),F=t(1199),A=t(90244),D=t(29815),_=t(5616),I=t(87918),q=t(15861),W=t(90948),M=t(41796),O=t(39418),R=t(97768),T=t(22244),z=t(40656),L=function(e){var n,t,r,o=e.title,i=e.start,d=(e.end,e.id,e.backgroundColor,e.borderColor,e.extendedProps),s=((0,D.Z)(R.x).find(function(e){return e.value===d.type})||{context:""}).context,l=(T.DJ.find(function(e){return e.value===d.status})||{colour:z.Q.COLOUR.muiGray}).colour;return(0,a.jsxs)(N,{color:s,children:[(0,a.jsx)(_.Z,{sx:{width:"100%",height:"4px",backgroundColor:l}}),(0,a.jsxs)(w.Z,{p:.5,children:[(0,a.jsx)(G,{children:o}),(0,a.jsxs)(w.Z,{direction:"row",mb:2,children:[(0,a.jsx)(H,{labelColor:s,label:f()(i).format("HH:mm")}),(0,a.jsx)(O.Z,{sx:{height:"13px"}})]}),(null==d?void 0:null===(n=d.propertyAddress)||void 0===n?void 0:n.address)&&(0,a.jsxs)(w.Z,{children:[(0,a.jsx)(G,{children:"Customer Location"}),(0,a.jsx)(q.Z,{sx:{fontSize:"0.7rem"},children:"".concat((null===(t=d.location)||void 0===t?void 0:t.name)||"","\n                      ").concat(d.propertyAddress.address.name||"","\n                      ").concat(d.propertyAddress.address.addressLine||"","\n                      ").concat(d.propertyAddress.address.addressLine||"","\n                      ").concat(d.propertyAddress.address.addressLine||"","\n                      ").concat(d.propertyAddress.address.city||"","\n                      ").concat(d.propertyAddress.address.county||"","\n                      ").concat(d.propertyAddress.address.postCode||"")})]}),(null==d?void 0:null===(r=d.supplierAddress)||void 0===r?void 0:r.address)&&(0,a.jsxs)(w.Z,{children:[(0,a.jsx)(G,{children:"Supplier Location"}),(0,a.jsx)(q.Z,{sx:{fontSize:"0.7rem"},children:"".concat(d.supplierAddress.address.name||"","\n                      ").concat(d.supplierAddress.address.addressLine||"","\n                      ").concat(d.supplierAddress.address.addressLine||"","\n                      ").concat(d.supplierAddress.address.addressLine||"","\n                      ").concat(d.supplierAddress.address.city||"","\n                      ").concat(d.supplierAddress.address.county||"","\n                      ").concat(d.supplierAddress.address.postCode||"")})]})]})]})};L.propTypes={title:x().string.isRequired,start:x().object.isRequired,extendedProps:x().shape({type:x().oneOf(["quote","reactive","ppm","cppm"]),status:x().string})},L.defaultProps={};var H=(0,W.ZP)(I.Z)(function(e){var n=e.theme,t=e.labelColor;return{color:n.palette.white.main,fontSize:"0.7rem",fontWeight:700,height:"13px",borderRadius:"3px",backgroundColor:t,"& span":{color:n.palette.white.main,padding:"0 4px"}}}),G=(0,W.ZP)(q.Z)(function(e){return e.theme,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.7rem",fontWeight:700}}),N=(0,W.ZP)(_.Z)(function(e){var n=e.theme,t=e.color;return{height:"100%",overflow:"hidden",border:"2px solid ".concat(t),borderRadius:"5px",backgroundColor:(0,M.$n)(t,.8),color:n.palette.black.main}}),V=function(e){var n=e.title,t=e.start,r=(e.end,e.id,e.isStart),o=e.isEnd,i=e.backgroundColor,d=(e.borderColor,e.extendedProps),s=((0,D.Z)(R.x).find(function(e){return e.value===d.type})||{context:""}).context,l=(T.DJ.find(function(e){return e.value===d.status})||{colour:z.Q.COLOUR.muiGray}).colour;return(0,a.jsx)(J,{children:(0,a.jsxs)(w.Z,{direction:"row",alignItems:"center",spacing:.5,pl:.5,children:[(0,a.jsx)(_.Z,{sx:{minWidth:"8px",height:"8px",border:"".concat("#FFFFFF"===l?"2px solid black":"none"),borderRadius:"50%",backgroundColor:l}}),(0,a.jsx)(U,{labelColor:s,label:f()(t).format("HH:mm")}),(0,a.jsx)(O.Z,{sx:{height:"13px"}}),(0,a.jsx)(B,{isStart:r,isEnd:o,eventColor:i,children:n})]})})};V.propTypes={title:x().string.isRequired,start:x().object.isRequired,isStart:x().bool,isEnd:x().bool,extendedProps:x().shape({type:x().oneOf(["quote","reactive","ppm","cppm"]),status:x().string})},V.defaultProps={isStart:!0,isEnd:!0};var J=(0,W.ZP)(_.Z)(function(e){return e.theme,{height:"100%",overflow:"hidden"}}),U=(0,W.ZP)(I.Z)(function(e){var n=e.theme,t=e.labelColor;return{color:n.palette.white.main,fontSize:"0.7rem",fontWeight:700,height:"13px",borderRadius:"3px",backgroundColor:t,"& span":{color:n.palette.white.main,padding:"0 4px"}}}),B=(0,W.ZP)(q.Z)(function(e){var n=e.theme,t=e.eventColor,r=e.isStart,o=e.isEnd;return{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.7rem",fontWeight:700,color:r&&o?"inherit":(0,M.mi)(t,"#fff")>4?n.palette.white.main:n.palette.black.main}}),Q=t(85113),$=t(11057),Y=t(14564),X=t(50594),K=function(e){var n=e.anchorEl,t=e.setAnchorEl,r=e.event,o=e.setEvent,i=e.eventClick,d=function(){o(null),t(null)},s=Boolean(n);return(0,a.jsx)(en,{id:s?"simple-popover":void 0,open:s,anchorEl:n,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,a.jsx)(_.Z,{sx:{maxHeight:"80vh",width:"280px"},children:r&&(0,a.jsxs)(w.Z,{width:"100%",p:1,children:[(0,a.jsx)(w.Z,{width:"100%",direction:"row",justifyContent:"flex-end",children:(0,a.jsx)($.Z,{variant:"contained",color:"secondary",onClick:d,size:"small",sx:{padding:"5px",borderRadius:"25px",minWidth:"auto"},children:(0,a.jsx)(X.Z,{sx:{width:"15px"}})})}),(0,a.jsxs)(w.Z,{width:"100%",alignItems:"center",mt:-2,mb:1,children:[(0,a.jsx)(q.Z,{sx:{color:(0,M.$n)("#444C63",.54),fontWeight:700},children:f()(r.date).format("dddd")}),(0,a.jsx)(q.Z,{sx:{fontWeight:700},children:f()(r.date).format("M/D")})]}),(0,a.jsx)(w.Z,{children:r.allSegs.map(function(e){var n=e.event;return(0,a.jsx)(ee,{onClick:function(e){return i({event:n,el:e.currentTarget})},children:(0,a.jsx)(V,{title:n.title,start:n.start,end:n.end,id:n.id,backgroundColor:n.backgroundColor,borderColor:n.borderColor,extendedProps:n.extendedProps})})})})]})})})};K.defaultProps={setEvent:function(){},eventClick:function(){}},K.propTypes={anchorEl:x().object,setAnchorEl:x().func,event:x().shape({date:x().object,event:x().shape({allSegs:x().arrayOf(x().shape({title:x().string.isRequired,start:x().object.isRequired,extendedProps:x().shape({type:x().oneOf(["quote","reactive","ppm","cppm"]),status:x().string})}))})}),setEvent:x().func,eventClick:x().func};var ee=(0,W.ZP)(_.Z)(function(e){return e.theme,{cursor:"pointer",padding:"2px",borderRadius:"3px","&:hover":{background:"rgba(0, 0, 0, 0.1)"}}}),en=(0,W.ZP)(Y.ZP)(function(e){return e.theme,{"& .MuiPaper-root":{fontFamily:"Nunito-Regular",borderRadius:"12px"},"& .MuiTypography-root":{fontFamily:"Nunito-Regular"}}}),et=t(6388),er=t(67720),eo=t(85488),ei=t(45416),ed=t(18586),es=t(75759),el=t(2845),ea=t(12547),ec=function(e){var n,t,r,o,i,d,s,l,c,u,p,h,v,x,b,m,g,j,Z,C,k,S,P,E,F,A,I,W,L,H,G,N,V,J,U=e.anchorEl,B=e.setAnchorEl,Y=e.event,K=e.setEvent,ee=(0,ed.q)(),en=(0,el.x)().hasRole,ec=null===(n=ee.admin)||void 0===n?void 0:null===(t=n.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,ef=null===(r=ee.admin)||void 0===r?void 0:null===(o=r.jobSetting)||void 0===o?void 0:o.jobNumberSuffix,ev=en("supplier"),ex=en("customer"),eb=en("tenant"),em=(0,et.aM)(eo.Vw,{skip:!(null==Y?void 0:Y.id),variables:{jobId:null==Y?void 0:Y.id}}),eg=em.loading,ey=em.data,ej=(void 0===ey?{job:{}}:ey).job,eZ=(0,Q.WE)(null==ej?void 0:ej.location,"registered"),ew=(0,D.Z)(R.x).find(function(e){return e.value===ej.type})||{context:""},eC=ew.text,ek=ew.context,eS=(T.DJ.find(function(e){return e.value===ej.status})||{colour:z.Q.COLOUR.muiGray}).colour,eP=null==ej?void 0:null===(i=ej.supplier)||void 0===i?void 0:null===(d=i.contactUsers)||void 0===d?void 0:d[0],eE=(null==ej?void 0:null===(s=ej.supplierUser)||void 0===s?void 0:s.id)&&(null==eP?void 0:eP.user)&&(null==ej?void 0:null===(l=ej.supplierUser)||void 0===l?void 0:l.id)!==(null==eP?void 0:null===(c=eP.user)||void 0===c?void 0:c.id),eF=function(){K(null),B(null)},eA=Boolean(U);return(0,a.jsx)(eu,{id:eA?"simple-popover":void 0,open:eA,anchorEl:U,onClose:eF,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:eg?(0,a.jsx)(w.Z,{justifyContent:"center",alignItems:"center",width:"320px",height:"300px",children:(0,a.jsx)(y.Z,{color:"secondary"})}):(0,a.jsxs)(w.Z,{sx:{maxHeight:"80vh",width:"320px"},children:[(0,a.jsxs)(w.Z,{pt:2,pl:2,pr:2,pb:1,children:[(0,a.jsxs)(w.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:1.5,children:[(0,a.jsx)(ep,{labelColor:ek,label:f()(null==Y?void 0:Y.start).format("HH:mm")}),(0,a.jsx)($.Z,{variant:"contained",color:"secondary",onClick:eF,size:"small",sx:{padding:"5px",borderRadius:"25px",minWidth:"auto"},children:(0,a.jsx)(X.Z,{sx:{width:"15px"}})})]}),(0,a.jsxs)(w.Z,{direction:"row",alignItems:"center",mb:1,children:[(0,a.jsx)(_.Z,{sx:{ml:"4px",mr:1,minWidth:"8px",width:"8px",height:"8px",borderRadius:"50%",border:"#FFFFFF"===eS?"2px solid black":"none",backgroundColor:eS}}),(0,a.jsx)(q.Z,{sx:{fontWeight:700,color:(0,M.$n)("#444C63",.54)},children:(null==ej?void 0:null===(u=ej.shortJobDesc)||void 0===u?void 0:null===(p=u[0])||void 0===p?void 0:null===(h=p.taxonomy)||void 0===h?void 0:h.name)||ej.title})]}),(0,a.jsx)(_.Z,{children:(0,a.jsxs)(w.Z,{direction:"row",alignItems:"center",children:[(0,a.jsx)(O.Z,{sx:{mr:1,width:"14px",height:"14px"}}),(0,a.jsx)(q.Z,{sx:{fontWeight:700},variant:"subtitle2",children:f()(null==Y?void 0:Y.start).format("dddd, MMMM D")})]})})]}),(0,a.jsx)(er.Z,{}),(0,a.jsxs)(w.Z,{spacing:1,pl:4.5,pr:2,pt:1,pb:1,sx:{overflowY:"scroll"},children:[(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Job Number"}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(0,a.jsx)(ea.r,{color:"secondary",href:"/dashboard/issues/view?id=".concat(ej.number),children:(0,a.jsx)(ei.D,{id:ej.id,number:ej.number,invoiceNumber:null==ej?void 0:null===(v=ej.invoices)||void 0===v?void 0:null===(x=v[0])||void 0===x?void 0:x.invoiceNumber,type:ej.type,numberPrefix:ec,numberSuffix:ef,isQuote:ej.quoted})})})]}),(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Job Type"}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:eC})]}),(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Job Status"}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(0,a.jsx)(es.B,{value:ej.status})})]}),!ev&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Customer"}),(0,a.jsx)(eh,{noWrap:eb,color:"secondary",href:"/dashboard/customers/view?id=".concat(null===(b=ej.customer)||void 0===b?void 0:b.id),children:(0,a.jsx)(q.Z,{variant:"subtitle2",children:null===(m=ej.customer)||void 0===m?void 0:m.name})})]}),(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Customer Contact"}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:null===(g=ej.customerUser)||void 0===g?void 0:g.fullName})]})]}),(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Location"}),(0,a.jsxs)(eh,{noWrap:ev||eb,color:"secondary",href:"/dashboard/properties/view?id=".concat(null===(j=ej.location)||void 0===j?void 0:j.id),children:[(0,a.jsxs)(q.Z,{variant:"subtitle2",children:[(null===(Z=ej.location)||void 0===Z?void 0:Z.name)||""," "]}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(null==eZ?void 0:null===(C=eZ.address)||void 0===C?void 0:C.name)||""}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(null==eZ?void 0:null===(k=eZ.address)||void 0===k?void 0:k.addressLine)||""}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(null==eZ?void 0:null===(S=eZ.address)||void 0===S?void 0:S.addressLine)||""}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(null==eZ?void 0:null===(P=eZ.address)||void 0===P?void 0:P.addressLine)||""}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(null==eZ?void 0:null===(E=eZ.address)||void 0===E?void 0:E.city)||""}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(null==eZ?void 0:null===(F=eZ.address)||void 0===F?void 0:F.county)||""}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(null==eZ?void 0:null===(A=eZ.address)||void 0===A?void 0:A.postCode)||""})]})]}),(null===(I=ej.service)||void 0===I?void 0:I.name)&&(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Service"}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:ej.service.name})]}),(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Short job description"}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:(null==ej?void 0:null===(W=ej.shortJobDesc)||void 0===W?void 0:W.length)>0&&(null===(L=null==ej?void 0:ej.shortJobDesc[0])||void 0===L?void 0:L.taxonomy.name)||ej.title})]}),!ex&&!eb&&(0,a.jsxs)(a.Fragment,{children:[(null===(H=ej.supplier)||void 0===H?void 0:H.name)&&(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Supplier"}),(0,a.jsx)(ea.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(null===(G=ej.supplier)||void 0===G?void 0:G.id),children:(0,a.jsx)(q.Z,{variant:"subtitle2",children:null===(N=ej.supplier)||void 0===N?void 0:N.name})})]}),(null==eP?void 0:null===(V=eP.user)||void 0===V?void 0:V.fullName)&&(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:eE?"Contact":"Contact / Operative"}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:null==eP?void 0:null===(J=eP.user)||void 0===J?void 0:J.fullName})]}),ej.supplierUser&&eE&&(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{variant:"subtitle2",children:"Operative"}),(0,a.jsx)(q.Z,{variant:"subtitle2",children:ej.supplierUser.fullName})]})]})]})]})})};ec.defaultProps={setAnchorEl:function(){},setEvent:function(){}},ec.propTypes={anchorEl:x().object,setAnchorEl:x().func,event:x().shape({id:x().number,start:x().object}),setEvent:x().func};var eu=(0,W.ZP)(Y.ZP)(function(e){return e.theme,{"& .MuiPaper-root":{fontFamily:"Nunito-Regular",borderRadius:"12px",overflow:"hidden"},"& .MuiTypography-root":{fontFamily:"Nunito-Regular"}}}),ep=(0,W.ZP)(I.Z)(function(e){var n=e.theme,t=e.labelColor;return{color:n.palette.white.main,fontWeight:700,height:"20px",borderRadius:"3px",backgroundColor:t,"& span":{color:n.palette.white.main,padding:"0 4px"}}}),eh=function(e){var n=e.children,t=e.noWrap,r=(0,d.Z)(e,["children","noWrap"]);return t?n:(0,a.jsx)(ea.r,(0,i.Z)((0,o.Z)({},r),{children:n}))},ef=t(86532),ev=t(22797),ex=t(38895),eb=t(69368),em=t(50480),eg=t(86886),ey=t(72852),ej=t(50135),eZ=t(6848),ew=t(14924),eC=function(e,n){var t=Array.from(new Set(e.map(function(e){return e[n]}))),r=t.reduce(function(t,r){return(0,i.Z)((0,o.Z)({},t),(0,ew.Z)({},r,e.filter(function(e){return e[n]===r})))},{});return{colors:t,colorObjects:r}},ek=t(27434),eS=function(e){var n=e.filterDisabled,t=e.title,r=e.types,d=e.date,s=e.setDate,l=e.setTypes,u=(e.setFilters,e.setSiteVisit),p=e.fullWidth,h=e.expanded,v=e.onChangeExpanded,x=e.hideExpandIcon,b=eC(T.DJ,"colour"),m=b.colors,g=b.colorObjects;(0,c.useEffect)(function(){s(f()())},[]);var y=function(e,n){n.target.checked?l((0,D.Z)(r).concat([e])):l(r.filter(function(n){return n!==e}))},j=function(e){u(e.target.checked)};return(0,a.jsxs)(eP,{fullWidth:p,expanded:h,onChange:v,children:[(0,a.jsx)(ex.Z,(0,i.Z)((0,o.Z)({},x?{}:{expandIcon:(0,a.jsx)(ek.Z,{})}),{children:(0,a.jsx)(q.Z,{variant:"h6",sx:{fontWeight:700,color:"#444C63"},children:t})})),(0,a.jsx)(ev.Z,{sx:{padding:0},children:(0,a.jsxs)(w.Z,{width:"100%",children:[(0,a.jsx)(eF,{disableMargin:!0,showDaysOutsideCurrentMonth:!0,displayStaticWrapperAs:"desktop",openTo:"day",value:d,onChange:function(e){s(e)},renderInput:function(e){return(0,a.jsx)(ej.Z,(0,o.Z)({},e))}}),(0,a.jsxs)(w.Z,{width:"100%",pl:2,spacing:2,children:[(0,a.jsx)(eg.ZP,{container:!0,children:(0,a.jsx)(eg.ZP,{item:!0,xs:12,display:"flex",justifyContent:"center",children:(0,a.jsx)(em.Z,{control:(0,a.jsx)(eb.Z,{color:"secondary",onChange:j}),label:"Only Show Site Visits"})})}),(0,a.jsxs)(eg.ZP,{container:!0,rowGap:2,children:[(0,a.jsxs)(eg.ZP,{item:!0,xs:6,display:"flex",alignItems:"center",children:[(0,a.jsx)(eE,{color:"#2EE6CA",mr:1}),(0,a.jsx)(em.Z,{control:(0,a.jsx)(ey.Z,{disabled:n.reactive,color:"secondary",size:"small",checked:r.includes("reactive"),onChange:function(e){return y("reactive",e)}}),label:"Reactive"})]}),(0,a.jsxs)(eg.ZP,{item:!0,xs:6,display:"flex",alignItems:"center",children:[(0,a.jsx)(eE,{color:"#D67EFF",mr:1}),(0,a.jsx)(em.Z,{control:(0,a.jsx)(ey.Z,{disabled:n.ppm,color:"secondary",size:"small",checked:r.includes("ppm"),onChange:function(e){return y("ppm",e)}}),label:"PPM"})]}),(0,a.jsxs)(eg.ZP,{item:!0,xs:6,display:"flex",alignItems:"center",children:[(0,a.jsx)(eE,{color:"#CC7429",mr:1}),(0,a.jsx)(em.Z,{control:(0,a.jsx)(ey.Z,{disabled:n.cppm,color:"secondary",size:"small",checked:r.includes("cppm"),onChange:function(e){return y("cppm",e)}}),label:"Compliance"})]}),(0,a.jsxs)(eg.ZP,{item:!0,xs:6,display:"flex",alignItems:"center",children:[(0,a.jsx)(eE,{color:"#7D7",mr:1}),(0,a.jsx)(em.Z,{control:(0,a.jsx)(ey.Z,{disabled:n.quote,color:"secondary",size:"small",checked:r.includes("quote"),onChange:function(e){return y("quote",e)}}),label:"Quote"})]})]}),(0,a.jsxs)(eg.ZP,{container:!0,rowSpacing:1,pb:2,children:[(0,a.jsx)(eg.ZP,{item:!0,xs:12,children:(0,a.jsx)(q.Z,{variant:"h6",sx:{color:"#444C63",fontWeight:700},children:"Statuses"})}),m.map(function(e){return(0,a.jsxs)(eg.ZP,{item:!0,display:"flex",alignItems:"center",xs:12,children:[(0,a.jsx)(eA,{color:e,mr:1}),(0,a.jsx)(q.Z,{children:g[e][0].text})]})})]})]})]})})]})};eS.defaultProps={filterDisabled:{},setDate:function(){},setTypes:function(){},setFilters:function(){},setSiteVisit:function(){},onChangeExpanded:function(){}},eS.propTypes={filterDisabled:x().shape({quote:x().bool,reactive:x().bool,cppm:x().bool,ppm:x().bool}).isRequired,title:x().string,types:x().arrayOf(x().string),date:x().object,setDate:x().func,setTypes:x().func,setFilters:x().func,setSiteVisit:x().func,fullWidth:x().bool,expanded:x().bool,onChangeExpanded:x().func,hideExpandIcon:x().bool};var eP=(0,W.ZP)(ef.Z)(function(e){e.theme;var n=e.fullWidth;return{maxHeight:n?"100%":"calc(100vh - 32px)",minHeight:n?"inherit":"650px",height:"initial",minWidth:"330px",width:n?"100%":"330px",overflowY:"scroll"}}),eE=(0,W.ZP)(_.Z)(function(e){e.theme;var n=e.color;return{width:"16px",height:"16px",border:"2px solid ".concat(n),borderRadius:"3px",backgroundColor:(0,M.$n)(n,.8)}}),eF=(0,W.ZP)(eZ.w)(function(e){var n=e.theme;return{"& .MuiCalendarPicker-root":{"& .MuiPickersCalendarHeader-root":{position:"relative",marginLeft:"24px",marginRight:"24px",marginTop:"0px","& .MuiPickersCalendarHeader-labelContainer":{position:"absolute",top:"2px",left:"50%",transform:"translateX(-50%)",width:"max-content","& .MuiPickersCalendarHeader-label":{fontSize:"17px",fontWeight:700,color:"#444C63"}}},"& .MuiPickersArrowSwitcher-root":{"& .MuiButtonBase-root.MuiIconButton-root.MuiIconButton-edgeEnd":{position:"absolute",left:0,top:"5px",height:"24px",borderRadius:"5px 0 0 5px",border:"1px solid ".concat(n.palette.divider),"& svg":{width:"13px",height:"13px"}},"& .MuiButtonBase-root.MuiIconButton-root.MuiIconButton-edgeStart":{position:"absolute",right:0,top:"5px",height:"24px",borderRadius:"0 5px 5px 0",border:"1px solid ".concat(n.palette.divider),"& svg":{width:"13px",height:"13px"}}},"& .PrivatePickersSlideTransition-root.MuiDayPicker-slideTransition":{minHeight:"180px"},"& .MuiButtonBase-root.MuiPickersDay-root.MuiPickersDay-dayWithMargin":{"&.MuiPickersDay-today":{},"&.Mui-selected":{color:n.palette.white.main,backgroundColor:"#444C63"}},"& .MuiDayPicker-monthContainer":{"& .MuiDayPicker-weekContainer":{margin:0}}}}}),eA=(0,W.ZP)(_.Z)(function(e){e.theme;var n=e.color;return{width:"16px",height:"16px",minWidth:"16px",minHeight:"16px",borderRadius:"3px",backgroundColor:n,border:"".concat("#FFFFFF"===n?"2px solid black":"none")}});function eD(){var e=(0,s.Z)(["\n  --fc-small-font-size: 1em;\n  --fc-page-bg-color: #fff;\n  --fc-neutral-bg-color: #fff;\n  --fc-neutral-text-color: #000000;\n  --fc-border-color: ",";\n\n  --fc-button-text-color: ",";\n  --fc-button-bg-color: ",";\n  --fc-button-border-color: ",";\n  --fc-button-hover-text-color: ",";\n  --fc-button-hover-bg-color: ",";\n  --fc-button-hover-border-color: ",";\n  --fc-button-active-text-color: ",";\n  --fc-button-active-bg-color: ",";\n  --fc-button-active-border-color: ",";\n\n  --fc-event-bg-color: ",";\n  --fc-event-border-color: ",";\n  --fc-event-text-color: ",";\n  --fc-event-selected-overlay-color: rgba(0, 0, 0, 0.25);\n\n  --fc-more-link-bg-color: #d0d0d0;\n  --fc-more-link-text-color: inherit;\n\n  --fc-event-resizer-thickness: 8px;\n  --fc-event-resizer-dot-total-width: 8px;\n  --fc-event-resizer-dot-border-width: 1px;\n\n  --fc-non-business-color: rgba(215, 215, 215, 0.3);\n  --fc-bg-event-color: rgb(143, 223, 130);\n  --fc-bg-event-opacity: 0.2;\n  --fc-highlight-color: rgba(188, 232, 241, 0.3);\n  --fc-today-bg-color: #c7e6ff;\n  --fc-now-indicator-color: #ff6633;\n\n  --fc-daygrid-event-dot-width: 8px;\n\n  width: 100%;\n  background-color: #ffffff;\n\n  div.fc {\n    min-height: 650px;\n    width: 100%;\n    color: ",";\n  }\n\n  div.fc .fc-timegrid.fc-timeGridDay-view.fc-view {\n    --fc-today-bg-color: none;\n  }\n\n  div.fc .fc-timegrid.fc-timeGridWeek-view.fc-view {\n    --fc-today-bg-color: none;\n    overflow-x: auto;\n\n    & .fc-scrollgrid {\n      overflow-x: auto;\n      min-width: 500px;\n    }\n  }\n\n  div.fc .fc-daygrid.fc-dayGridMonth-view.fc-view {\n    --fc-today-bg-color: none;\n\n    overflow-x: auto;\n\n    & .fc-scrollgrid {\n      overflow-x: auto;\n      min-width: 500px;\n    }\n\n    & .fc-scrollgrid-section.fc-scrollgrid-section-header > td {\n      border-bottom: none;\n    }\n\n    & .fc-scrollgrid-section.fc-scrollgrid-section-body.fc-scrollgrid-section-liquid > td,\n    .fc-daygrid-day.fc-day {\n      border-top: none;\n    }\n\n    & .fc-col-header-cell.fc-day {\n      height: auto;\n      border-bottom: none;\n    }\n\n    & .fc-day-today .fc-daygrid-day-number {\n      width: 24px;\n      height: 24px;\n      border-radius: 100%;\n      text-align: center;\n      color: var(--fc-button-active-text-color);\n      background-color: #444c63;\n    }\n\n    & .fc-daygrid-day-number {\n      font-size: 12px;\n      font-weight: 700;\n      padding: 0;\n      padding-top: 4px;\n    }\n\n    & .fc-daygrid-day-top {\n      justify-content: center;\n    }\n\n    & .fc-daygrid-event.fc-daygrid-dot-event {\n      margin: 0;\n      margin-left: 2px;\n      margin-right: 2px;\n    }\n  }\n\n  div.fc .fc-scrollgrid {\n    border-collapse: collapse;\n  }\n\n  div.fc.fc-theme-standard td,\n  div.fc.fc-theme-standard th {\n    border: 2px solid var(--fc-border-color);\n  }\n\n  div.fc .fc-header-toolbar.fc-toolbar {\n    justify-content: space-between;\n    flex-wrap: wrap;\n    row-gap: 5px;\n    column-gap: 10px;\n    padding: 1.5rem 8px;\n    margin: 0;\n    background-color: #eef1f7;\n  }\n\n  div.fc-toolbar .fc-toolbar-chunk > div:last-child {\n    display: flex;\n    align-items: center;\n  }\n\n  div.fc .fc-button-primary:not(:disabled).fc-button-active {\n    color: var(--fc-button-active-text-color);\n\n    &:focus {\n      box-shadow: none;\n    }\n  }\n\n  div.fc .fc-button-primary {\n    height: 30px;\n    padding: 0 8px;\n    background-color: inherit;\n\n    &:focus {\n      box-shadow: none;\n    }\n\n    &:hover {\n      color: var(--fc-button-hover-text-color);\n      background-color: var(--fc-button-hover-bg-color);\n    }\n\n    &:hover:disabled {\n      color: inherit;\n      background-color: inherit;\n    }\n  }\n\n  div.fc .fc-createWorkOrder-button {\n    color: var(--fc-button-active-text-color);\n    border-color: var(--fc-button-active-bg-color);\n    background-color: var(--fc-button-active-bg-color);\n  }\n\n  div.fc .fc-createWorkOrder-button:hover {\n    border-color: ",";\n    background-color: ",";\n  }\n\n  div.fc .fc-toolbar-title {\n    font-size: 17px;\n    margin-left: 24px;\n    margin-right: 24px;\n  }\n\n  div.fc .fc-prev-button {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    background-color: inherit;\n\n    &:hover {\n      background-color: var(--fc-button-hover-bg-color);\n    }\n  }\n\n  div.fc .fc-next-button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    background-color: inherit;\n\n    &:hover {\n      background-color: var(--fc-button-hover-bg-color);\n    }\n  }\n\n  div.fc .fc-col-header-cell.fc-day,\n  div.fc th.fc-timegrid-axis {\n    height: 60px;\n    font-size: 12px;\n    font-weight: 700;\n    vertical-align: middle;\n    border-bottom: none;\n  }\n\n  div.fc .fc-timegrid-divider.fc-cell-shaded {\n    padding: 0;\n  }\n\n  div.fc .fc-daygrid-day.fc-day {\n    height: 60px;\n  }\n\n  div.fc .fc-timegrid-slot {\n    height: 30px;\n  }\n\n  div.fc .fc-timegrid-axis-frame.fc-scrollgrid-shrink-frame.fc-timegrid-axis-frame-liquid {\n    justify-content: center;\n\n    & > span {\n      padding: 0;\n      margin-bottom: -10px;\n    }\n  }\n\n  div.fc .fc-timegrid-slot-label-cushion.fc-scrollgrid-shrink-cushion {\n    font-size: 12px;\n    font-weight: 700;\n    position: absolute;\n    left: 0;\n    transform: translateY(20%);\n  }\n\n  div.fc .fc-timegrid-now-indicator-container {\n    overflow: visible;\n  }\n\n  div.fc .fc-timegrid-now-indicator-line {\n    height: 2px;\n    border-width: 2px 0 0;\n    width: 2000%;\n    left: -1000%;\n  }\n\n  div.fc .fc-timegrid-now-indicator-arrow {\n    border: 5px solid var(--fc-now-indicator-color);\n    border-radius: 5px;\n  }\n\n  div.fc .fc-timegrid-slot.fc-timegrid-slot-label.fc-scrollgrid-shrink {\n    border-bottom-style: none;\n    border-right-style: none;\n  }\n  div.fc .fc-timegrid-slot.fc-timegrid-slot-lane {\n    border-bottom-style: none;\n    border-left-style: none;\n  }\n  div.fc .fc-timegrid-slot.fc-timegrid-slot-minor {\n    border: none;\n    border-top-style: none;\n  }\n\n  div.fc .fc-timegrid-event.fc-v-event {\n    border: none;\n    border-radius: 0;\n    box-shadow: none;\n    background: none !important;\n  }\n  // div.fc .fc-daygrid-event.fc-daygrid-block-event.fc-h-event.fc-event {\n  //   color: var(--fc-event-text-color);\n  // }\n\n  div.fc .fc-timegrid-event .fc-event-main {\n    padding: 0;\n  }\n\n  div.fc .fc-daygrid-more-link.fc-more-link {\n    font-size: 10px;\n    font-weight: 700;\n  }\n\n  div.fc .fc-daygrid-day-bottom {\n    padding: 0;\n    padding-left: 8px;\n  }\n\n  div.fc .fc-popover.fc-more-popover {\n    border-radius: 10px;\n\n    & .fc-popover-header {\n      background: none;\n    }\n  }\n\n  div.fc .fc-timegrid.fc-timeGridWeek-view.fc-view {\n    overflow-x: auto;\n\n    & .fc-scrollgrid {\n      overflow-x: auto;\n      min-width: 500px;\n    }\n\n    & .fc-media-screen .fc-timegrid-cols > table {\n      min-width: 500px;\n    }\n\n    & .fc-scroller .fc-col-header {\n      min-width: 500px;\n    }\n\n    & .fc-timegrid .fc-daygrid-body {\n      min-width: 500px;\n    }\n\n    & .fc-scrollgrid-section-body table,\n    & .fc-scrollgrid-section-footer table {\n      min-width: 500px;\n    }\n  }\n\n  div.fc .fc-daygrid.fc-dayGridMonth-view.fc-view {\n    overflow-x: auto;\n\n    & .fc-scrollgrid {\n      overflow-x: auto;\n      min-width: 500px;\n    }\n\n    & .fc-media-screen .fc-timegrid-cols > table {\n      min-width: 500px;\n    }\n\n    & .fc-scroller .fc-col-header {\n      min-width: 500px;\n    }\n\n    & .fc-daygrid-body {\n      min-width: 500px;\n    }\n\n    & .fc-scrollgrid-section-body table,\n    & .fc-scrollgrid-section-footer table {\n      min-width: 500px;\n    }\n  }\n"]);return eD=function(){return e},e}function e_(){var e=(0,s.Z)(["\n  ","\n"]);return e_=function(){return e},e}var eI=function(e){var n,t=e.defaultFilters,s=e.defaultView,h=e.locationId,v=e.supplierId,x=e.showCompliance,j=e.showFilters,Z=e.showSiteVisits,D=e.filterDisabled,_=e.hideCreateWorkOrder,I=(0,C.Z)("(max-width: 1080px)"),q=(0,C.Z)("(max-width: 800px)"),W=(0,C.Z)("(max-width: 500px)"),M=(0,u.useRouter)().query,O=(0,b.x)(),R=(0,c.useState)(!1),H=R[0],G=R[1],N=(0,c.useState)(null),J=N[0],U=N[1],B=(0,c.useState)(M.type?["".concat(M.type)]:t),$=B[0],Y=B[1],X=(0,c.useState)(Z),ee=X[0],en=X[1],et=(0,c.useState)(null),er=et[0],eo=et[1],ei=(0,c.useState)(!1),ed=ei[0],es=ei[1],el=(0,c.useState)(null),ea=el[0],eu=el[1],ep=(0,c.useState)(null),eh=ep[0],ef=ep[1],ev=(0,c.useState)(null),ex=ev[0],eb=ev[1],em=(0,c.useState)(null),eg=em[0],ey=em[1],ej=(0,c.useRef)(null);(0,c.useEffect)(function(){ej.current&&J&&ej.current.getApi().gotoDate(J.toDate())},[J]),(0,c.useEffect)(function(){return M.type?["".concat(M.type)]:Y(t)},[t,M.type]);var eZ=(0,c.useCallback)((n=(0,r.Z)(function(e,n,t){var r,s,a,c,u,p,b;return(0,l.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r={type:{_in:$},_and:[{_or:[{_and:[{timingStart:{_gte:e.start}},{timingStart:{_lte:e.end}}]},{_and:[{timingEnd:{_gte:e.start}},{timingEnd:{_lte:e.end}}]},{_and:[{scheduledAt:{_gte:e.start}},{scheduledAt:{_lte:e.end}}]},{_and:[{quoteDue:{_gte:e.start}},{quoteDue:{_lte:e.end}}]},{_and:[{siteVisitStart:{_gte:e.start}},{siteVisitStart:{_lte:e.end}}]}]}]},h&&(r.locationId={_eq:h}),v&&r._and.push({_or:[{supplierId:{_eq:v}},{SupplierOffers:{accountId:{_eq:v},status:{_in:["offered","accepted"]}},status:{_eq:"offered"}},{SupplierQuotes:{accountId:{_eq:v},status:{_in:["supplierQuoteRequested","supplierQuoteComplete","supplierQuoteDraft","waitingThresholdApproval"]}},status:{_in:["quoteOffered","waitingThresholdApproval","quoteReceived"]}}]}),(x||h)&&(r.Compliances={complianceId:{_is_null:!1}}),er&&(r.customerUserId={_eq:null==er?void 0:er.userId}),ee&&(r.siteVisitStart={_is_null:!1}),[4,O.query({query:m.f,variables:{where:r}})];case 1:return c=(void 0===(a=s.sent().data)?{events:[]}:a).events,u=[],c.forEach(function(e){e.supplierQuotes;var n,t=(0,d.Z)(e,["supplierQuotes"]),r=(null===(n=null==t?void 0:t.shortJobDesc[0])||void 0===n?void 0:n.taxonomy.name)||t.title;if(e.anyTimeOption&&!e.scheduledAt){var s=f()(e.start),l=f()(e.end),a=f()(e.hourStart,"HH:mm:ssZ"),c=s.set({hour:a.hour()||0,minute:a.minute()||0,second:a.second()||0,millisecond:a.millisecond()||0}),p=l.set({hour:a.hour()||0,minute:a.minute()||0,second:a.second()||0,millisecond:a.millisecond()||0});return f()(e.start).startOf("day").toISOString()===f()(e.end).startOf("day").toISOString()?u.push((0,i.Z)((0,o.Z)({},e),{title:r,start:c.toISOString()})):u.push((0,i.Z)((0,o.Z)({},e),{title:r,start:c.toISOString()}),(0,i.Z)((0,o.Z)({},e),{title:r,start:p.toISOString()}))}return u.push((0,i.Z)((0,o.Z)({},e),{title:r}))}),p=u.map(function(e){var n=(0,o.Z)({},e),t=n.estimatedDuration||54e5,r=(T.DJ.find(function(e){return e.value===n.status})||{colour:z.Q.COLOUR.muiGray}).colour;return n.start=n.scheduledAt||n.quoteDue||n.start,n.end=f()(n.start).add(t,"milliseconds").toISOString(),n.borderColor="#FFFFFF"===r?"black":"#FFFFFF",n.color=r,n.propertyAddress=(0,Q.WE)(null==n?void 0:n.location,"registered"),n.supplierAddress=(0,Q.WE)(null==n?void 0:n.supplier,"registered"),n}),n(p),[3,3];case 2:return t(s.sent()),[3,3];case 3:return[2]}})}),function(e,t,r){return n.apply(this,arguments)}),[$,h,v,x,er,ee,O]),ew=(0,c.useCallback)(function(e){ey({id:parseInt(e.event.id),start:e.event.start}),eb(e.el)},[]),eC=(0,c.useCallback)(function(e){var n=e.date,t=n.toLocaleString("en-US",{weekday:W?"narrow":"long"}),r=n.toLocaleString("en-US",{month:"2-digit",day:"2-digit"});return"".concat(t," ").concat(r)},[W]),ek=(0,c.useMemo)(function(){return{timeGridWeek:{dayHeaderContent:eC}}},[eC]),eP=(0,c.useCallback)(function(){return(0,a.jsx)(A.Z,{})},[]),eE=(0,c.useCallback)(function(e){var n=e.date,t=e.isAxis,r=f()(n).format("HH");return t?r:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"80px"},children:r})},[]),eF=(0,c.useCallback)(function(e){var n=e.event,t=e.isStart,r=e.isEnd;return"dayGridMonth"===e.view.type?(0,a.jsx)(V,{title:n.title,start:n.start,end:n.end,id:n.id,isStart:t,isEnd:r,backgroundColor:n.backgroundColor,borderColor:n.borderColor,extendedProps:n.extendedProps}):(0,a.jsx)(L,{title:n.title,start:n.start,end:n.end,id:n.id,backgroundColor:n.backgroundColor,borderColor:n.borderColor,extendedProps:n.extendedProps})},[]),eA=(0,c.useCallback)(function(e){return ef((0,o.Z)({},e)),eu(e.jsEvent.currentTarget),!0},[]);return(0,a.jsxs)(w.Z,{direction:I?"column":"row",width:"100%",children:[H&&(0,a.jsx)(g.Z,{sx:{zIndex:1e5},open:!0,children:(0,a.jsx)(y.Z,{color:"secondary"})}),(0,a.jsx)(K,{anchorEl:ea,setAnchorEl:eu,event:eh,setEvent:ef,eventClick:ew}),(0,a.jsx)(ec,{anchorEl:ex,setAnchorEl:eb,event:eg,setEvent:ey}),j&&(0,a.jsx)(eS,{filterDisabled:D,fullWidth:I,expanded:!I||ed,onChangeExpanded:function(e,n){return es(n)},hideExpandIcon:!I,title:"Calendar",date:J,setDate:U,setTypes:Y,setFilters:eo,setSiteVisit:en,types:$}),(0,a.jsx)(eW,{children:(0,a.jsx)(k.ZPm,{ref:ej,firstDay:1,businessHours:!1,buttonIcons:!0,dayMaxEvents:!0,editable:!1,expandRows:!1,height:"95vh",navLinks:!0,nowIndicator:!0,selectable:!1,weekNumbers:!1,views:ek,date:J,allDayContent:eP,slotLabelContent:eE,eventMaxStack:q?1:6,initialView:"day"===M.show?"timeGridDay":s,plugins:[S.ZP,P.ZP,E.Z,F.ZP],events:eZ,loading:G,eventClick:ew,eventContent:eF,moreLinkClick:eA,headerToolbar:{center:"prev,title,next",right:_?void 0:"createWorkOrder",left:"timeGridDay,timeGridWeek,dayGridMonth today"},customButtons:{createWorkOrder:{text:"Create work order",click:function(){p().push("/dashboard/issues/manage")}}}})})]})};eI.propTypes={showCompliance:v.bool,showSiteVisits:v.bool,locationId:v.number,supplierId:v.number,showFilters:v.bool,filterDisabled:v.object},eI.defaultProps={dateClick:!1,defaultFilters:["reactive","ppm","quote","cppm"],showFilters:!0,showSiteVisits:!1,filterDisabled:{}};var eq=function(e){return(0,j.iv)(eD(),e.theme.palette.divider,e.theme.palette.white.contrastText,e.theme.palette.white.main,e.theme.palette.divider,e.theme.palette.secondary.contrastText,e.theme.palette.secondary.main,e.theme.palette.secondary.main,e.theme.palette.secondary.contrastText,e.theme.palette.secondary.main,e.theme.palette.secondary.main,e.theme.palette.secondary.main,e.theme.palette.secondary.main,e.theme.palette.secondary.contrastText,e.theme.palette.text.primary,e.theme.palette.secondary.dark,e.theme.palette.secondary.dark)},eW=Z.Z.div(e_(),eq)},28852:function(e,n,t){t.d(n,{f:function(){return s}});var r=t(7297),o=t(75063),i=t(66312);function d(){var e=(0,r.Z)(['\n  query GetEvents($where: Job_bool_exp) {\n    events: Job(where: $where) {\n      id\n      number\n      type\n      description\n      end: timingEnd\n      scheduledAt\n      siteVisitStart\n      start: timingStart\n      status\n      title\n      quoteDue\n      estimatedDuration\n      estimatedDurationUnit\n      anyTimeOption\n      hourStart\n      hourEnd\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      supplierQuotes: SupplierQuotes(\n        where: {\n          siteVisitAt: { _is_null: false }\n          status: { _neq: "cancelled" }\n          type: { _eq: "quote" }\n        }\n      ) {\n        siteVisitAt\n        quoteNumber\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n              code\n            }\n          }\n        }\n      }\n      supplier: Supplier {\n        addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"]);return d=function(){return e},e}var s=(0,o.Ps)(d(),i.WW,i.MR)}}]);