(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6155],{5597:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/data/business",function(){return t(90079)}])},21300:function(e,n,t){"use strict";t.d(n,{M:function(){return c}});var a=t(26042),r=t(99534),i=t(85893),d=t(45697),o=t(89345),s=t(99505),l=t(55843),c=function(e){var n=e.control,t=e.errors,d=e.name,c=e.space,u=(0,r.Z)(e,["control","errors","name","space"]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,(0,a.Z)({control:n,errors:t,locale:o.Z,name:d},u)),c&&(0,i.jsx)(l.Z,{marginBottom:"sm"})]})};c.propTypes={control:d.object.isRequired,errors:d.object.isRequired,name:d.string.isRequired,space:d.bool},c.defaultProps={space:!0}},93829:function(e,n,t){"use strict";t.d(n,{m:function(){return g}});var a=t(85893),r=t(67294),i=t(6388),d=t(7297),o=t(75063);function s(){var e=(0,d.Z)(["\n  query GetJobsByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    jobsByMonth: getDashboard_Count_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: asc }\n    ) {\n      count: count\n      month: strval_extra\n    }\n  }\n"]);return s=function(){return e},e}var l=(0,o.Ps)(s()),c=t(78840),u=t.n(c),m=t(75708),I=t.n(m),p=t(55572),v=t(74975),g=(0,r.forwardRef)(function(e,n){var r,d,o,s,c=e.filters,m=e.removeChart,g=(0,i.aM)(l,{variables:{adminId:c.adminId,customerId:c.customerId,endTime:c.endDate,isFixed:c.isFixed,isPlanned:c.isPlanned,locationId:c.locationId,managerId:c.managerId,postCodeAreaId:c.postCodeAreaId,serviceId:c.serviceId,slaId:c.slaId,startTime:c.startDate,supplierId:c.supplierId}}).data,$=void 0===g?{meta:{},jobsByMonth:[]}:g,x=$.meta,y=$.jobsByMonth,f=function(e){e.reflow()};return t(18393)(u()),(0,a.jsx)(p.J,{name:"JobsByMonth",removeChart:m,title:"Total bookings by Month (".concat(null===(r=x.aggregate)||void 0===r?void 0:r.sum.count,")"),children:(0,a.jsx)(I(),{callback:f,constructorType:"chart",Highcharts:u(),options:{chart:{type:"column"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{min:0,title:{text:"Counts"}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:"{point.name}</span>: <b>{point.y}</b> "},series:[{name:"Month",data:(o=y,s=[],o.forEach(function(e){try{s.push({name:(0,v.Z)(new Date(e.month),"LLL yyyy"),y:e.count})}catch(n){}}),s),showInLegend:!1}]},ref:n})})})},50956:function(e,n,t){"use strict";t.d(n,{e:function(){return v}});var a=t(85893),r=t(67294),i=t(6388),d=t(7297),o=t(75063);function s(){var e=(0,d.Z)(["\n  query GetJobsByStatus(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByStatus: getDashboard_Count_By_Status(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: {}\n    ) {\n      statusname: name\n      count: count\n    }\n    meta: getDashboard_Count_By_Status_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { count: desc }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var l=(0,o.Ps)(s()),c=t(78840),u=t.n(c),m=t(75708),I=t.n(m),p=t(55572),v=(0,r.forwardRef)(function(e,n){var r,d,o=e.filters,s=e.removeChart,c=(0,i.aM)(l,{variables:{adminId:o.adminId,customerId:o.customerId,endTime:o.endDate,isFixed:o.isFixed,isPlanned:o.isPlanned,locationId:o.locationId,managerId:o.managerId,postCodeAreaId:o.postCodeAreaId,serviceId:o.serviceId,slaId:o.slaId,startTime:o.startDate,supplierId:o.supplierId}}).data,m=void 0===c?{meta:{},jobsByStatus:[]}:c,v=m.meta,g=m.jobsByStatus,$=function(e){e.reflow()};return t(18393)(u()),g&&(0,a.jsx)(p.J,{name:"JobsByStatusPieChart",removeChart:s,title:"Total bookings by Status (".concat(null===(r=v.aggregate)||void 0===r?void 0:r.sum.count,")"),children:(0,a.jsx)(I(),{callback:$,constructorType:"chart",Highcharts:u(),options:{chart:{type:"pie"},title:{text:null},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y}},series:[{data:g.map(function(e){return{name:e.statusname,y:e.count}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})})},55572:function(e,n,t){"use strict";t.d(n,{J:function(){return c}});var a=t(7297),r=t(85893),i=t(40826),d=t(55377),o=t(11585),s=t(10367);function l(){var e=(0,a.Z)(["\n  height: 100%;\n  overflow-x: ",";\n"]);return l=function(){return e},e}var c=function(e){var n=e.title,t=e.children,a=e.isTable,s=e.name,l=e.removeChart,c=function(e){e.stopPropagation(),l(e,s)},m=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{context:"danger",icon:"trash",prefix:"fa",size:"sm",title:"Delete",onClick:c}),(0,r.jsx)(d.Z,{context:"darkGrey",vertical:!0}),(0,r.jsx)(i.Z,{className:"dragHandle",icon:"arrows-alt",prefix:"fa",size:"md",title:"Move",onClick:function(e){return e.stopPropagation()}})]});return(0,r.jsx)(o.Z,{context:"secondary",fitParentHeight:!0,open:!0,title:n,toolbar:m,loading:!0,children:(0,r.jsx)(u,{overflow:a,children:t})})},u=s.ZP.div.withConfig({displayName:"wrapper__StyledChildren",componentId:"sc-2820ff2f-0"})(l(),function(e){return e.overflow?"hidden":"unset"})},91272:function(e,n,t){"use strict";t.d(n,{t:function(){return l}});var a=t(85893),r=t(67294),i=t(45697),d=t(11163),o=t(46003),s=t(8500),l=(0,r.forwardRef)(function(e,n){var t=e.columns,i=e.history,l=e.initialSort,c=e.loading,u=e.meta,m=e.paginationSize,I=e.refetch,p=e.submissionsRefetch,v=e.rowClick,g=e.rows,$=e.xeroPageSize,x=(0,d.useRouter)(),y=x.query,f=void 0===y?{}:y,h=(0,r.useState)(parseInt(null==f?void 0:f.page,10)||1),_=h[0],T=h[1],b=(0,r.useState)($||o.C1.paginationSize),C=b[0],A=b[1];l||(l={item:"createdAt",order:"desc"});var j=(0,r.useState)({item:l.item,order:l.order}),Z=j[0],P=j[1],F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=x.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var a=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(a)},D=function(){P({item:l.item,order:l.order}),T(1);var e=F();x.push(e),A($||o.C1.paginationSize)};(0,r.useImperativeHandle)(n,function(){return{currentPage:_,pageSize:C,sort:Z,resetPagination:function(){D()}}});var w=function(e){var n=F(e);i&&x.push(n),T(e),!i&&I&&I()&&p&&p()},S=function(e){e!==o.C1.paginationSize&&(A(e),I&&I()&&p&&p())},B=function(e){var n;P({item:e.item,order:e.order}),I&&I()&&p&&p()};return(0,a.jsx)(s.Z,{columns:t,loading:c,paginationSize:m,pagination:u&&!0,paginationProps:u&&{currentPage:_,onPageChange:w,onPageSizeChange:S,pageCount:Math.ceil(u.aggregate.totalCount/C),perPage:C},rowClick:v,rows:g,sort:Z,setSort:B})});l.propTypes={columns:i.array.isRequired,history:i.bool,initialSort:i.object,loading:i.bool,meta:i.object,refetch:i.func,submissionsRefetch:i.func,rowClick:i.func,rows:i.array.isRequired},l.defaultProps={history:!0,loading:!0,paginationSize:!1}},20705:function(e,n,t){"use strict";t.d(n,{x:function(){return c}});var a=t(14924),r=t(26042),i=t(69396),d=t(67294),o=t(96486),s=t(46003),l=function(e){try{return JSON.parse(e)}catch(n){return!1}},c=function(e){var n,t,c,u,m,I,p,v,g,$,x,y=e.filters,f=e.newFilters,h=e.initialSort,_=(0,d.useRef)(),T=(0,d.useState)({}),b=T[0],C=T[1],A=(0,d.useState)({}),j=A[0],Z=A[1],P=h||{item:"createdAt",order:"desc"},F=(0,a.Z)({},(null===(n=_.current)||void 0===n?void 0:n.sort.item)||P.item,P.inneritem?(0,a.Z)({},P.inneritem,(null===(t=_.current)||void 0===t?void 0:t.sort.order)||P.order):(null===(c=_.current)||void 0===c?void 0:c.sort.order)||P.order);return(0,d.useEffect)(function(){var e=!(0,o.isEqual)(b,y),n=!(0,o.isEqual)(j,f);if(e&&(C(y),null==_||null===(a=_.current)||void 0===a||a.resetPagination()),n&&(Z(f),null==_||null===(r=_.current)||void 0===r||r.resetPagination()),(null==_?void 0:null===(t=_.current)||void 0===t?void 0:t.setSort)&&!(e||n)){var t,a,r,i,d,s,l,c,u,m,I,p=(null===(i=_.current)||void 0===i?void 0:null===(d=i.sort)||void 0===d?void 0:d.item)&&(null===(s=_.current)||void 0===s?void 0:null===(l=s.sort)||void 0===l?void 0:l.order)?{item:null===(c=_.current)||void 0===c?void 0:null===(u=c.sort)||void 0===u?void 0:u.item,order:null===(m=_.current)||void 0===m?void 0:null===(I=m.sort)||void 0===I?void 0:I.order}:F;_.current.setSort(p)}},[y,f]),{initialData:(0,i.Z)((0,r.Z)({},y),{newFilters:(null==f?void 0:f.length)>0?f:void 0,limit:(null===(u=_.current)||void 0===u?void 0:u.pageSize)==="Infinity"?null:parseInt(null===(m=_.current)||void 0===m?void 0:m.pageSize,10)||s.C1.paginationSize,offset:((null===(I=_.current)||void 0===I?void 0:I.currentPage)-1||0)*((null===(p=_.current)||void 0===p?void 0:p.pageSize)||s.C1.paginationSize),orderBy:l(null===(v=_.current)||void 0===v?void 0:null===(g=v.sort)||void 0===g?void 0:null===($=g.item)||void 0===$?void 0:$.replace(/ORDER/i,null===(x=_.current)||void 0===x?void 0:x.sort.order))||F}),initialSort:h,ref:_}}},9492:function(e,n,t){"use strict";t.d(n,{S:function(){return a}});var a=function(e,n){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=n,t.href=e,t.click(),document.body.removeChild(t)):location.replace(e)}},97432:function(e,n,t){"use strict";t.d(n,{l:function(){return a}});var a=function(e,n){var t=Math.pow(10,n);return Math.round(e*t)/t}},90079:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return rr}});var a={};t.r(a),t.d(a,{asset:function(){return T},coverage:function(){return b},customer:function(){return g},overview:function(){return $},property:function(){return _},quote:function(){return C},service:function(){return x},sla:function(){return y},status:function(){return f},supplier:function(){return h}});var r={};t.r(r),t.d(r,{AverageAllocationTime:function(){return V},AverageDaysOutstandingChart:function(){return et},AverageJobLengthChart:function(){return e0},AverageJobRevenueChart:function(){return e6},AverageProfitChart:function(){return nt},AverageQuoteValueChart:function(){return nd},AverageTimeToAcceptByMinuteChart:function(){return nc},AverageTimeToAttendanceChart:function(){return nI},AverageTimeToSubmitJobReportChart:function(){return ng},AverageToCloseByHourChart:function(){return nf},AvgPriceChart:function(){return e7},CountByActiveAccountChart:function(){return nT},CountJobsEngagementRateChart:function(){return nA},CountOpenJobsByDateChart:function(){return nP},CustomerAndSupplierAmounts:function(){return nw},CustomerDebtTable:function(){return nV},DisputeRateChart:function(){return nX},JobSLAByMonth:function(){return ti},JobsByDayLineChart:function(){return n1},JobsByMonth:function(){return n3.m},JobsByService:function(){return n5},JobsByStatusPieChart:function(){return n7.e},JobsFinancialByDayLineChart:function(){return tt},LateAttendanceBySupplierChart:function(){return X},NewCustomerAccountsChart:function(){return ts},NewSupplierAccountsChart:function(){return tv},PercentageOfSpendByServiceLineTable:function(){return ty},PercentageOfWorkOrdersByServiceLineTable:function(){return tT},QuoteAcceptanceRateChart:function(){return tm},ReactiveAmountByMonth:function(){return tA},ReactiveBySLA:function(){return tP},SlaBreachCountChart:function(){return aW},SlaBreachPercentageChart:function(){return aV},SpendByCoverageAreaTable:function(){return tS},SpendFromNewCustomerAccountsChart:function(){return tM},SumQuoteAccepted:function(){return tJ},SumQuoteSent:function(){return tq},SupplierDebtTable:function(){return tE},TopAssetTypesBySpendTable:function(){return t5},TopAssetsByNumberOfJobsTable:function(){return tU},TopAssetsBySpendTable:function(){return t1},TopCustomersByNumberOfPropertiesTable:function(){return t7},TopCustomersByProfitChart:function(){return at},TopPropertiesBySpendTable:function(){return ad},TopSuppliersByNumberOfJobsTable:function(){return ac},TopSuppliersByQuoteReturnTable:function(){return ap},TopSuppliersByTimeToSubmitJobReportTable:function(){return ax},TotalCostOfOwnershipChart:function(){return ab},TotalJobRevenueChart:function(){return aj},TotalQuoteInvoiceSent:function(){return aF},TotalQuoteReportSend:function(){return aS},TotalQuoteSentChart:function(){return aR},WorstCustomersByAgedReceivablesTable:function(){return aO},jobsBySLA:function(){return n4}});var i=t(85893),d=t(11163),o=t.n(d),s=t(19076),l=t(7297),c=t(10367),u=t(9270),m=t(62140),I=t(88826),p=t(54542),v=t(97303),g={lg:[{i:"CustomerDebtTable",x:0,y:0,w:12,h:3,minW:6,maxW:12,minH:1,maxH:3},{i:"ReactiveAmountByMonth",x:0,y:5,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"NewCustomerAccountsChart",x:3,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SpendFromNewCustomerAccountsChart",x:6,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"WorstCustomersByAgedReceivablesTable",x:9,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6}]},$={lg:[{i:"JobsByMonth",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"JobsFinancialByDayLineChart",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},x={lg:[{i:"AverageAllocationTime",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"JobsByService",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"PercentageOfWorkOrdersByServiceLineTable",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},y={lg:[{i:"jobsBySLA",x:0,y:0,w:4,h:3,minW:2,maxW:6,minH:2,maxH:6}]},f={lg:[{i:"JobsByStatusPieChart",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},h={lg:[{i:"SupplierDebtTable",x:0,y:0,w:12,h:3,minW:6,maxW:12,minH:1,maxH:3},{i:"LateAttendanceBySupplierChart",x:0,y:4,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},_={lg:[{i:"TopPropertiesBySpendTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopCustomersByNumberOfPropertiesTable",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},T={lg:[{i:"TopAssetTypesBySpendTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopAssetsBySpendTable",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopAssetsByNumberOfJobsTable",x:0,y:4,w:12,h:3,minW:2,maxW:6,minH:2,maxH:6}]},b={lg:[{i:"SpendByCoverageAreaTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},C={lg:[{i:"TotalQuotesSent",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TotalQuotesReportSent",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TotalQuoteIvoiceSent",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SumQuoteSent",x:0,y:5,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SumQuoteAccepted",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},A=t(47568),j=t(26042),Z=t(69396),P=t(97582),F=t(67294),D=t(45697),w=t(96486),S=t(69968),B=t(78289),L=t(77439),M=t(77349),R=[{label:"Last Day",value:"-1"},{label:"Last 7 Days",value:"-7"},{label:"Last 30 Days",value:"-30",default:!0},{label:"Last 90 Days",value:"-90"},{label:"Custom",value:"custom"}],z=function(e){var n=new Date;return{startDate:(0,M.Z)(n,e.value),endDate:n}},J=function(e){var n=new Date;return{startDate:(0,M.Z)(n,e),endDate:n,intervals:e}},N=t(6388),O=t(75063);function q(){var e=(0,l.Z)(["\n  query GetDashboard_AllocationTime_By_Service(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    allocationByService: getDashboard_AllocationTime_By_Service(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { value: desc }\n    ) {\n      serviceId: id\n      allocationInMinutes: value\n      serviceName: name\n    }\n    meta: getDashboard_AllocationTime_By_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          value\n        }\n      }\n    }\n  }\n"]);return q=function(){return e},e}var H=(0,O.Ps)(q()),k=t(78840),W=t.n(k),Q=t(75708),E=t.n(Q),G=t(55572),V=(0,F.forwardRef)(function(e,n){var a,r,d,o=e.filters,s=e.removeChart,l=(0,N.aM)(H,{variables:{adminId:o.adminId,customerId:o.customerId,endTime:o.endDate,isFixed:o.isFixed,isPlanned:o.isPlanned,locationId:o.locationId,managerId:o.managerId,postCodeAreaId:o.postCodeAreaId,serviceId:o.serviceId,slaId:o.slaId,startTime:o.startDate,supplierId:o.supplierId}}).data,c=void 0===l?{allocationByService:[],meta:{}}:l,u=c.allocationByService,m=c.meta,I=(null===(a=m.aggregate)||void 0===a?void 0:a.avg.allocationInMinutes)/60|0,p=(null===(r=m.aggregate)||void 0===r?void 0:r.avg.allocationInMinutes)%60|0,v=function(e){e.reflow()};return t(18393)(W()),u&&(0,i.jsx)(G.J,{name:"AverageAllocationTime",removeChart:s,title:"Average Allocation Time by Service Line (".concat(I,":").concat(p,")"),children:(0,i.jsx)(E(),{callback:v,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column"},title:{text:null},series:[{data:u.map(function(e){return{name:e.serviceName,y:e.allocationInMinutes}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})});function Y(){var e=(0,l.Z)(["\n  query GetTopLateSuppliers(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    attendanceBySupplier: getDashboard_AttendanceTime_By_Supplier(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { reactive_customer: asc }\n      limit: 10\n    ) {\n      delayedJobs: intval_extra\n      delayedJobsPercent: reactive_customer\n      jobCount: count\n      latencyInMinutes: value\n      supplierName: name\n    }\n    meta: getDashboard_AttendanceTime_By_Supplier_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          latencyInMinutes: value\n        }\n      }\n    }\n  }\n"]);return Y=function(){return e},e}var U=(0,O.Ps)(Y()),X=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(U,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{attendanceBySupplier:[]}:o).attendanceBySupplier,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"LateAttendanceBySupplierChart",removeChart:d,title:"Top 10 Late Suppliers",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column"},xAxis:{type:"category",title:null},yAxis:{stackLabels:{enabled:!0}},plotOptions:{column:{stacking:"normal",pointPadding:0,groupPadding:0,dataLabels:{enabled:!1}}},series:[{data:s.map(function(e){return{name:e.supplierName,y:-Math.round(e.delayedJobs/e.jobCount*100)}}),showInLegend:!1},{data:s.map(function(e){return{name:e.supplierName,y:100-Math.round(e.delayedJobs/e.jobCount*100)}}),showInLegend:!1}]},ref:n})})});function K(){var e=(0,l.Z)(["\n  query GetAverageOutstandingByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageDaysOutstanding: getDashboard_Average_Outstanding_By_Day(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Outstanding_By_Day_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return K=function(){return e},e}var ee=(0,O.Ps)(K()),en=t(74975),et=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(ee,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{averageDaysOutstanding:[]}:o).averageDaysOutstanding,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"AverageDaysOutstandingChart",removeChart:d,title:"Average Days Outstanding",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"Avg",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Days"}}},ref:n})})});function ea(){var e=(0,l.Z)(["\n  query GetAverageJobLength(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobLength: getDashboard_Average_Job_Length(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Job_Length_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return ea=function(){return e},e}var er=(0,O.Ps)(ea()),ei=t(68162),ed=t(41733),eo=t(74721),es=t(36833),el=t(15861),ec=t(5616),eu=t(93946),em=t(44267),eI=t(78445),ep=t(66242),ev=t(51233),eg=t(21023),e$=t(11994),ex={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40%",minHeight:"40%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function ey(e){var n=e.openModal,t=e.setOpenModal,a=e.children,r=e.title,d=function(){return t(!1)};return(0,i.jsx)("div",{children:(0,i.jsx)(e$.Z,{open:n,onClose:d,children:(0,i.jsx)(ec.Z,{sx:ex,children:(0,i.jsxs)(el.Z,{variant:"h6",component:"h2",sx:{fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:600,fontSize:"1rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.87)"},children:[r," Filters",a]})})})})}var ef=t(4972),eh=t(30381),e_=t.n(eh),eT=function(e){var n=e.accountId,t=e.area,a=e.assetCategoryId,r=e.entity,i=e.entityId,d=(e.hasRole,e.id),o=e.locationId,s=e.serviceId,l=e.taxonomyGroupType,c=e.customerId,u=e.customerRole,m=e.type,I=e.userId,p=m;switch(u&&(p="".concat(m,"_").concat(u)),p){case"address":return{query:ef.cz,variables:{entity:r,entityId:i}};case"asset":return{query:ef.UH,variables:{categoryId:a,locationId:o}};case"assetBookable":return{query:ef.UH,variables:{categoryId:a,locationId:o,bookable:"yes"}};case"assetCategory":return{query:ef.nD,variables:{id:d}};case"compliance":return{query:ef.kU,variables:{locationId:o}};case"coverage":return{query:ef.j$};case"customer":return{query:ef.SW};case"job":return{query:ef.Qn,variables:{locationId:o}};case"manager":return{query:ef.he,variables:{accountId:n}};case"product":return{query:ef.UH,variables:{category:"product",locationId:o}};case"property":return{query:ef._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:n}}}}};case"property_user":return{query:ef._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:n},Account:{type:{_eq:"customer"},Account_Users:{role:{_eq:"user"},userId:{_eq:c}}},User_Account_Locations:{Account_User:{userId:{_eq:c},accountId:{_eq:n}}}}}}};case"sensor":return{query:ef.UH,variables:{category:"sensor",locationId:o}};case"service":return{query:ef.kx};case"sla":return{query:ef.t1,variables:{type:"priority",adminId:n}};case"sublocation":return{query:ef.UH,variables:{category:"sublocation",adminId:n,locationId:o}};case"supplier":var v={type:{_eq:"supplier"}};return t&&(v.PostcodeAreas={PostcodeArea:{area:{_eq:t}},entity:{_eq:"Account"},status:{_eq:"active"}}),s&&(v.Services={serviceId:{_eq:s},status:{_eq:"active"}}),{query:ef.by,variables:{where:v}};case"user":return{query:ef.yR,variables:{accountId:n}};case"usersForBookings":return{query:ef.yR,variables:{accountId:I}};case"tenant":return{query:ef.RJ};case"taxonomyGroup":return{query:ef.Cj,variables:{type:l}};case"expenseCategory":return{query:ef.Ve};default:return{query:ef.qd}}},eb=function(e){switch(e){case"supplier":return"Select supplier";case"customer":return"Select customer";case"property":return"Select property";case"service":return"Select service";case"coverage":return"Select postcodes";case"sla":return"SLA";case"user":return"Assigned to";default:return""}},eC=function(e){switch(e){case"-1":return"Today";case"-30":return"Last 30 Days";case"-7":return"Last Week";case"custom":return"Custom";default:return null}},eA=function(e){switch(e){case 0:return"Reactive";case 1:return"PPM";case"All":return"All";default:return null}},ej=function(e){switch(e){case 0:return"Time and materials";case 1:return"Fixed";case"All":return"All";default:return null}},eZ=function(e){switch(e){case"Average Job Revenue":return"The average revenue per completed job.";case"Average Job Length":return"The average time taken to complete a job.";case"Average Time To Accept Job":return"The average time taken for a job to be accepted once it has been offered. ";case"SLA Breach (Count)":return"The number of jobs where a relevant SLA has been.";case"SLA Breach (Percentage)":return"The percentage of jobs where the relevant SLA has been breached.";case"Average Time To Close Job":return"The average time taken to close down a job once completed.";case"Number Of Quotes":return"Number of quotes submitted during time period.";case"Average Quote Value":return"The average value of quotes submitted during time period. ";case"Quote Acceptance Rate":return"The percentage of quotes submitted that are accepted. ";default:return null}};function eP(){var e=(0,l.Z)(["\n  overflow-x: ",";\n"]);return eP=function(){return e},e}function eF(e){var n=e.title,t=e.children,a=e.isTable,r=e.name,d=e.removeChart,o=e.filtersComponent,s=e.activeFiltersComponent,l=e.setOpenModal,c=e.openModal,u=function(){return l(!0)},m=function(e){e.stopPropagation(),d(e,r)},I=eZ(n);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ey,{title:n,openModal:c,setOpenModal:l,children:o}),(0,i.jsxs)(ep.Z,{sx:{minWidth:300,border:"1px solid rgba(211,211,211,0.6)",height:"100%"},children:[(0,i.jsx)(eI.Z,{title:(0,i.jsxs)(ev.Z,{direction:"row",children:[(0,i.jsx)(el.Z,{sx:{fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:500,fontSize:"1rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.87)"},children:n}),(0,i.jsx)(eg.Z,{placement:"right-start",title:I,children:(0,i.jsx)(eo.Z,{fontSize:"medium",sx:{color:"#2196F3",ml:"0.1rem",position:"relative"}})})]}),action:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eu.Z,{onClick:u,size:"small",sx:{mr:"20px"},children:(0,i.jsx)(ei.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})}),(0,i.jsx)(eu.Z,{onClick:m,size:"small",sx:{mr:"20px"},children:(0,i.jsx)(ed.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})}),(0,i.jsx)(eu.Z,{className:"dragHandle",onClick:function(e){return e.stopPropagation()},size:"small",sx:{mr:"20px"},children:(0,i.jsx)(es.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})})]})}),(0,i.jsxs)("div",{style:{backgroundColor:"white"},children:[(0,i.jsx)(em.Z,{sx:{borderBottom:"1px solid #E4E7EB"},children:(0,i.jsx)(eD,{overflow:a,children:t})}),(0,i.jsx)(ec.Z,{children:s})]})]})]})}var eD=(0,c.ZP)(ec.Z).withConfig({displayName:"chartWrapper__StyledChildren",componentId:"sc-d4a21471-0"})(eP(),function(e){return e.overflow?"hidden":"unset"}),ew=t(2845),eS=t(42283),eB=t(11057),eL=t(99534),eM=t(66252),eR=t(50135),ez=t(23776),eJ=t(52019),eN=function(e,n){var t,a,r,i=!0;return(null===(t=e.errors[e.name])||void 0===t?void 0:t.message)!==(null===(a=n.errors[n.name])||void 0===a?void 0:a.message)&&(i=!1),["accountId","assetCategoryId","entity","entityId","locationId","serviceId","type","value","customerId","customerRole"].forEach(function(t){e[t]!==n[t]&&(i=!1)}),i},eO=(0,F.memo)(function(e){e.AddForm;var n=e.accountId,t=e.area,a=e.assetCategoryId,r=e.entity,d=e.entityId,o=(e.errors,e.id),s=(e.isClearable,e.isDisabled,e.label,e.locationId),l=e.name,c=e.serviceId,u=e.taxonomyGroupType,m=e.customerId,I=e.customerRole,p=e.type,v=e.userId,g=(e.onChange,e.control),$=e.filters;(0,eL.Z)(e,["AddForm","accountId","area","assetCategoryId","entity","entityId","errors","id","isClearable","isDisabled","label","locationId","name","serviceId","taxonomyGroupType","customerId","customerRole","type","userId","onChange","control","filters"]);var x,y=(0,eM.x)(),f=(0,F.useState)(!1),h=f[0],_=f[1],T=(0,F.useState)([]),b=T[0],C=T[1],D=(0,F.useState)(!1),w=D[0],S=D[1],B=(0,F.useContext)(eJ.Z).hasRole,L=(0,F.useState)(!1)[1];(0,F.useEffect)(function(){return L(!1),S(!1),function(){}},[n,a,r,d,s,c,p,m,I,v]);var M=(x=(0,A.Z)(function(){var e,i,l,g,$,x,f;return(0,P.__generator)(this,function($){switch($.label){case 0:if(w)return L(!0),[2,null];return _(!0),i=(e=eT({accountId:n,area:t,assetCategoryId:a,entity:r,entityId:d,hasRole:B,id:o,locationId:s,serviceId:c,taxonomyGroupType:u,customerId:m,customerRole:I,type:p,userId:v})).query,g=void 0===(l=e.variables)?{}:l,[4,y.query({query:i,variables:(0,j.Z)({},g)})];case 1:return C((void 0===(x=$.sent().data)?{items:[]}:x).items),_(!1),S(!0),L(!0),[2]}})}),function(){return x.apply(this,arguments)});return(0,i.jsx)(eS.Qr,{render:function(e){return(0,i.jsx)(ez.Z,(0,Z.Z)((0,j.Z)({},e),{options:b,value:$[l],getOptionLabel:function(e){return e.label},sx:{width:"45%",mb:2,"& .MuiInputLabel-root":{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"}},onOpen:M,loading:h,renderInput:function(e){return(0,i.jsx)(eR.Z,(0,Z.Z)((0,j.Z)({},e),{label:eb(p),variant:"standard",inputProps:(0,Z.Z)((0,j.Z)({},e.inputProps),{style:{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.07875px",color:"rgba(0, 0, 0, 0.54)"}})}))},onChange:function(n,t){e.onChange(t)}}))},name:l,control:g})},eN);eO.propTypes={AddForm:D.object,area:D.string,accountId:D.number,assetCategoryId:D.number,control:D.object.isRequired,errors:D.object.isRequired,entity:D.string,entityId:D.number,id:D.number,isClearable:D.bool,label:D.string.isRequired,locationId:D.number,name:D.string.isRequired,serviceId:D.number,taxonomyGroupType:(0,D.oneOf)(["expenseCategory","costCategory","jobTags"]),type:D.string},eO.defaultProps={isClearable:!0,label:"Account",name:"account",type:"account"};var eq=t(21300),eH=t(94054),ek=t(18972),eW=t(18360),eQ=t(47312),eE=function(e){var n=e.name,t=e.label,a=e.control,r=e.defaultValue,d=(e.children,e.options),o=e.variant,s=(0,eL.Z)(e,["name","label","control","defaultValue","children","options","variant"]);return(0,i.jsxs)(eH.Z,{sx:{width:t?"45%":"100%"},fullWidth:!0,children:[t&&(0,i.jsx)(eQ.Z,{sx:{"&.MuiInputLabel-root	":{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.07875px",color:"rgba(0, 0, 0, 0.54)"},"&.MuiInputLabel-formControl":{left:"-13px",top:"5px"}},htmlFor:"select",children:t}),(0,i.jsx)(eS.Qr,{as:(0,i.jsx)(eW.Z,(0,Z.Z)((0,j.Z)({id:"select"},s),{variant:o,sx:{mt:2,lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"},children:d.map(function(e){return(0,i.jsx)(ek.Z,{value:e.value,sx:{fontFamily:"Nunito-Regular",fontStyle:"normal",fontWeight:400,fontSize:"0.875rem",lineHeight:"24px",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"},children:e.label},e.value)})})),name:n,control:a,defaultValue:r})]})},eG=[{label:"All",value:"All"},{label:"PPM",value:1},{label:"Reactive",value:0}],eV=[{label:"All",value:"All"},{label:"Fixed",value:1},{label:"Time and material",value:0}],eY=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId,isPlanned:e.isPlanned,isFixed:e.isFixed});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"slaId",type:"sla",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"managerId",type:"user",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eE,{control:o,name:"isPlanned",options:eG,variant:"standard",label:"Schedule"}),(0,i.jsx)(eE,{control:o,name:"isFixed",options:eV,variant:"standard",label:"Price"})]}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},eU=t(86886),eX=function(e){var n,t=Object.keys(n=e.filters).map(function(e){var t,a,r,i,d,o;switch(e){case"managerId":return{label:"Assigned to",value:(null===(t=n[e])||void 0===t?void 0:t.label)||null};case"customerId":return{label:"Customer",value:(null===(a=n[e])||void 0===a?void 0:a.label)||null};case"isFixed":return{label:"Price",value:ej(n[e])};case"isPlanned":return{label:"Schedule",value:eA(n[e])};case"locationId":return{label:"Location",value:(null===(r=n[e])||void 0===r?void 0:r.label)||null};case"serviceId":return{label:"Service",value:(null===(i=n[e])||void 0===i?void 0:i.label)||null};case"slaId":return{label:"SLA",value:(null===(d=n[e])||void 0===d?void 0:d.label)||null};case"supplierId":return{label:"Supplier",value:(null===(o=n[e])||void 0===o?void 0:o.label)||null};case"intervals":return{label:"Time Slot",value:eC(n[e])};case"endDate":return{label:"End Date",value:e_()(n[e]).format("DD MMM YYYY")};case"startDate":return{label:"Start Date",value:e_()(n[e]).format("DD MMM YYYY")};default:return null}});return(0,i.jsx)(ec.Z,{sx:{flexGrow:2,ml:6,mr:6,mb:4,mt:1},children:(0,i.jsx)(eU.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},children:t.map(function(e){return e&&e.value&&(0,i.jsx)(eK,{label:e.label,value:e.value},e.label)})})})},eK=function(e){var n=e.label,t=e.value;return(0,i.jsxs)(eU.ZP,{item:!0,xs:3,children:[(0,i.jsx)(ev.Z,{direction:"row",children:(0,i.jsxs)(el.Z,{sx:{fontFamily:"Nunito-Regular",fontSize:"0.625rem",fontStyle:"normal",fontWeight:400,lineHeight:"21px",color:"rgba(0, 0, 0, 0.87)",letterSpacing:"0.07875px",mr:"5px"},children:[n," :"]})}),(0,i.jsx)(ev.Z,{children:(0,i.jsx)(el.Z,{sx:{fontFamily:"Nunito-Regular",fontSize:"0.75rem",fontStyle:"normal",fontWeight:400,lineHeight:"21px",color:"#2196F3",letterSpacing:"0.07875px"},children:t})})]})},e0=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u,m,I=e.removeChart,p=(0,ew.x)().user,v=R.find(function(e){return e.default}),g=(0,j.Z)({},J(v.value),(u=(c={accountId:p.accountId,accountType:p.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null,isPlanned:null,isFixed:null}).accountId,"admin"===c.accountType?{adminId:u}:{accountId:u})),$=(0,F.useState)(g),x=$[0],y=$[1],f=(0,F.useState)(!1),h=f[0],_=f[1],T=(0,N.aM)(er,{onCompleted:function(){_(!1)},variables:{adminId:x.adminId,customerId:null===(a=x.customerId)||void 0===a?void 0:a.value,endTime:x.endDate,startTime:x.startDate,isFixed:x.isFixed,isPlanned:x.isPlanned,locationId:null===(r=x.locationId)||void 0===r?void 0:r.value,managerId:null===(d=x.managerId)||void 0===d?void 0:d.value,serviceId:null===(o=x.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=x.slaId)||void 0===s?void 0:s.value,supplierId:null===(l=x.supplierId)||void 0===l?void 0:l.value}}).data,b=(void 0===T?{averageJobLength:[]}:T).averageJobLength,C=function(e){e.reflow()};return t(18393)(W()),b&&(0,i.jsx)(eF,{name:"AverageJobLengthChart",removeChart:I,title:"Average Job Length",openModal:h,setOpenModal:_,filtersComponent:(0,i.jsx)(eY,{filters:x,initialFilters:g,setFilters:y}),activeFiltersComponent:(0,i.jsx)(eX,{filters:x}),children:(0,i.jsx)(E(),{callback:C,constructorType:"chart",Highcharts:W(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"AVG, hours",data:b.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}},ref:n})})});function e1(){var e=(0,l.Z)(["\n  query GetJobsFinancialByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobRevenue: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      jobDate: date_val1_extra\n      jobRevenue: ppm_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: ppm_revenue\n        }\n      }\n    }\n  }\n"]);return e1=function(){return e},e}var e3=(0,O.Ps)(e1()),e2=[{label:"All",value:"All"},{label:"PPM",value:1},{label:"Reactive",value:0}],e9=[{label:"All",value:"All"},{label:"Fixed",value:1},{label:"Time and material",value:0}],e5=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId,isPlanned:e.isPlanned,isFixed:e.isFixed});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"slaId",type:"sla",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"managerId",type:"user",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eE,{control:o,name:"isPlanned",options:e2,variant:"standard",label:"Schedule"}),(0,i.jsx)(eE,{control:o,name:"isFixed",options:e9,variant:"standard",label:"Price"})]}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",children:"Apply"})]})]})})})},e6=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u,m,I,p=e.removeChart,v=(0,ew.x)().user,g=R.find(function(e){return e.default}),$=(0,j.Z)({},J(g.value),(m=(u={accountId:v.accountId,accountType:v.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null,isPlanned:null,isFixed:null}).accountId,"admin"===u.accountType?{adminId:m}:{accountId:m})),x=(0,F.useState)($),y=x[0],f=x[1],h=(0,F.useState)(!1),_=h[0],T=h[1],b=(0,N.aM)(e3,{onCompleted:function(){T(!1)},variables:{adminId:y.adminId,startTime:y.startDate,endTime:y.endDate,customerId:null===(a=y.customerId)||void 0===a?void 0:a.value,locationId:null===(r=y.locationId)||void 0===r?void 0:r.value,managerId:null===(d=y.managerId)||void 0===d?void 0:d.value,postCodeAreaId:null===(o=y.postCodeAreaId)||void 0===o?void 0:o.value,serviceId:null===(s=y.serviceId)||void 0===s?void 0:s.value,slaId:null===(l=y.slaId)||void 0===l?void 0:l.value,supplierId:null===(c=y.supplierId)||void 0===c?void 0:c.value,isFixed:"All"===y.isFixed?null:y.isFixed,isPlanned:"All"===y.isPlanned?null:y.isPlanned}}).data,C=(void 0===b?{averageJobRevenue:[]}:b).averageJobRevenue,A=function(e){e.reflow()};return t(18393)(W()),C&&(0,i.jsx)(eF,{name:"AverageJobRevenueChart",removeChart:p,title:"Average Job Revenue",openModal:_,setOpenModal:T,filtersComponent:(0,i.jsx)(e5,{filters:y,initialFilters:$,setFilters:f}),activeFiltersComponent:(0,i.jsx)(eX,{filters:y}),tooltip:"",children:(0,i.jsx)(E(),{callback:A,constructorType:"chart",Highcharts:W(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Revenue, \xa3",data:C.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.jobRevenue}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}},ref:n})})});function e8(){var e=(0,l.Z)(["\n  query GetAvgPriceByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    priceByMonth: getDashboard_AvgPrice_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: asc }\n    ) {\n      month: strval_extra\n      avg: value\n    }\n    meta: getDashboard_AvgPrice_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return e8=function(){return e},e}var e4=(0,O.Ps)(e8()),e7=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(e4,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{priceByMonth:[]}:o).priceByMonth,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"AvgPriceChart",removeChart:d,title:"Average Job Price By Month ",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"Ave",data:s.map(function(e){return{name:e_()(e.month,"YYYY-M").format("MMM YYYY"),y:e.avg||0}}),showInLegend:!1}]},ref:n})})});function ne(){var e=(0,l.Z)(["\n  query GetAverageProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageProfit: getDashboard_Customer_Profit(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: ppm_customer\n    }\n    meta: getDashboard_Customer_Profit_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return ne=function(){return e},e}var nn=(0,O.Ps)(ne()),nt=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(nn,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{averageProfit:[]}:o).averageProfit,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"AverageProfitChart",removeChart:d,title:"Average Profit Margin",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"average margin profit",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}},ref:n})})});function na(){var e=(0,l.Z)(["\n  query GetAverageQuoteValue(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageQuoteValue: getDashboard_Average_Quote(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      amount: reactive_customer\n      date: date_val1_extra\n    }\n    meta: getDashboard_Average_Quote_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: ppm_revenue\n        }\n      }\n    }\n  }\n"]);return na=function(){return e},e}var nr=(0,O.Ps)(na()),ni=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"slaId",type:"sla",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"managerId",type:"user",control:o}))]}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",children:"Apply"})]})]})})})},nd=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u=e.removeChart,m=(0,ew.x)().user,I=R.find(function(e){return e.default}),p=(0,j.Z)({},J(I.value),(l=(s={accountId:m.accountId,accountType:m.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===s.accountType?{adminId:l}:{accountId:l})),v=(0,F.useState)(p),g=v[0],$=v[1],x=(0,F.useState)(!1),y=x[0],f=x[1],h=(0,N.aM)(nr,{onCompleted:function(){f(!1)},variables:{adminId:g.adminId,customerId:null===(a=g.customerId)||void 0===a?void 0:a.value,endTime:g.endDate,locationId:null===(r=g.locationId)||void 0===r?void 0:r.value,managerId:null===(d=g.managerId)||void 0===d?void 0:d.value,serviceId:null===(o=g.serviceId)||void 0===o?void 0:o.value,slaId:g.slaId,startTime:g.startDate,supplierId:g.supplierId}}).data,_=(void 0===h?{averageQuoteValue:[]}:h).averageQuoteValue,T=function(e){e.reflow()};return t(18393)(W()),_&&(0,i.jsx)(eF,{name:"AverageQuoteValueChart",removeChart:u,title:"Average Quote Value",openModal:y,setOpenModal:f,filtersComponent:(0,i.jsx)(ni,{filters:g,initialFilters:p,setFilters:$}),activeFiltersComponent:(0,i.jsx)(eX,{filters:g}),children:(0,i.jsx)(E(),{callback:T,constructorType:"chart",Highcharts:W(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"AVG, \xa3",data:_.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.amount}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}},ref:n})})});function no(){var e=(0,l.Z)(["\n  query GetAverageTimeToAcceptByMinute(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToAcceptByMinute: getDashboard_Average_Time_To_Accept_By_minute(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Time_To_Accept_By_minute_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return no=function(){return e},e}var ns=(0,O.Ps)(no()),nl=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsx)(ev.Z,{direction:"row",justifyContent:"space-between",children:(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"slaId",type:"sla",control:o}))}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},nc=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u,m=e.removeChart,I=(0,ew.x)().user,p=R.find(function(e){return e.default}),v=(0,j.Z)({},J(p.value),(c=(l={accountId:I.accountId,accountType:I.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null}).accountId,"admin"===l.accountType?{adminId:c}:{accountId:c})),g=(0,F.useState)(v),$=g[0],x=g[1],y=(0,F.useState)(!1),f=y[0],h=y[1],_=(0,N.aM)(ns,{onCompleted:function(){h(!1)},variables:{adminId:$.adminId,endTime:$.endDate,startTime:$.startDate,customerId:null===(a=$.customerId)||void 0===a?void 0:a.value,locationId:null===(r=$.locationId)||void 0===r?void 0:r.value,serviceId:null===(d=$.serviceId)||void 0===d?void 0:d.value,slaId:null===(o=$.slaId)||void 0===o?void 0:o.value,supplierId:null===(s=$.supplierId)||void 0===s?void 0:s.value}}).data,T=(void 0===_?{averageTimeToAcceptByMinute:[]}:_).averageTimeToAcceptByMinute,b=function(e){e.reflow()};return t(18393)(W()),T&&(0,i.jsx)(eF,{name:"AverageTimeToAcceptByMinuteChart",removeChart:m,title:"Average Time To Accept Job",openModal:f,setOpenModal:h,filtersComponent:(0,i.jsx)(nl,{filters:$,initialFilters:v,setFilters:x,defaultInterval:p}),activeFiltersComponent:(0,i.jsx)(eX,{filters:$}),children:(0,i.jsx)(E(),{callback:b,constructorType:"chart",Highcharts:W(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Avg, minutes",data:T.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Minutes"}}},ref:n})})});function nu(){var e=(0,l.Z)(["\n  query GetAverageTimeToAttendance(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToAttendance: getDashboard_Average_Time_To_Attendance(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Time_To_Attendance_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return nu=function(){return e},e}var nm=(0,O.Ps)(nu()),nI=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(nm,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{averageTimeToAttendance:[]}:o).averageTimeToAttendance,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"AverageTimeToAttendanceChart",removeChart:d,title:"Average Time To Attendance",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"Attendance",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}},ref:n})})});function np(){var e=(0,l.Z)(["\n  query GetAverageTimeToSubmitJobReport(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToSubmitJobReport: getDashboard_Average_Time_To_Compelete_By_Hour(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: value\n      date: date_val1_extra\n    }\n    meta: getDashboard_Average_Time_To_Compelete_By_Hour_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return np=function(){return e},e}var nv=(0,O.Ps)(np()),ng=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(nv,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{averageTimeToSubmitJobReport:[]}:o).averageTimeToSubmitJobReport,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"AverageTimeToSubmitJobReportChart",removeChart:d,title:"Average Time To Submit Job",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}}),name:"Avg",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}},ref:n})})});function n$(){var e=(0,l.Z)(["\n  query GetAverageToCloseByHour(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageToCloseByHour: getDashboard_Average_To_Close_By_Hour(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_To_Close_By_Hour_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return n$=function(){return e},e}var nx=(0,O.Ps)(n$()),ny=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"slaId",type:"sla",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"managerId",type:"user",control:o}))]}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},nf=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u=e.removeChart,m=(0,ew.x)().user,I=R.find(function(e){return e.default}),p=(0,j.Z)({},J(I.value),(l=(s={accountId:m.accountId,accountType:m.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===s.accountType?{adminId:l}:{accountId:l})),v=(0,F.useState)(p),g=v[0],$=v[1],x=(0,F.useState)(!1),y=x[0],f=x[1],h=(0,N.aM)(nx,{onCompleted:function(){f(!1)},variables:{adminId:g.adminId,customerId:null===(a=g.customerId)||void 0===a?void 0:a.value,endTime:g.endDate,locationId:null===(r=g.locationId)||void 0===r?void 0:r.value,managerId:null===(d=g.managerId)||void 0===d?void 0:d.value,serviceId:null===(o=g.serviceId)||void 0===o?void 0:o.value,slaId:g.slaId,startTime:g.startDate,supplierId:g.supplierId}}).data,_=(void 0===h?{averageToCloseByHour:[]}:h).averageToCloseByHour,T=function(e){e.reflow()};return t(18393)(W()),_&&(0,i.jsx)(eF,{name:"AverageToCloseByHourChart",removeChart:u,title:"Average Time To Close Job",openModal:y,setOpenModal:f,filtersComponent:(0,i.jsx)(ny,{filters:g,initialFilters:p,setFilters:$}),activeFiltersComponent:(0,i.jsx)(eX,{filters:g}),children:(0,i.jsx)(E(),{callback:T,constructorType:"chart",Highcharts:W(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{data:_.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),name:"AVG, days",showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Days"}}},ref:n})})});function nh(){var e=(0,l.Z)(["\n  query GetCountByActiveAccount(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    countByActiveAccount: getDashboard_Count_By_Active_Account(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_By_Active_Account_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return nh=function(){return e},e}var n_=(0,O.Ps)(nh()),nT=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(n_,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{countByActiveAccount:[]}:o).countByActiveAccount,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"CountByActiveAccountChart",removeChart:d,title:"Count By Active Account",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}}),name:"Active account",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})});function nb(){var e=(0,l.Z)(["\n  query GetCountJobsEngagementRate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    CountJobsEngagementRate: getDashboard_Count_Jobs_Engagement_Rate(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_Jobs_Engagement_Rate_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return nb=function(){return e},e}var nC=(0,O.Ps)(nb()),nA=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(nC,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{CountJobsEngagementRate:[]}:o).CountJobsEngagementRate,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"CountJobsEngagementRateChart",removeChart:d,title:"Engagement Rate",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}}),name:"Count",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})});function nj(){var e=(0,l.Z)(["\n  query GetCountOpenJobByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    countOpenJobsByDate: getDashboard_Count_Open_Jobs_By_Date(\n      order_by: { date_val1_extra: desc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_Open_Jobs_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count: count\n      }\n    }\n  }\n"]);return nj=function(){return e},e}var nZ=(0,O.Ps)(nj()),nP=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(nZ,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{countOpenJobsByDate:[]}:o).countOpenJobsByDate,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"CountOpenJobsByDateChart",removeChart:d,title:"Number Of Open Jobs",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{type:"line",name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}}),name:"Count",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})});function nF(){var e=(0,l.Z)(["\n  query getDashboard_Financial_By_Month(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    financebymonth: getDashboard_Financial_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      month: name\n      ppm_supplier\n      ppm_revenue\n      ppm_customer\n      reactive_customer\n      reactive_revenue\n      reactive_supplier\n    }\n  }\n"]);return nF=function(){return e},e}var nD=(0,O.Ps)(nF()),nw=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(nD,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{financebymonth:[]}:o).financebymonth,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"CustomerAndSupplierAmounts",removeChart:d,title:"Customer \\ Supplier Amounts By Month",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{title:{text:null},xAxis:{type:"category"},yAxis:{title:{text:"Amounts(\xa3)"}},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal}},plotOptions:{column:{stacking:"normal"}},series:[{type:"column",name:"Customer Amount",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_customer,stack:"customer"}}),showInLegend:!1},{type:"column",name:"Customer Amount",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_customer,stack:"customer"}}),showInLegend:!1},{type:"column",name:"PPM Supplier Amount",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_supplier,stack:"supplier"}}),showInLegend:!1},{type:"column",name:"Supplier Amount",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_supplier,stack:"supplier"}}),showInLegend:!1},{type:"spline",marker:{radius:4,lineWidth:1,symbol:"square"},name:"Revenue Amount",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_revenue}}),showInLegend:!1},{type:"spline",marker:{radius:4,lineWidth:1,symbol:"diamond"},name:"Revenue Amount",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_revenue}}),showInLegend:!1}]},ref:n})})}),nS=t(14924),nB=t(828),nL=t(73359);function nM(){var e=(0,l.Z)(["\n  query CustomerDebt(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_finance_debt_order_by!]\n    $outstanding_levels: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    customers: getDashboard_Financial_Debt_By_Customer(\n      limit: $limit\n      offset: $offset\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: $orderBy\n    ) {\n      customer: Account {\n        id\n        name\n      }\n      total_invoice_count\n      total_invoice_amount\n      outstanding_invoice_count\n      outstanding_invoice_amount\n      outstanding_0_30\n      outstanding_31_60\n      outstanding_61_90\n      outstanding_91_x\n    }\n    meta: getDashboard_Financial_Debt_By_Customer_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          total_invoice_count\n          total_invoice_amount\n          outstanding_invoice_count\n          outstanding_invoice_amount\n          outstanding_0_30\n          outstanding_31_60\n          outstanding_61_90\n          outstanding_91_x\n        }\n        totalCount: count\n      }\n    }\n  }\n"]);return nM=function(){return e},e}var nR=(0,O.Ps)(nM()),nz=t(57460),nJ=t.n(nz),nN=t(46003),nO=t(26186),nq=t(11082),nH=t(16551),nk=t(91272),nW=t(20705),nQ=function(e,n,t){return e&&n?"".concat(t?(0,nq.Z)(e):e||0," (").concat(Math.round(e/n*100),"%)"):"".concat(t?(0,nq.Z)(e):e||0)},nE=t(9492),nG={item:"outstanding_invoice_amount",order:"desc"},nV=(0,F.forwardRef)(function(e,n){var t,a,r,d=e.filters,o=e.removeChart,s=(0,nW.x)({filters:d,initialSort:nG}),l=s.initialData,c=s.ref,I=(0,F.useState)(),p=I[0],g=I[1],$=(0,N.aM)(nR,{variables:(0,Z.Z)((0,j.Z)({},l),{outstanding_levels:p})}),x=$.data,y=void 0===x?{customers:[],meta:{aggregate:{}}}:x,f=y.customers,h=y.meta,_=$.loading,T=$.refetch,b=(0,nB.Z)((0,nL.t)(nR,{variables:{limit:nN.C1.paginationSize,offset:((null===(t=c.current)||void 0===t?void 0:t.currentPage)-1||0)*nN.C1.paginationSize,orderBy:(0,nS.Z)({},null===(a=c.current)||void 0===a?void 0:a.sort.item,null===(r=c.current)||void 0===r?void 0:r.sort.order),outstanding_levels:p},onCompleted:function(e){var n,t=nJ().unparse((n=e.customers).map(function(e){return{name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:nQ(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:nQ(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:nQ(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:nQ(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:nQ(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,nq.Z)(e.total_invoice_amount),outstanding_invoice_amount:nQ(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}})),a="data:application/octet-stream,"+encodeURIComponent(t);(0,nE.S)(a,"customer-debt.csv")}}),1)[0],C=function(e){var n=e.accountId,t=e.level,a=e.number,r="/dashboard/customers/view?id=".concat(n),o="&endDate=".concat((0,nO.Z)(d.endDate)),s="&startDate=".concat((0,nO.Z)(d.startDate));return(0,i.jsx)(v.Z,{to:"".concat(r,"&tab=finance&outstandingLevel=").concat(t).concat(s).concat(o),children:a})},A=function(e){g(e)};return(0,i.jsxs)(G.J,{isTable:!0,name:"CustomerDebtTable",removeChart:o,title:"Customer Debt",children:[(0,i.jsx)(u.Z,{children:(0,i.jsx)(m.Z,{md:1,children:(0,i.jsx)(L.Z,{content:"Export to CSV",context:"secondary",onClick:b,title:"Export to CSV",size:"sm"})})}),h.aggregate.sum&&(0,i.jsxs)(nH.Z,{align:"flex-end",children:[(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Invoice Count: ",(0,i.jsx)("b",{children:h.aggregate.sum.total_invoice_count})]}),context:"secondary",onClick:function(e){return A(null)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding Invoices:",(0,i.jsx)("b",{children:nQ(h.aggregate.sum.outstanding_invoice_count,h.aggregate.sum.total_invoice_count)})]}),context:"secondary",outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding 1-30:",(0,i.jsx)("b",{children:nQ(h.aggregate.sum.outstanding_0_30,h.aggregate.sum.outstanding_invoice_count)})]}),context:1===p?"success":"secondary",onClick:function(e){return A(1)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding 31-60:",(0,i.jsx)("b",{children:nQ(h.aggregate.sum.outstanding_31_60,h.aggregate.sum.outstanding_invoice_count)})]}),context:31===p?"success":"secondary",onClick:function(e){return A(31)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding 61-90:",(0,i.jsx)("b",{children:nQ(h.aggregate.sum.outstanding_61_90,h.aggregate.sum.outstanding_invoice_count)})]}),context:61===p?"success":"secondary",onClick:function(e){return A(61)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding > 90:",(0,i.jsx)("b",{children:nQ(h.aggregate.sum.outstanding_91_x,h.aggregate.sum.outstanding_invoice_count)})]}),context:91===p?"success":"secondary",onClick:function(e){return A(91)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Total Invoice Amount: ",(0,i.jsx)("b",{children:(0,nq.Z)(h.aggregate.sum.total_invoice_amount)})]}),context:"secondary",outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding Amount:",(0,i.jsx)("b",{children:nQ(h.aggregate.sum.outstanding_invoice_amount,h.aggregate.sum.total_invoice_amount,!0)})]}),context:"secondary",outline:!0,size:"sm"})]}),(0,i.jsx)(nk.t,{columns:[{hidden:!0},{formatter:function(e){var n;return n=e.row,(0,i.jsx)(v.Z,{to:"/dashboard/customers/view?id=".concat(n.accountId,"&tab=finance"),children:n.name})},text:"Customer"},{sortable:!0,sortName:"total_invoice_count",text:"Invoice Count"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:0,number:n.outstanding_invoice_count})},sortable:!0,sortName:"outstanding_invoice_count",text:"Outstanding Invoices"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:1,number:n.outstanding_0_30})},sortable:!0,sortName:"outstanding_0_30",text:"Outstanding 1-30"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:31,number:n.outstanding_31_60})},sortable:!0,sortName:"outstanding_31_60",text:"Outstanding 31-60"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:61,number:n.outstanding_61_90})},sortable:!0,sortName:"outstanding_61_90",text:"Outstanding 61-90"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:91,number:n.outstanding_91_x})},sortable:!0,sortName:"outstanding_91_x",text:"Outstanding > 90"},{sortable:!0,sortName:"total_invoice_amount",text:"Total Invoice Amount"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:0,number:n.outstanding_invoice_amount})},sortable:!0,sortName:"outstanding_invoice_amount",text:"Outstanding Amount"}],history:!1,initialSort:nG,loading:_,meta:h,ref:c,refetch:T,rows:f.map(function(e){return{accountId:e.customer.id,name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:nQ(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:nQ(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:nQ(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:nQ(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:nQ(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,nq.Z)(e.total_invoice_amount),outstanding_invoice_amount:nQ(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}})})]})});function nY(){var e=(0,l.Z)(["\n  query GetDisputeRateByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    disputeByMonth: getDashboard_DisputeRate_By_Month(\n      order_by: { strval_extra: asc, count: desc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      month: strval_extra\n      disputeRate: count\n    }\n    meta: getDashboard_DisputeRate_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          disputeRate: count\n        }\n      }\n    }\n  }\n"]);return nY=function(){return e},e}nV.propTypes={filters:D.object};var nU=(0,O.Ps)(nY()),nX=(0,F.forwardRef)(function(e,n){var a,r,d=e.filters,o=e.removeChart,s=(0,N.aM)(nU,{variables:{adminId:d.adminId,customerId:d.customerId,endTime:d.endDate,isFixed:d.isFixed,isPlanned:d.isPlanned,locationId:d.locationId,managerId:d.managerId,postCodeAreaId:d.postCodeAreaId,serviceId:d.serviceId,slaId:d.slaId,startTime:d.startDate,supplierId:d.supplierId}}).data,l=void 0===s?{disputeByMonth:[],meta:{}}:s,c=l.disputeByMonth,u=l.meta,m=function(e){e.reflow()};return t(18393)(W()),c&&(0,i.jsx)(G.J,{name:"DisputeRateChart",removeChart:o,title:"Average Dispute Rate By Month (".concat(Number(null===(a=u.aggregate)||void 0===a?void 0:a.avg.disputeRate).toFixed(2),")"),children:(0,i.jsx)(E(),{callback:m,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column"},title:{text:null},series:[{data:c.map(function(e){return{name:e_()(e.month,"YYYY-M").format("MMM YYYY"),y:e.disputeRate||0}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})});function nK(){var e=(0,l.Z)(["\n  query GetJobsByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByDay: getDashboard_Count_By_Date(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n    meta: getDashboard_Count_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return nK=function(){return e},e}var n0=(0,O.Ps)(nK()),n1=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=(0,N.aM)(n0,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,o=(void 0===d?{jobsByDay:[]}:d).jobsByDay,s=function(e){e.reflow()};return t(18393)(W()),o&&(0,i.jsx)(G.J,{title:"Total bookings by Day",children:(0,i.jsx)(E(),{callback:s,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:o.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}}),showInLegend:!1}]},ref:n})})}),n3=t(93829);function n2(){var e=(0,l.Z)(["\n  query GetJobsByService(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByService: getDashboard_Service(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { count: desc }\n    ) {\n      servicename: name\n      count: count\n      serviceid: id\n    }\n    meta: getDashboard_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"]);return n2=function(){return e},e}var n9=(0,O.Ps)(n2()),n5=(0,F.forwardRef)(function(e,n){var a,r,d=e.filters,o=e.removeChart,s=(0,N.aM)(n9,{variables:{adminId:d.adminId,customerId:d.customerId,endTime:d.endDate,isFixed:d.isFixed,isPlanned:d.isPlanned,locationId:d.locationId,managerId:d.managerId,postCodeAreaId:d.postCodeAreaId,serviceId:d.serviceId,slaId:d.slaId,startTime:d.startDate,supplierId:d.supplierId}}).data,l=void 0===s?{meta:{},jobsByService:[]}:s,c=l.meta,u=l.jobsByService,m=function(e){e.reflow()};return t(18393)(W()),(0,i.jsx)(G.J,{name:"JobsByService",removeChart:o,title:"Total bookings by Service (".concat(null===(a=c.aggregate)||void 0===a?void 0:a.sum.count,")"),children:(0,i.jsx)(E(),{callback:m,constructorType:"chart",Highcharts:W(),options:{chart:{type:"pie"},title:{text:null},series:[{data:u.map(function(e){return{name:e.servicename,y:e.count}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})});function n6(){var e=(0,l.Z)(["\n  query GetDashboard_SlA(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsla: getDashboard_SLA(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      count\n      sla_name: name\n    }\n  }\n"]);return n6=function(){return e},e}var n8=(0,O.Ps)(n6()),n4=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(n8,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{jobsla:[]}:o).jobsla,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"jobsBySLA",removeChart:d,title:"Bookings By SLAs",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1},title:{text:"SLAs",align:"center",verticalAlign:"middle",y:60},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-50,style:{fontWeight:"bold",color:"white"}},startAngle:-90,endAngle:90,center:["50%","75%"],size:"110%"}},series:[{type:"pie",name:"SLA",innerSize:"50%",data:s.map(function(e){return{name:e.sla_name,y:e.count}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})}),n7=t(50956);function te(){var e=(0,l.Z)(["\n  query GetJobsFinancialByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsFinancialByDay: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      customerAmount: reactive_customer\n      supplierAmount: reactive_supplier\n      jobDate: date_val1_extra\n      jobRevenue: reactive_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: reactive_revenue\n        }\n      }\n    }\n  }\n"]);return te=function(){return e},e}var tn=(0,O.Ps)(te()),tt=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(tn,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{jobsFinancialByDay:[]}:o).jobsFinancialByDay,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"JobsFinancialByDayLineChart",removeChart:d,title:"Total Revenue by Day",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{type:"column",name:"Job Amount",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.customerAmount}}),showInLegend:!1},{type:"column",name:"Revenu",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.jobRevenue}}),showInLegend:!1}]},ref:n})})});function ta(){var e=(0,l.Z)(["\n  query GetSLAJobsByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobSLAByMonth: getDashboard_SLA_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: desc }\n    ) {\n      slaname: name\n      count\n      month: strval_extra\n      p1: value\n      p5: intval_extra\n      p2: reactive_customer\n      P3: ppm_customer\n      P4: reactive_supplier\n    }\n  }\n"]);return ta=function(){return e},e}var tr=(0,O.Ps)(ta()),ti=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(tr,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{jobSLAByMonth:[]}:o).jobSLAByMonth,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"JobSLAByMonth",removeChart:d,title:"Monthly SLAs ",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"spline"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:null},tooltip:{headerFormat:"<b>{series.slaname}</b><br>",pointFormat:"{series.count}"},plotOptions:{series:{marker:{enabled:!0}}},series:[{name:"P1",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.P1}})},{name:"P2",data:s.map(function(e){return{nam:(0,en.Z)(new Date(e.month),"LLL yyyy"),name:e.month,y:e.P2}})},{name:"P3",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.P3}})},{name:"P4",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.P4}})},{name:"P5",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.P5}})}]},ref:n})})});function td(){var e=(0,l.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    newCustomerAccounts: getDashboard_Count_New_Customer_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: desc }\n    ) {\n      date: date_val1_extra\n      count\n    }\n    meta: getDashboard_Count_New_Customer_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return td=function(){return e},e}var to=(0,O.Ps)(td()),ts=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(to,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{newCustomerAccounts:[]}:o).newCustomerAccounts,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"NewCustomerAccountsChart",removeChart:d,title:"New Customer Accounts",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}}),name:"Active Customer",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})});function tl(){var e=(0,l.Z)(["\n  query GetAverageProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    quoteAcceptanceRate: getDashboard_Quote_Acceptance_Rate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: value\n      date: date_val1_extra\n    }\n    meta: getDashboard_Quote_Acceptance_Rate_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return tl=function(){return e},e}var tc=(0,O.Ps)(tl()),tu=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsx)(ev.Z,{direction:"row",justifyContent:"space-between",children:(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"managerId",type:"user",control:o}))}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},tm=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u,m=e.removeChart,I=(0,ew.x)().user,p=R.find(function(e){return e.default}),v=(0,j.Z)({},J(p.value),(c=(l={accountId:I.accountId,accountType:I.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===l.accountType?{adminId:c}:{accountId:c})),g=(0,F.useState)(v),$=g[0],x=g[1],y=(0,F.useState)(!1),f=y[0],h=y[1],_=(0,N.aM)(tc,{onCompleted:function(){h(!1)},variables:{adminId:$.adminId,customerId:null===(a=$.customerId)||void 0===a?void 0:a.value,endTime:$.endDate,locationId:null===(r=$.locationId)||void 0===r?void 0:r.value,managerId:null===(d=$.managerId)||void 0===d?void 0:d.value,serviceId:null===(o=$.serviceId)||void 0===o?void 0:o.value,startTime:$.startDate,supplierId:null===(s=$.supplierId)||void 0===s?void 0:s.value}}).data,T=(void 0===_?{quoteAcceptanceRate:[]}:_).quoteAcceptanceRate,b=function(e){e.reflow()};return t(18393)(W()),T&&(0,i.jsx)(eF,{name:"QuoteAcceptanceRateChart",removeChart:m,title:"Quote Acceptance Rate",openModal:f,setOpenModal:h,filtersComponent:(0,i.jsx)(tu,{filters:$,initialFilters:v,setFilters:x}),activeFiltersComponent:(0,i.jsx)(eX,{filters:$}),children:(0,i.jsx)(E(),{callback:b,constructorType:"chart",Highcharts:W(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{data:T.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count||0}}),name:"%",showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"%"}}},ref:n})})});function tI(){var e=(0,l.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    newSupplierAccounts: getDashboard_Count_New_Supplier_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: desc }\n    ) {\n      date: date_val1_extra\n      count\n    }\n    meta: getDashboard_Count_New_Supplier_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return tI=function(){return e},e}var tp=(0,O.Ps)(tI()),tv=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(tp,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{newSupplierAccounts:[]}:o).newSupplierAccounts,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"NewSupplierAccountsChart",removeChart:d,title:"New Supplier Accounts",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}}),name:"Active Supplier",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})});function tg(){var e=(0,l.Z)(["\n  query GetPercentageOfSpendByServiceLine(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    percentageOfSpendByServiceLine: getDashboard_Count_All_Job_by_Service(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      serviceName: strval_extra\n      currentAmount: reactive_customer\n      lastAmount: ppm_customer\n    }\n    meta: getDashboard_Count_All_Job_by_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return tg=function(){return e},e}var t$=(0,O.Ps)(tg()),tx={item:"reactive_customer",order:"desc"},ty=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:tx}),d=r.initialData,o=r.ref,s=(0,N.aM)(t$,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{percentageOfSpendByServiceLine:[],meta:{aggregate:{}}}:l,u=c.percentageOfSpendByServiceLine,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"PercentageOfSpendByServiceLineTable",removeChart:a,title:"% Of Spend By Service Line",children:(0,i.jsx)(nk.t,{columns:[{text:"Service Name"},{sortable:!0,sortName:"reactive_customer",text:"Current Amount"},{sortable:!0,sortName:"last_amount",text:"Last Amount"}],history:!1,initialSort:tx,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{serviceName:e.serviceName,currentAmount:e.currentAmount,lastAmount:e.lastAmount}})})})});function tf(){var e=(0,l.Z)(["\n  query GetPercentageOfWorkOrdersByServiceLine(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    percentageOfWorkOrdersByServiceLine: getDashboard_Count_Job_by_Service(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countLastYear: value\n      countJobIdCurrentYear: intval_extra\n      serviceName: strval_extra\n    }\n    meta: getDashboard_Count_Job_by_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { intval_extra: desc }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return tf=function(){return e},e}ty.propTypes={filters:D.object};var th=(0,O.Ps)(tf()),t_={item:"intval_extra",order:"desc"},tT=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:t_}),d=r.initialData,o=r.ref,s=(0,N.aM)(th,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{percentageOfWorkOrdersByServiceLine:[],meta:{aggregate:{}}}:l,u=c.percentageOfWorkOrdersByServiceLine,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"PercentageOfWorkOrdersByServiceLineTable",removeChart:a,title:"% Of Work Orders By Service Line",children:(0,i.jsx)(nk.t,{columns:[{text:"Service name"},{sortable:!0,sortName:"intval_extra",text:"current year"},{sortable:!0,sortName:"value",text:" last year"}],history:!1,initialSort:t_,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{serviceName:e.serviceName,countJobIdCurrentYear:e.countJobIdCurrentYear,countLastYear:e.countLastYear}})})})});function tb(){var e=(0,l.Z)(["\n  query getDashboard_Financial_By_Month(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    financebymonth: getDashboard_Financial_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      month: name\n      reactive_customer\n      reactive_revenue\n      reactive_supplier\n    }\n  }\n"]);return tb=function(){return e},e}tT.propTypes={filters:D.object};var tC=(0,O.Ps)(tb()),tA=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(tC,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{financebymonth:[]}:o).financebymonth,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"ReactiveAmountByMonth",removeChart:d,title:"Supplier/Customer Amounts By Month",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amount(\xa3)"}},labels:{items:[{style:{fontSize:"15px",left:"50px",top:"18px"}}]},series:[{type:"column",name:"Customer",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_customer}})},{type:"column",name:"supplier",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_supplier}})},{type:"spline",name:"Revenue",marker:{lineWidth:2,fillColor:"white"},data:s.map(function(e){return{name:(0,en.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_revenue}})}]},ref:n})})});function tj(){var e=(0,l.Z)(["\n  query GetDashboard_SlA(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    sla: getDashboard_SLA(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      count\n      sla_name: name\n      Breached_Count: ppm_customer\n      Live_Count: reactive_customer\n    }\n  }\n"]);return tj=function(){return e},e}var tZ=(0,O.Ps)(tj()),tP=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(tZ,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{sla:[]}:o).sla,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"ReactiveBySLA",removeChart:d,title:"Reactive By SLA",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"bar"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{min:0,labels:{overflow:"justify"}},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,shadow:!0},credits:{enabled:!1},series:[{name:"live jobs",data:s.map(function(e){return{name:e.sla_name,y:e.Live_Count}}),showInLegend:!1},{name:"Breached jobs",data:s.map(function(e){return{name:e.sla_name,y:e.Breached_Count}}),showInLegend:!1}]},ref:n})})});function tF(){var e=(0,l.Z)(["\n  query GetSpendByCoverageArea(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    spendByCoverageArea: getDashboard_Sum_CustomerAmount_By_Coverage(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      coverage: strval_extra\n      total: reactive_customer\n    }\n    meta: getDashboard_Sum_CustomerAmount_By_Coverage_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return tF=function(){return e},e}var tD=(0,O.Ps)(tF()),tw={item:"reactive_customer",order:"desc"},tS=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:tw}),d=r.initialData,o=r.ref,s=(0,N.aM)(tD,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{spendByCoverageArea:[],meta:{aggregate:{}}}:l,u=c.spendByCoverageArea,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"SpendByCoverageAreaTable",removeChart:a,title:"Spend By Coverage Area",children:(0,i.jsx)(nk.t,{columns:[{text:"coverage"},{sortable:!0,sortName:"reactive_customer",text:"Total"}],history:!1,initialSort:tw,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{coverage:e.coverage,total:e.total}})})})});function tB(){var e=(0,l.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    spendFromNewCustomerAccounts: getDashboard_Count_New_Customer_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      count: count\n    }\n    meta: getDashboard_Count_New_Customer_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return tB=function(){return e},e}tS.propTypes={filters:D.object};var tL=(0,O.Ps)(tB()),tM=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(tL,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{spendFromNewCustomerAccounts:[]}:o).spendFromNewCustomerAccounts,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"SpendFromNewCustomerAccountsChart",removeChart:d,title:"Spend From New Customer Accounts",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}}),name:"Active Customer",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}},ref:n})})});function tR(){var e=(0,l.Z)(["\n  query GetSumQuoteAcceptedByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Sum_Quote_Accepted_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    sumQuoteAccepted: getDashboard_Sum_Quote_Accepted_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      sum: reactive_customer\n      jobDate: date_val1_extra\n    }\n  }\n"]);return tR=function(){return e},e}var tz=(0,O.Ps)(tR()),tJ=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(tz,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{sumQuoteAccepted:[]}:o).sumQuoteAccepted,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"SumQuoteAccepted",removeChart:d,title:"Value of Quotes Accepted By Date",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"sum",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.sum}}),showInLegend:!1}]},ref:n})})});function tN(){var e=(0,l.Z)(["\n  query GetSumQuoteSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Sum_Quote_Quotations_Sent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    sumQuoteSent: getDashboard_Sum_Quote_Quotations_Sent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      sum: reactive_customer\n      jobDate: date_val1_extra\n    }\n  }\n"]);return tN=function(){return e},e}var tO=(0,O.Ps)(tN()),tq=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(tO,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{sumQuoteSent:[]}:o).sumQuoteSent,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"SumQuoteSent",removeChart:d,title:"Value Of Quotations Sent By Date",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"sum",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.sum}}),showInLegend:!1}]},ref:n})})});function tH(){var e=(0,l.Z)(["\n  query SupplierDebt(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_finance_debt_order_by!]\n    $outstanding_levels: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    suppliers: getDashboard_Financial_Debt_By_Supplier(\n      limit: $limit\n      offset: $offset\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: $orderBy\n    ) {\n      supplier: Account {\n        id\n        name\n      }\n      total_invoice_count\n      total_invoice_amount\n      outstanding_invoice_count\n      outstanding_invoice_amount\n      outstanding_0_30\n      outstanding_31_60\n      outstanding_61_90\n      outstanding_91_x\n    }\n    meta: getDashboard_Financial_Debt_By_Supplier_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          total_invoice_count\n          total_invoice_amount\n          outstanding_invoice_count\n          outstanding_invoice_amount\n          outstanding_0_30\n          outstanding_31_60\n          outstanding_61_90\n          outstanding_91_x\n        }\n        totalCount: count\n      }\n    }\n  }\n"]);return tH=function(){return e},e}var tk=(0,O.Ps)(tH()),tW=function(e,n,t){return e&&n?"".concat(t?(0,nq.Z)(e):e||0," (").concat(Math.round(e/n*100),"%)"):"".concat(t?(0,nq.Z)(e):e||0)},tQ={item:"outstanding_invoice_amount",order:"desc"},tE=(0,F.forwardRef)(function(e,n){var t,a,r,d=e.filters,o=e.removeChart,s=(0,nW.x)({filters:d,initialSort:tQ}),l=s.initialData,c=s.ref,I=(0,F.useState)(),p=I[0],g=I[1],$=(0,N.aM)(tk,{variables:(0,Z.Z)((0,j.Z)({},l),{outstanding_levels:p})}),x=$.data,y=void 0===x?{suppliers:[],meta:{aggregate:{}}}:x,f=y.suppliers,h=y.meta,_=$.loading,T=$.refetch,b=(0,nB.Z)((0,nL.t)(tk,{variables:(0,Z.Z)((0,j.Z)({},l),{limit:nN.C1.paginationSize,offset:((null===(t=c.current)||void 0===t?void 0:t.currentPage)-1||0)*nN.C1.paginationSize,orderBy:(0,nS.Z)({},null===(a=c.current)||void 0===a?void 0:a.sort.item,null===(r=c.current)||void 0===r?void 0:r.sort.order),outstanding_levels:p}),onCompleted:function(e){var n,t=nJ().unparse((n=e.suppliers).map(function(e){return{name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:tW(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:tW(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:tW(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:tW(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:tW(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,nq.Z)(e.total_invoice_amount),outstanding_invoice_amount:tW(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}})),a="data:application/octet-stream,"+encodeURIComponent(t);(0,nE.S)(a,"customer-debt.csv")}}),1)[0],C=function(e){var n=e.accountId,t=e.level,a=e.number,r="/dashboard/suppliers/view?id=".concat(n),o="&endDate=".concat((0,nO.Z)(d.endDate)),s="&startDate=".concat((0,nO.Z)(d.startDate));return(0,i.jsx)(v.Z,{to:"".concat(r,"&tab=finance&outstandingLevel=").concat(t).concat(s).concat(o),children:a})},A=function(e){g(e)};return(0,i.jsxs)(G.J,{isTable:!0,name:"SupplierDebtTable",removeChart:o,title:"Supplier Debt",children:[(0,i.jsx)(u.Z,{children:(0,i.jsx)(m.Z,{md:1,children:(0,i.jsx)(L.Z,{content:"Export to CSV",context:"secondary",onClick:b,title:"Export to CSV",size:"sm"})})}),h.aggregate.sum&&(0,i.jsxs)(nH.Z,{align:"flex-end",children:[(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Invoice Count: ",(0,i.jsx)("b",{children:h.aggregate.sum.total_invoice_count})]}),context:"secondary",onClick:function(e){return A(null)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding Invoices:",(0,i.jsx)("b",{children:tW(h.aggregate.sum.outstanding_invoice_count,h.aggregate.sum.total_invoice_count)})]}),context:"secondary",outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding 1-30:",(0,i.jsx)("b",{children:tW(h.aggregate.sum.outstanding_0_30,h.aggregate.sum.outstanding_invoice_count)})]}),context:1===p?"success":"secondary",onClick:function(e){return A(1)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding 31-60:",(0,i.jsx)("b",{children:tW(h.aggregate.sum.outstanding_31_60,h.aggregate.sum.outstanding_invoice_count)})]}),context:31===p?"success":"secondary",onClick:function(e){return A(31)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding 61-90:",(0,i.jsx)("b",{children:tW(h.aggregate.sum.outstanding_61_90,h.aggregate.sum.outstanding_invoice_count)})]}),context:61===p?"success":"secondary",onClick:function(e){return A(61)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding > 90:",(0,i.jsx)("b",{children:tW(h.aggregate.sum.outstanding_91_x,h.aggregate.sum.outstanding_invoice_count)})]}),context:91===p?"success":"secondary",onClick:function(e){return A(91)},outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Total Invoice Amount: ",(0,i.jsx)("b",{children:(0,nq.Z)(h.aggregate.sum.total_invoice_amount)})]}),context:"secondary",outline:!0,size:"sm"}),(0,i.jsx)(L.Z,{content:(0,i.jsxs)(i.Fragment,{children:["Outstanding Amount:",(0,i.jsx)("b",{children:tW(h.aggregate.sum.outstanding_invoice_amount,h.aggregate.sum.total_invoice_amount,!0)})]}),context:"secondary",outline:!0,size:"sm"})]}),(0,i.jsx)(nk.t,{columns:[{hidden:!0},{formatter:function(e){var n;return n=e.row,(0,i.jsx)(v.Z,{to:"/dashboard/suppliers/view?id=".concat(n.accountId,"&tab=finance"),children:n.name})},text:"Supplier"},{sortable:!0,sortName:"total_invoice_count",text:"Invoice Count"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:0,number:n.outstanding_invoice_count})},sortable:!0,sortName:"outstanding_invoice_count",text:"Outstanding Invoices"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:1,number:n.outstanding_0_30})},sortable:!0,sortName:"outstanding_0_30",text:"Outstanding 1-30"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:31,number:n.outstanding_31_60})},sortable:!0,sortName:"outstanding_31_60",text:"Outstanding 31-60"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:61,number:n.outstanding_61_90})},sortable:!0,sortName:"outstanding_61_90",text:"Outstanding 61-90"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:91,number:n.outstanding_91_x})},sortable:!0,sortName:"outstanding_91_x",text:"Outstanding > 90"},{sortable:!0,sortName:"total_invoice_amount",text:"Total Invoice Amount"},{formatter:function(e){var n=e.row;return C({accountId:n.accountId,level:0,number:n.outstanding_invoice_amount})},sortable:!0,sortName:"outstanding_invoice_amount",text:"Outstanding Amount"}],history:!1,initialSort:tQ,loading:_,meta:h,ref:c,refetch:T,rows:f.map(function(e){return{accountId:e.supplier.id,name:e.supplier.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:tW(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:tW(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:tW(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:tW(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:tW(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,nq.Z)(e.total_invoice_amount),outstanding_invoice_amount:tW(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}})})]})});function tG(){var e=(0,l.Z)(["\n  query GetTopAssetsByNumberOfJobs(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetsByNumberOfJobs: getDashboard_Asset(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      assetName: strval_extra\n      amount: ppm_customer\n      countOfferedJob: count\n    }\n    meta: getDashboard_Asset_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return tG=function(){return e},e}tE.propTypes={filters:D.object};var tV=(0,O.Ps)(tG()),tY={item:"ppm_customer",order:"desc"},tU=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:tY}),d=r.initialData,o=r.ref,s=(0,N.aM)(tV,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{topAssetsByNumberOfJobs:[],meta:{aggregate:{}}}:l,u=c.topAssetsByNumberOfJobs,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"TopAssetsByNumberOfJobsTable",removeChart:a,title:"Top Assets By Number Of Jobs",children:(0,i.jsx)(nk.t,{columns:[{text:"Name"},{sortable:!0,sortName:"ppm_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,nq.Z)(n.amount)}},{sortable:!0,sortName:"count",text:"Count Offered Job"}],history:!1,initialSort:tY,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{assetName:e.assetName,amount:e.amount,countOfferedJob:e.countOfferedJob}})})})});function tX(){var e=(0,l.Z)(["\n  query GetTopAssetsBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetsBySpend: getDashboard_Asset(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      assetName: strval_extra\n      asset_id: intval_extra\n      amount: reactive_customer\n    }\n    meta: getDashboard_Asset_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return tX=function(){return e},e}tU.propTypes={filters:D.object};var tK=(0,O.Ps)(tX()),t0={item:"reactive_customer",order:"desc"},t1=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:t0}),d=r.initialData,o=r.ref,s=(0,N.aM)(tK,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{topAssetsBySpend:[],meta:{aggregate:{}}}:l,u=c.topAssetsBySpend,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"TopAssetsBySpendTable",removeChart:a,title:"Top Assets By Spend",children:(0,i.jsx)(nk.t,{columns:[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,nq.Z)(n.amount)}}],history:!1,initialSort:t0,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{assetName:e.assetName,amount:e.amount}})})})});function t3(){var e=(0,l.Z)(["\n  query GetTopAssetTypesBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetTypesBySpend: getDashboard_AssetTypes(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      amount: reactive_customer\n      assetTypeName: strval_extra\n      assetTypeID: intval_extra\n    }\n    meta: getDashboard_AssetTypes_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return t3=function(){return e},e}t1.propTypes={filters:D.object};var t2=(0,O.Ps)(t3()),t9={item:"reactive_customer",order:"desc"},t5=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:t9}),d=r.initialData,o=r.ref,s=(0,N.aM)(t2,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{topAssetTypesBySpend:[],meta:{aggregate:{}}}:l,u=c.topAssetTypesBySpend,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"TopAssetTypesBySpendTable",removeChart:a,title:"Top Asset Types By Spend",children:(0,i.jsx)(nk.t,{columns:[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,nq.Z)(n.amount)}}],history:!1,initialSort:t9,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{assetTypeName:e.assetTypeName,amount:e.amount}})})})});function t6(){var e=(0,l.Z)(["\n  query GetTopCustomersByNumberOfProperties(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topCustomersByNumberOfProperties: getDashboard_Customers_By_Location(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countLocationId: value\n      accountName: strval_extra\n      customerAmount: reactive_amount\n    }\n\n    meta: getDashboard_Customers_By_Location_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return t6=function(){return e},e}t5.propTypes={filters:D.object};var t8=(0,O.Ps)(t6()),t4={item:"reactive_customer",order:"desc"},t7=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:t4}),d=r.initialData,o=r.ref,s=(0,N.aM)(t8,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{topCustomersByNumberOfProperties:[],meta:{aggregate:{}}}:l,u=c.topCustomersByNumberOfProperties,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"TopCustomersByNumberOfPropertiesTable",removeChart:a,title:"Top Customers By Number Of Properties",children:(0,i.jsx)(nk.t,{columns:[{text:"Account name"},{sortable:!0,sortName:"reactive_customer",text:"Count Location"},{text:"Customer amount",formatter:function(e){var n=e.row;return(0,nq.Z)(n.customerAmount)}}],history:!1,initialSort:t4,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{accountName:e.accountName,countLocationId:e.countLocationId,customerAmount:e.customerAmount}})})})});function ae(){var e=(0,l.Z)(["\n  query GetTopCustomersByProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topCustomersByProfit: getDashboard_Customer_Profit(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: reactive_customer\n    }\n    meta: getDashboard_Customer_Profit_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return ae=function(){return e},e}t7.propTypes={filters:D.object};var an=(0,O.Ps)(ae()),at=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(an,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{topCustomersByProfit:[]}:o).topCustomersByProfit,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"TopCustomersByProfitChart",removeChart:d,title:"Top Customers By Profit",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"Amount",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amount(\xa3)"}}},ref:n})})});function aa(){var e=(0,l.Z)(["\n  query GetTopPropertiesBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topPropertiesBySpend: getDashboard_Location(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      locationName: strval_extra\n      locationId: intval_extra\n      amount: reactive_customer\n    }\n    meta: getDashboard_Location_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return aa=function(){return e},e}var ar=(0,O.Ps)(aa()),ai={item:"reactive_customer",order:"desc"},ad=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:ai}),d=r.initialData,o=r.ref,s=(0,N.aM)(ar,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{topPropertiesBySpend:[],meta:{aggregate:{}}}:l,u=c.topPropertiesBySpend,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"TopPropertiesBySpendTable",removeChart:a,title:"Top Properties By Spend",children:(0,i.jsx)(nk.t,{columns:[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,nq.Z)(n.amount)}}],history:!1,initialSort:ai,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{locationName:e.locationName,amount:e.amount}})})})});function ao(){var e=(0,l.Z)(["\n  query GetTopSuppliersByNumberOfJobs(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByNumberOfJobs: getDashboard_Supplier_To_Accept_Job(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countAcceptedJob: count\n      amountAcceptedJob: reactive_customer\n      supplierName: strval_extra\n    }\n    meta: getDashboard_Supplier_To_Accept_Job_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return ao=function(){return e},e}ad.propTypes={filters:D.object};var as=(0,O.Ps)(ao()),al={item:"reactive_customer",order:"desc"},ac=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:al}),d=r.initialData,o=r.ref,s=(0,N.aM)(as,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{topSuppliersByNumberOfJobs:[],meta:{aggregate:{}}}:l,u=c.topSuppliersByNumberOfJobs,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"TopSuppliersByNumberOfJobsTable",removeChart:a,title:"Top Suppliers By Number Of Jobs and Earnings",children:(0,i.jsx)(nk.t,{columns:[{text:"Supplier Name"},{sortable:!0,sortName:"count",text:"Count Accepted Job"},{sortable:!0,sortName:"reactive_customer",text:"Amount Accepted Job",formatter:function(e){var n=e.row;return(0,nq.Z)(n.amountAcceptedJob)}}],history:!1,initialSort:al,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{supplierName:e.supplierName,countAcceptedJob:e.countAcceptedJob,amountAcceptedJob:e.amountAcceptedJob}})})})});function au(){var e=(0,l.Z)(["\n  query GetTopSuppliersByQuoteReturn(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByQuoteReturn: getDashboard_Suppliers_By_Quote_Return(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      reactiveAmount: reactive_supplier\n      dayDifference: count\n      supplierName: strval_extra\n    }\n    meta: getDashboard_Suppliers_By_Quote_Return_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return au=function(){return e},e}ac.propTypes={filters:D.object};var am=(0,O.Ps)(au()),aI={item:"reactive_supplier",order:"desc"},ap=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:aI}),d=r.initialData,o=r.ref,s=(0,N.aM)(am,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{topSuppliersByQuoteReturn:[],meta:{aggregate:{}}}:l,u=c.topSuppliersByQuoteReturn,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"TopSuppliersByQuoteReturnTable",removeChart:a,title:"Top Suppliers By Quote Return",children:(0,i.jsx)(nk.t,{columns:[{text:"Supplier Name"},{sortable:!0,sortName:"reactive_suppliers",text:"Reactive Amount"},{text:"Day Difference"}],history:!1,initialSort:aI,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{supplierName:e.supplierName,reactiveAmount:e.reactiveAmount,dayDifference:e.dayDifference}})})})});function av(){var e=(0,l.Z)(["\n  query GetTopSuppliersByTimeToSubmitJobReport(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByTimeToSubmitJobReport: getDashboard_Supplier_To_Submit_Job(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      supplier_name: strval_extra\n      supplier_id: value\n      amount: reactive_customer\n    }\n    meta: getDashboard_Supplier_To_Submit_Job_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return av=function(){return e},e}ap.propTypes={filters:D.object};var ag=(0,O.Ps)(av()),a$={item:"reactive_customer",order:"desc"},ax=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:a$}),d=r.initialData,o=r.ref,s=(0,N.aM)(ag,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{topSuppliersByTimeToSubmitJobReport:[],meta:{aggregate:{}}}:l,u=c.topSuppliersByTimeToSubmitJobReport,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"TopSuppliersByTimeToSubmitJobReportTable",removeChart:a,title:"Top Suppliers By Time To Submit Job",children:(0,i.jsx)(nk.t,{columns:[{text:"Supplier Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,nq.Z)(n.amount)}}],history:!1,initialSort:a$,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{supplier_name:e.supplier_name,amount:e.amount}})})})});ax.propTypes={filters:D.object};var ay=function(e){var n,t=[];return e.map((n=(0,A.Z)(function(e){var n,a,r;return(0,P.__generator)(this,function(i){return r=(0,en.Z)(new Date(e.scheduledAt?e.scheduledAt:e.timingStart),"yyyy dd MMM"),(null===(n=e.meta)||void 0===n?void 0:n.customerVATInvoice)&&t.push({name:r,y:null===(a=e.meta)||void 0===a?void 0:a.customerVATInvoice.expensesInfo.expensesTotal}),[2]})}),function(e){return n.apply(this,arguments)})),t},af=t(11640),ah=t(97432),a_=function(e){var n=e.acquisitionCost,t=e.datePutInService,a=e.maintenanceSpend,r=e.residualValue,i=e.usefulLife,d=parseInt(a)/12,o=(0,en.Z)(new Date(t),"MMMM yyyy"),s=Array(parseInt(i)+1).fill({});return s.map(function(e,a){return 0===a?{name:o,y:(0,ah.l)(parseInt(n),2)}:a+1===parseInt(i)+1?{name:(0,en.Z)((0,af.Z)(new Date(t),a),"MMMM yyyy"),y:(0,ah.l)(a*d+parseInt(n)-parseInt(r),2)}:{name:(0,en.Z)((0,af.Z)(new Date(t),a),"MMMM yyyy"),y:(0,ah.l)(a*d+parseInt(n),2)}})},aT=t(11585),ab=(0,F.forwardRef)(function(e,n){var a,r,d=e.initialData,o=e.jobs,s=function(e){e.reflow()};return t(18393)(W()),(0,i.jsx)(aT.Z,{fitParentHeight:!0,title:"Total cost of ownership",children:(0,i.jsx)(E(),{callback:s,constructorType:"chart",Highcharts:W(),options:(a=a_(d),r=ay(void 0===o?[]:o),{chart:{type:"line",zoomType:"x"},title:{text:"TCO"},series:[{data:a,showInLegend:!1},{data:Object.keys(r).map(function(e){return{name:e,y:r[e]}}),name:"Total Costs ",showInLegend:!1,type:"column",visible:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"\xa3"}}}),ref:n})})});function aC(){var e=(0,l.Z)(["\n  query GetFinancialByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobLength: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: reactive_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return aC=function(){return e},e}var aA=(0,O.Ps)(aC()),aj=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(aA,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{averageJobLength:[]}:o).averageJobLength,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"TotalJobRevenueChart",removeChart:d,title:"Total Job Revenue",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{data:s.map(function(e){return{name:(0,en.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"Revenue",showInLegend:!1}]},ref:n})})});function aZ(){var e=(0,l.Z)(["\n  query GetTotalQuotInvoiceSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_Quote_InvoiceSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    totalQuoteInvoiceSent: getDashboard_Count_Quote_InvoiceSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n  }\n"]);return aZ=function(){return e},e}var aP=(0,O.Ps)(aZ()),aF=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(aP,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{totalQuoteInvoiceSent:[]}:o).totalQuoteInvoiceSent,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"totalQuoteInvoiceSent",removeChart:d,title:"Total Quote Invoice Sent By Date",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}}),showInLegend:!1}]},ref:n})})});function aD(){var e=(0,l.Z)(["\n  query GetTotalQuoteReportSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_Quote_ReportSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    totalQuoteReportSend: getDashboard_Count_Quote_ReportSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n  }\n"]);return aD=function(){return e},e}var aw=(0,O.Ps)(aD()),aS=(0,F.forwardRef)(function(e,n){var a,r=e.filters,d=e.removeChart,o=(0,N.aM)(aw,{variables:{adminId:r.adminId,customerId:r.customerId,endTime:r.endDate,isFixed:r.isFixed,isPlanned:r.isPlanned,locationId:r.locationId,managerId:r.managerId,postCodeAreaId:r.postCodeAreaId,serviceId:r.serviceId,slaId:r.slaId,startTime:r.startDate,supplierId:r.supplierId}}).data,s=(void 0===o?{totalQuoteReportSend:[]}:o).totalQuoteReportSend,l=function(e){e.reflow()};return t(18393)(W()),s&&(0,i.jsx)(G.J,{name:"TotalQuoteReportSent",removeChart:d,title:"Total Quote Report Sent by Date",children:(0,i.jsx)(E(),{callback:l,constructorType:"chart",Highcharts:W(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:s.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}}),showInLegend:!1}]},ref:n})})});function aB(){var e=(0,l.Z)(["\n  query GetTotalQuoteSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    totalQuoteSent: getDashboard_Count_QuoteSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n    meta: getDashboard_Count_QuoteSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"]);return aB=function(){return e},e}var aL=(0,O.Ps)(aB()),aM=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsx)(ev.Z,{direction:"row",justifyContent:"space-between",children:(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"managerId",type:"user",control:o}))}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},aR=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u,m=e.removeChart,I=(0,ew.x)().user,p=R.find(function(e){return e.default}),v=(0,j.Z)({},J(p.value),(c=(l={accountId:I.accountId,accountType:I.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===l.accountType?{adminId:c}:{accountId:c})),g=(0,F.useState)(v),$=g[0],x=g[1],y=(0,F.useState)(!1),f=y[0],h=y[1],_=(0,N.aM)(aL,{onCompleted:function(){h(!1)},variables:{adminId:$.adminId,customerId:null===(a=$.customerId)||void 0===a?void 0:a.value,endTime:$.endDate,locationId:null===(r=$.locationId)||void 0===r?void 0:r.value,managerId:null===(d=$.managerId)||void 0===d?void 0:d.value,serviceId:null===(o=$.serviceId)||void 0===o?void 0:o.value,startTime:$.startDate,supplierId:null===(s=$.supplierId)||void 0===s?void 0:s.value}}).data,T=(void 0===_?{totalQuoteSent:[]}:_).totalQuoteSent,b=function(e){e.reflow()};return t(18393)(W()),T&&(0,i.jsx)(eF,{name:"TotalQuoteSentChart",removeChart:m,title:"Number Of Quotes",openModal:f,setOpenModal:h,filtersComponent:(0,i.jsx)(aM,{filters:$,initialFilters:v,setFilters:x}),activeFiltersComponent:(0,i.jsx)(eX,{filters:$}),children:(0,i.jsx)(E(),{callback:b,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},xAxis:{type:"category",title:null},yAxis:{title:{text:"Count"}},series:[{name:"Count, quotes",data:T.map(function(e){return{name:(0,en.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}}),showInLegend:!1,color:"#1E88E5"}]},ref:n})})});function az(){var e=(0,l.Z)(["\n  query GetWorstCustomersByAgedReceivables(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    worstCustomersByAgedReceivables: getDashboard_Customer_Aged_Receivables(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      customer_name: strval_extra\n      amount: reactive_customer\n      customer_id: value\n    }\n    meta: getDashboard_Customer_Aged_Receivables_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return az=function(){return e},e}var aJ=(0,O.Ps)(az()),aN={item:"reactive_customer",order:"desc"},aO=(0,F.forwardRef)(function(e,n){var t=e.filters,a=e.removeChart,r=(0,nW.x)({filters:t,initialSort:aN}),d=r.initialData,o=r.ref,s=(0,N.aM)(aJ,{variables:(0,Z.Z)((0,j.Z)({},d),{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),l=s.data,c=void 0===l?{worstCustomersByAgedReceivables:[],meta:{aggregate:{}}}:l,u=c.worstCustomersByAgedReceivables,m=c.meta,I=s.loading,p=s.refetch;return(0,i.jsx)(G.J,{isTable:!0,name:"WorstCustomersByAgedReceivablesTable",removeChart:a,title:"Worst Customers By Aged Receivables",children:(0,i.jsx)(nk.t,{columns:[{text:"Customer Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,nq.Z)(n.amount)}}],history:!1,initialSort:aN,loading:I,meta:m,ref:o,refetch:p,rows:u.map(function(e){return{customer_name:e.customer_name,amount:e.amount}})})})});function aq(){var e=(0,l.Z)(["\n  query GetSlaBreachCount(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    slaBreachCount: getDashboard_Count_SLA_Breach_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Count_SLA_Breach_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return aq=function(){return e},e}aO.propTypes={filters:D.object};var aH=(0,O.Ps)(aq()),ak=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"slaId",type:"sla",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"managerId",type:"user",control:o}))]}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},aW=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u,m,I=e.removeChart,p=(0,ew.x)().user,v=R.find(function(e){return e.default}),g=(0,j.Z)({},J(v.value),(u=(c={accountId:p.accountId,accountType:p.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===c.accountType?{adminId:u}:{accountId:u})),$=(0,F.useState)(g),x=$[0],y=$[1],f=(0,F.useState)(!1),h=f[0],_=f[1],T=(0,N.aM)(aH,{onCompleted:function(){_(!1)},variables:{adminId:x.adminId,customerId:null===(a=x.customerId)||void 0===a?void 0:a.value,endTime:x.endDate,locationId:null===(r=x.locationId)||void 0===r?void 0:r.value,managerId:null===(d=x.managerId)||void 0===d?void 0:d.value,serviceId:null===(o=x.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=x.slaId)||void 0===s?void 0:s.value,startTime:x.startDate,supplierId:null===(l=x.supplierId)||void 0===l?void 0:l.value}}).data,b=(void 0===T?{slaBreachCount:[]}:T).slaBreachCount,C=function(e){e.reflow()};return t(18393)(W()),b&&(0,i.jsx)(eF,{name:"SlaBreachCountChart",removeChart:I,title:"SLA Breach (Count)",openModal:h,setOpenModal:_,filtersComponent:(0,i.jsx)(ak,{filters:x,initialFilters:g,setFilters:y}),activeFiltersComponent:(0,i.jsx)(eX,{filters:x}),children:(0,i.jsx)(E(),{callback:C,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Count, jobs",data:b.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Count"}}},ref:n})})});function aQ(){var e=(0,l.Z)(["\n  query GetSlaBreachPercentage(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    slaBreachPercentage: getDashboard_SLA_Breach_Percentage_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_SLA_Breach_Percentage_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]);return aQ=function(){return e},e}var aE=(0,O.Ps)(aQ()),aG=function(e){var n=e.setFilters,t=e.initialFilters,a=e.filters,r=(0,ew.x)().user,d=(0,eS.cI)({defaultValues:(0,j.Z)({},a)}),o=d.control,s=d.errors,l=d.handleSubmit,c=d.register,u=d.reset,m=d.watch,I={errors:s,register:c,control:o,reset:u,filters:a},p=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},v=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:J(e.intervals),a=r.accountId,i=r.accountType,d=(0,j.Z)({},t,p({accountId:a,accountType:i}),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(d)},g=function(){u({initialFilters:t}),n(t)},$=m("intervals");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("form",{onSubmit:l(v),children:(0,i.jsxs)(ev.Z,{children:[(0,i.jsx)(eE,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:R,variant:"standard"}),"custom"===$&&(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"startDate",placeholder:"Start Date"}))}),(0,i.jsx)(ec.Z,{sx:{mt:2,width:"45%"},children:(0,i.jsx)(eq.M,(0,Z.Z)((0,j.Z)({},I),{name:"endDate",placeholder:"End Date"}))})]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"supplierId",type:"supplier",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"locationId",type:"property",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"serviceId",type:"service",control:o}))]}),(0,i.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"slaId",type:"sla",control:o})),(0,i.jsx)(eO,(0,Z.Z)((0,j.Z)({},I),{name:"managerId",type:"user",control:o}))]}),(0,i.jsxs)(ev.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,i.jsx)(eB.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,i.jsx)(eB.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},aV=(0,F.forwardRef)(function(e,n){var a,r,d,o,s,l,c,u,m,I=e.removeChart,p=(0,ew.x)().user,v=R.find(function(e){return e.default}),g=(0,j.Z)({},J(v.value),(u=(c={accountId:p.accountId,accountType:p.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===c.accountType?{adminId:u}:{accountId:u})),$=(0,F.useState)(g),x=$[0],y=$[1],f=(0,F.useState)(!1),h=f[0],_=f[1],T=(0,N.aM)(aE,{onCompleted:function(){_(!1)},variables:{adminId:x.adminId,customerId:null===(a=x.customerId)||void 0===a?void 0:a.value,endTime:x.endDate,locationId:null===(r=x.locationId)||void 0===r?void 0:r.value,managerId:null===(d=x.managerId)||void 0===d?void 0:d.value,serviceId:null===(o=x.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=x.slaId)||void 0===s?void 0:s.value,startTime:x.startDate,supplierId:null===(l=x.supplierId)||void 0===l?void 0:l.value}}).data,b=(void 0===T?{slaBreachPercentage:[]}:T).slaBreachPercentage,C=function(e){e.reflow()};return t(18393)(W()),b&&(0,i.jsx)(eF,{name:"SlaBreachPercentageChart",removeChart:I,title:"SLA Breach (Percentage)",openModal:h,setOpenModal:_,filtersComponent:(0,i.jsx)(aG,{filters:x,initialFilters:g,setFilters:y}),activeFiltersComponent:(0,i.jsx)(eX,{filters:x}),children:(0,i.jsx)(E(),{callback:C,constructorType:"chart",Highcharts:W(),options:{chart:{type:"column"},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},title:{text:null},series:[{name:"%",data:b.map(function(e){return{name:(0,en.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Percentage"}}},ref:n})})}),aY=t(29815),aU=t(76600),aX=t(2305),aK=t(49501),a0=t(58594),a1=t(93750),a3=t(18586);function a2(){var e=(0,l.Z)([""]);return a2=function(){return e},e}var a9=function(e){var n={};return e.lg.map(function(e){return n=(0,Z.Z)((0,j.Z)({},n),(0,nS.Z)({},e.i,!0))}),n},a5=function(e){var n=e.newLayout,t=e.preLayout.lg.filter(function(e){return n[e.i]}),a=Object.keys(n).map(function(e){return{name:e,status:n[e]}}).filter(function(e){return!t.find(function(n){return n.i===e.name})}).filter(function(e){return e.status}).map(function(e){return{i:e.name,w:4,h:4,x:0,y:0,minW:4,maxW:12,minH:4,maxH:4}});return(0,aY.Z)(t).concat((0,aY.Z)(a))},a6=function(e){var n,t,a=e.layout,r=e.setLayout,d=e.onSuccess;e.category;var o=(0,a3.q)(),s=(0,eS.cI)({defaultValues:a9(a)}),l=s.control,c=s.errors,I=s.handleSubmit,p=s.register,v=null===(n=o.admin)||void 0===n?void 0:null===(t=n.meta)||void 0===t?void 0:t.availableCharts,g=function(e){r({lg:a5({newLayout:e,preLayout:a})}),d()},$={control:l,errors:c,register:p};return(0,i.jsx)(aU.Z,{id:"offCanvasForm",handleSubmit:I(g),children:(0,i.jsx)(i.Fragment,{children:(null!=v?v:[]).map(function(e){return(0,i.jsx)(aX.Z,{bordered:!0,style:{marginBottom:"5px"},children:(0,i.jsx)(a8,{children:(0,i.jsx)(u.Z,{children:(0,i.jsx)(m.Z,{md:12,children:(0,i.jsx)(aK.Z,{label:"",children:(0,i.jsx)(a0.Z,(0,Z.Z)((0,j.Z)({size:"xs"},$),{name:e.value,data:[{label:e.label,key:e.i,value:!0}]}))})})})})})})})})},a8=(0,c.ZP)(a1.Z).withConfig({displayName:"addChart__StyledCardBody",componentId:"sc-30423b1-0"})(a2());function a4(){var e=(0,l.Z)(["\n  align-self: flex-end;\n  margin-right: 5px;\n"]);return a4=function(){return e},e}a6.propTypes={layout:D.array.isRequired,setLayout:D.func.isRequired,onSuccess:D.func.isRequired,category:D.string.isRequired},a6.defaultProps={};var a7=(0,F.memo)(function(e){var n,t,d,o,s,l,c=e.category,I=e.locationId,p=e.supplierId,v=(0,S.WidthProvider)(S.Responsive),g=(0,F.useContext)(B.Z),$=(0,ew.x)().user,x=(0,F.useRef)([]),y=(0,a3.q)(),f=R.find(function(e){return e.default}),h=(0,Z.Z)((0,j.Z)({},z(f),(l=(s={accountId:$.accountId,accountType:$.accountType}).accountId,"admin"===s.accountType?{adminId:l}:{accountId:l})),{locationId:I,supplierId:p}),_=(0,F.useState)(h)[0],T=null===(n=y.admin)||void 0===n?void 0:null===(t=n.meta)||void 0===t?void 0:t.availableCharts,b=null===(d=y.admin)||void 0===d?void 0:null===(o=d.meta)||void 0===o?void 0:o.prevAvailableCharts;(0,F.useEffect)(function(){var e,n;!w(T).differenceWith(b,w.isEqual).isEmpty()&&(window.localStorage.removeItem("dashboardNewLayout_".concat(c)),M({lg:[]}))},[T,c,b]);var C,D=(0,F.useState)(JSON.parse(window.localStorage.getItem("dashboardNewLayout_".concat(c)))||a[c]),L=D[0],M=D[1],J=function(){window.localStorage.removeItem("dashboardNewLayout_".concat(c)),M(a[c])},N=(C=(0,A.Z)(function(e,n){return(0,P.__generator)(this,function(e){return window.localStorage.setItem("dashboardNewLayout_".concat(c),JSON.stringify(n)),[2]})}),function(e,n){return C.apply(this,arguments)}),O=function(e,n){var t=e.findIndex(function(e){return e.i===n.i}),a=null===(r=x.current[t])||void 0===r?void 0:r.chart;if(a){var r,i,d=null===(i=x.current[t])||void 0===i?void 0:i.container.current.parentElement,o=d.clientHeight,s=d.clientWidth;a.setSize(s,o)}},q=function(e){M(e),window.localStorage.setItem("dashboardNewLayout_".concat(c),JSON.stringify(e))},H=function(e,n){var t={lg:w.reject(L.lg,{i:n})};M(t),window.localStorage.setItem("dashboardNewLayout_".concat(c),JSON.stringify(t))},k=function(e){g.show({content:(0,i.jsx)(a6,{layout:L,setLayout:q,onSuccess:W,category:c}),submit:!0,title:"View charts list",width:"30%"})},W=function(){g.close()};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(u.Z,{children:[(0,i.jsxs)(m.Z,{md:6,children:[(0,i.jsx)(re,{context:"info",content:"Reset Layout",onClick:J,size:"sm"}),(0,i.jsx)(re,{context:"secondary",content:"Add charts",onClick:k,size:"sm"})]}),(0,i.jsx)(m.Z,{md:12,children:(0,i.jsx)(v,{breakpoints:{lg:1200,sm:768},cols:{lg:12,sm:6},className:"layout",draggableHandle:".dragHandle",layouts:L,onLayoutChange:function(e,n){return N(e,n)},onResizeStop:O,children:null==L?void 0:L.lg.filter(function(e){return r[e.i]}).map(function(e,n){var t=r[e.i];return(0,i.jsx)("div",{"data-key":e.i,children:(0,i.jsx)(t,{filters:_,ref:function(e){return x.current[n]=e},removeChart:function(e,n){return H(e,n)}})},e.i)})})})]})})},function(e,n){return!0}),re=(0,c.ZP)(L.Z).withConfig({displayName:"chart__StyledButton",componentId:"sc-f760cf16-0"})(a4());function rn(){var e=(0,l.Z)(["\n  a {\n    border: none;\n    color: ",";\n  }\n"]);return rn=function(){return e},e}a7.propTypes={category:D.string.isRequired,locationId:D.number,supplierId:D.number},a7.defaultProps={accountId:null,locationId:null};var rt=function(){var e=(0,d.useRouter)(),n=a[e.query.category]?e.query.category:"overview";return(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(m.Z,{md:1,children:(0,i.jsx)(ra,{children:(0,i.jsx)(I.Z,{className:"test",flush:!0,children:(0,i.jsx)(p.Z,{children:(0,i.jsx)(v.Z,{to:"/dashboard/data/business?category=overview",children:"Overview"})})})})}),(0,i.jsx)(m.Z,{md:11,children:(0,i.jsx)(a7,{category:n})},n)]})},ra=c.ZP.div.withConfig({displayName:"view__StyledMenu",componentId:"sc-b7a8f287-0"})(rn(),function(e){return e.theme.COLOUR.secondary}),rr=function(){var e,n,t=(0,a3.q)();return(0,ew.x)()?(null==t?void 0:null===(e=t.admin)||void 0===e?void 0:null===(n=e.modules)||void 0===n?void 0:n.dataCharts)?(0,i.jsx)(s.Z,{pageHeading:{heading:"Data - Charts"},View:(0,i.jsx)(rt,{})}):(o().push("/404"),null):(o().push("/account/sign-in"),null)}}},function(e){e.O(0,[3662,6898,2283,212,8890,2583,8579,6043,1838,1417,3776,3054,8500,1023,2797,6075,7145,1414,4972,9774,2888,179],function(){return e(e.s=5597)}),_N_E=e.O()}]);