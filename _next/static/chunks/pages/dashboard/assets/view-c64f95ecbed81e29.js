(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6872,4972],{23054:function(e,n,t){"use strict";var i=t(64836);n.Z=void 0;var o=i(t(64938)),r=t(85893);n.Z=(0,o.default)((0,r.jsx)("path",{d:"m13.7826 15.1719 2.1213-2.1213 5.9963 5.9962-2.1213 2.1213zM17.5 10c1.93 0 3.5-1.57 3.5-3.5 0-.58-.16-1.12-.41-1.6l-2.7 2.7-1.49-1.49 2.7-2.7c-.48-.25-1.02-.41-1.6-.41C15.57 3 14 4.57 14 6.5c0 .41.08.8.21 1.16l-1.85 1.85-1.78-1.78.71-.71-1.41-1.41L12 3.49c-1.17-1.17-3.07-1.17-4.24 0L4.22 7.03l1.41 1.41H2.81l-.71.71 3.54 3.54.71-.71V9.15l1.41 1.41.71-.71 1.78 1.78-7.41 7.41 2.12 2.12L16.34 9.79c.36.13.75.21 1.16.21"}),"Construction")},34193:function(e,n,t){"use strict";var i=t(64836);n.Z=void 0;var o=i(t(64938)),r=t(85893);n.Z=(0,o.default)((0,r.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined")},56693:function(e,n,t){"use strict";var i=t(64836);n.Z=void 0;var o=i(t(64938)),r=t(85893);n.Z=(0,o.default)((0,r.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image")},874:function(e,n,t){"use strict";var i=t(64836);n.Z=void 0;var o=i(t(64938)),r=t(85893);n.Z=(0,o.default)([(0,r.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7M7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9"},"0"),(0,r.jsx)("circle",{cx:"12",cy:"9",r:"2.5"},"1")],"LocationOnOutlined")},58951:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var i=t(63366),o=t(87462),r=t(67294),a=t(63961),s=t(58510),l=t(90948),c=t(14136),d=t(71657),u=t(15861),p=t(1977),h=t(8027);function m(e){return(0,h.ZP)("MuiDialogContentText",e)}(0,p.Z)("MuiDialogContentText",["root"]);var f=t(85893);let x=["children","className"],g=e=>{let{classes:n}=e,t=(0,s.Z)({root:["root"]},m,n);return(0,o.Z)({},n,t)},v=(0,l.ZP)(u.Z,{shouldForwardProp:e=>(0,c.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,n)=>n.root})({}),y=r.forwardRef(function(e,n){let t=(0,d.Z)({props:e,name:"MuiDialogContentText"}),{className:r}=t,s=(0,i.Z)(t,x),l=g(s);return(0,f.jsx)(v,(0,o.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:(0,a.Z)(l.root,r)},t,{classes:l}))});var b=y},37645:function(e,n,t){"use strict";var i=t(87462),o=t(63366),r=t(67294),a=t(63961),s=t(58510),l=t(15861),c=t(90948),d=t(71657),u=t(4472),p=t(34182),h=t(85893);let m=["className","id"],f=e=>{let{classes:n}=e;return(0,s.Z)({root:["root"]},u.a,n)},x=(0,c.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,n)=>n.root})({padding:"16px 24px",flex:"0 0 auto"}),g=r.forwardRef(function(e,n){let t=(0,d.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:l}=t,c=(0,o.Z)(t,m),u=f(t),{titleId:g=l}=r.useContext(p.Z);return(0,h.jsx)(x,(0,i.Z)({component:"h2",className:(0,a.Z)(u.root,s),ownerState:t,ref:n,variant:"h6",id:null!=l?l:g},c))});n.Z=g},75708:function(e,n,t){var i,o;"undefined"!=typeof self&&self,o=function(e,n){return function(e){function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0});var o=t(1),r=t.n(o),a=t(2),s=t.n(a),l="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,c=Object(o.forwardRef)(function(e,n){var t=Object(o.useRef)(),a=Object(o.useRef)();return l(function(){function n(){var n=e.highcharts||s.a,i=e.constructorType||"chart";n?n[i]?e.options?a.current=n[i](t.current,e.options,e.callback?e.callback:void 0):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(a.current){if(!1!==e.allowChartUpdate){if(!e.immutable&&a.current){var i,o;(i=a.current).update.apply(i,[e.options].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(o=e.updateArgs||[!0,!0])||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()))}else n()}}else n()}),l(function(){return function(){a.current&&(a.current.destroy(),a.current=null)}},[]),Object(o.useImperativeHandle)(n,function(){return{get chart(){return a.current},container:t}},[]),r.a.createElement("div",i({},e.containerProps,{ref:t}))});n.default=Object(o.memo)(c)},function(n,t){n.exports=e},function(e,t){e.exports=n}])},e.exports=o(t(67294),t(78840))},18393:function(e,n,t){"use strict";var i,o,r;r=function(e){function n(e,n,t,i){e.hasOwnProperty(n)||(e[n]=i.apply(null,t))}n(e=e?e._modules:{},"Extensions/FullScreen.js",[e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Core/Renderer/HTML/AST.js"],e["Core/Utilities.js"]],function(e,n,t,i){var o=i.addEvent;return i=function(){function e(e){this.chart=e,this.isOpen=!1,e=e.renderTo,this.browserProps||("function"==typeof e.requestFullscreen?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:e.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:e.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:e.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}return e.prototype.close=function(){var e=this.chart,n=e.options.chart;this.isOpen&&this.browserProps&&e.container.ownerDocument instanceof Document&&e.container.ownerDocument[this.browserProps.exitFullscreen](),this.unbindFullscreenEvent&&(this.unbindFullscreenEvent=this.unbindFullscreenEvent()),e.setSize(this.origWidth,this.origHeight,!1),this.origHeight=this.origWidth=void 0,n.width=this.origWidthOption,n.height=this.origHeightOption,this.origHeightOption=this.origWidthOption=void 0,this.isOpen=!1,this.setButtonText()},e.prototype.open=function(){var e=this,n=e.chart,t=n.options.chart;if(t&&(e.origWidthOption=t.width,e.origHeightOption=t.height),e.origWidth=n.chartWidth,e.origHeight=n.chartHeight,e.browserProps){var i=o(n.container.ownerDocument,e.browserProps.fullscreenChange,function(){e.isOpen?(e.isOpen=!1,e.close()):(n.setSize(null,null,!1),e.isOpen=!0,e.setButtonText())}),r=o(n,"destroy",i);e.unbindFullscreenEvent=function(){i(),r()},(t=n.renderTo[e.browserProps.requestFullscreen]())&&t.catch(function(){alert("Full screen is not supported inside a frame.")})}},e.prototype.setButtonText=function(){var e=this.chart,n=e.exportDivElements,i=e.options.exporting,o=i&&i.buttons&&i.buttons.contextButton.menuItems;e=e.options.lang,i&&i.menuItemDefinitions&&e&&e.exitFullscreen&&e.viewFullscreen&&o&&n&&(n=n[o.indexOf("viewFullscreen")])&&t.setElementHTML(n,this.isOpen?e.exitFullscreen:i.menuItemDefinitions.viewFullscreen.text||e.viewFullscreen)},e.prototype.toggle=function(){this.isOpen?this.close():this.open()},e}(),n.Fullscreen=i,o(e,"beforeRender",function(){this.fullscreen=new n.Fullscreen(this)}),n.Fullscreen}),n(e,"Mixins/Navigation.js",[],function(){return{initUpdate:function(e){e.navigation||(e.navigation={updates:[],update:function(e,n){this.updates.forEach(function(t){t.update.call(t.context,e,n)})}})},addUpdate:function(e,n){n.navigation||this.initUpdate(n),n.navigation.updates.push({update:e,context:n})}}}),n(e,"Extensions/Exporting/ExportingDefaults.js",[e["Core/Globals.js"],e["Core/Color/Palette.js"]],function(e,n){return{exporting:{type:"image/png",url:"https://export.highcharts.com/",printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:"viewFullscreen printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24,symbolFill:n.neutralColor60,symbolStroke:n.neutralColor60,symbolStrokeWidth:3,theme:{padding:5}},menuStyle:{border:"1px solid "+n.neutralColor40,background:n.backgroundColor,padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",color:n.neutralColor80,background:"none",fontSize:e.isTouchDevice?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:n.highlightColor80,color:n.backgroundColor}}}}),n(e,"Extensions/Exporting/ExportingSymbols.js",[],function(){var e;return function(e){function n(e,n,t,i){return[["M",e,n+2.5],["L",e+t,n+2.5],["M",e,n+i/2+.5],["L",e+t,n+i/2+.5],["M",e,n+i-1.5],["L",e+t,n+i-1.5]]}function t(e,n,t,i){return e=i/3-2,i=(i=[]).concat(this.circle(t-e,n,e,e),this.circle(t-e,n+e+4,e,e),this.circle(t-e,n+2*(e+4),e,e))}var i=[];e.compose=function(e){-1===i.indexOf(e)&&(i.push(e),(e=e.prototype.symbols).menu=n,e.menuball=t.bind(e))}}(e||(e={})),e}),n(e,"Core/HttpUtilities.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(e,n){var t=e.doc,i=n.createElement,o=n.discardElement,r=n.merge,a=n.objectEach,s={ajax:function(e){var n=r(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},e);e={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"};var t=new XMLHttpRequest;if(!n.url)return!1;t.open(n.type.toUpperCase(),n.url,!0),n.headers["Content-Type"]||t.setRequestHeader("Content-Type",e[n.dataType]||e.text),a(n.headers,function(e,n){t.setRequestHeader(n,e)}),t.onreadystatechange=function(){if(4===t.readyState){if(200===t.status){var e=t.responseText;if("json"===n.dataType)try{e=JSON.parse(e)}catch(i){n.error&&n.error(t,i);return}return n.success&&n.success(e)}n.error&&n.error(t,t.responseText)}};try{n.data=JSON.stringify(n.data)}catch(i){}t.send(n.data||!0)},getJSON:function(e,n){s.ajax({url:e,success:n,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(e,n,s){var l=i("form",r({method:"post",action:e,enctype:"multipart/form-data"},s),{display:"none"},t.body);a(n,function(e,n){i("input",{type:"hidden",name:n,value:e},null,l)}),l.submit(),o(l)}};return s}),n(e,"Extensions/Exporting/Exporting.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Chart/Chart.js"],e["Mixins/Navigation.js"],e["Core/DefaultOptions.js"],e["Extensions/Exporting/ExportingDefaults.js"],e["Extensions/Exporting/ExportingSymbols.js"],e["Core/Globals.js"],e["Core/HttpUtilities.js"],e["Core/Color/Palette.js"],e["Core/Utilities.js"]],function(e,n,t,i,o,r,a,s,l,c){i=i.defaultOptions;var d,u=a.doc,p=a.win,h=c.addEvent,m=c.css,f=c.createElement,x=c.discardElement,g=c.extend,v=c.find,y=c.fireEvent,b=c.isObject,Z=c.merge,j=c.objectEach,w=c.pick,C=c.removeEvent,I=c.uniqueKey;return function(i){function o(e){var n=this,t=n.renderer,i=Z(n.options.navigation.buttonOptions,e),o=i.onclick,r=i.menuItems,a=i.symbolSize||12;if(n.btnCount||(n.btnCount=0),n.exportDivElements||(n.exportDivElements=[],n.exportSVGElements=[]),!1!==i.enabled&&i.theme){var s,c=i.theme,d=c.states,u=d&&d.hover;d=d&&d.select,n.styledMode||(c.fill=w(c.fill,l.backgroundColor),c.stroke=w(c.stroke,"none")),delete c.states,o?s=function(e){e&&e.stopPropagation(),o.call(n,e)}:r&&(s=function(e){e&&e.stopPropagation(),n.contextMenu(p.menuClassName,r,p.translateX,p.translateY,p.width,p.height,p),p.setState(2)}),i.text&&i.symbol?c.paddingLeft=w(c.paddingLeft,30):i.text||g(c,{width:i.width,height:i.height,padding:0}),n.styledMode||(c["stroke-linecap"]="round",c.fill=w(c.fill,l.backgroundColor),c.stroke=w(c.stroke,"none"));var p=t.button(i.text,0,0,s,c,u,d).addClass(e.className).attr({title:w(n.options.lang[i._titleKey||i.titleKey],"")});if(p.menuClassName=e.menuClassName||"highcharts-menu-"+n.btnCount++,i.symbol){var h=t.symbol(i.symbol,i.symbolX-a/2,i.symbolY-a/2,a,a,{width:a,height:a}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(p);n.styledMode||h.attr({stroke:i.symbolStroke,fill:i.symbolFill,"stroke-width":i.symbolStrokeWidth||1})}p.add(n.exportingGroup).align(g(i,{width:p.width,x:w(i.x,n.buttonOffset)}),!0,"spacingBox"),n.buttonOffset+=(p.width+i.buttonSpacing)*("right"===i.align?-1:1),n.exportSVGElements.push(p,h)}}function d(){if(this.printReverseInfo){var e=this.printReverseInfo,n=e.childNodes,t=e.origDisplay;e=e.resetParams,this.moveContainers(this.renderTo),[].forEach.call(n,function(e,n){1===e.nodeType&&(e.style.display=t[n]||"")}),this.isPrinting=!1,e&&this.setSize.apply(this,e),delete this.printReverseInfo,B=void 0,y(this,"afterPrint")}}function S(){var e=u.body,n=this.options.exporting.printMaxWidth,t={childNodes:e.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,this.pointer.reset(null,0),y(this,"beforePrint"),n&&this.chartWidth>n&&(t.resetParams=[this.options.chart.width,void 0,!1],this.setSize(n,void 0,!1)),[].forEach.call(t.childNodes,function(e,n){1===e.nodeType&&(t.origDisplay[n]=e.style.display,e.style.display="none")}),this.moveContainers(e),this.printReverseInfo=t}function q(e){e.renderExporting(),h(e,"redraw",e.renderExporting),h(e,"destroy",e.destroyExport)}function P(n,t,i,o,r,a,s){var l=this,d=l.options.navigation,x=l.chartWidth,v=l.chartHeight,Z="cache-"+n,j=Math.max(r,a),w=l[Z];if(!w){l.exportContextMenu=l[Z]=w=f("div",{className:n},{position:"absolute",zIndex:1e3,padding:j+"px",pointerEvents:"auto"},l.fixedDiv||l.container);var C=f("ul",{className:"highcharts-menu"},{listStyle:"none",margin:0,padding:0},w);l.styledMode||m(C,g({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},d.menuStyle)),w.hideMenu=function(){m(w,{display:"none"}),s&&s.setState(0),l.openMenu=!1,m(l.renderTo,{overflow:"hidden"}),m(l.container,{overflow:"hidden"}),c.clearTimeout(w.hideTimer),y(l,"exportMenuHidden")},l.exportEvents.push(h(w,"mouseleave",function(){w.hideTimer=p.setTimeout(w.hideMenu,500)}),h(w,"mouseenter",function(){c.clearTimeout(w.hideTimer)}),h(u,"mouseup",function(e){l.pointer.inClass(e.target,n)||w.hideMenu()}),h(w,"click",function(){l.openMenu&&w.hideMenu()})),t.forEach(function(n){if("string"==typeof n&&(n=l.options.exporting.menuItemDefinitions[n]),b(n,!0)){var t=void 0;n.separator?t=f("hr",void 0,void 0,C):("viewData"===n.textKey&&l.isDataTableVisible&&(n.textKey="hideData"),t=f("li",{className:"highcharts-menu-item",onclick:function(e){e&&e.stopPropagation(),w.hideMenu(),n.onclick&&n.onclick.apply(l,arguments)}},void 0,C),e.setElementHTML(t,n.text||l.options.lang[n.textKey]),l.styledMode||(t.onmouseover=function(){m(this,d.menuItemHoverStyle)},t.onmouseout=function(){m(this,d.menuItemStyle)},m(t,g({cursor:"pointer"},d.menuItemStyle)))),l.exportDivElements.push(t)}}),l.exportDivElements.push(C,w),l.exportMenuWidth=w.offsetWidth,l.exportMenuHeight=w.offsetHeight}t={display:"block"},i+l.exportMenuWidth>x?t.right=x-i-r-j+"px":t.left=i-j+"px",o+a+l.exportMenuHeight>v&&"top"!==s.alignOptions.verticalAlign?t.bottom=v-o-j+"px":t.top=o+a-j+"px",m(w,t),m(l.renderTo,{overflow:""}),m(l.container,{overflow:""}),l.openMenu=!0,y(l,"exportMenuShown")}function $(e){var n,t=e?e.target:this,i=t.exportSVGElements,o=t.exportDivElements;e=t.exportEvents,i&&(i.forEach(function(e,o){e&&(e.onclick=e.ontouchstart=null,t[n="cache-"+e.menuClassName]&&delete t[n],i[o]=e.destroy())}),i.length=0),t.exportingGroup&&(t.exportingGroup.destroy(),delete t.exportingGroup),o&&(o.forEach(function(e,n){e&&(c.clearTimeout(e.hideTimer),C(e,"mouseleave"),o[n]=e.onmouseout=e.onmouseover=e.ontouchstart=e.onclick=null,x(e))}),o.length=0),e&&(e.forEach(function(e){e()}),e.length=0)}function _(e,n){n=this.getSVGForExport(e,n),e=Z(this.options.exporting,e),s.post(e.url,{filename:e.filename?e.filename.replace(/\//g,"-"):this.getFilename(),type:e.type,width:e.width||0,scale:e.scale,svg:n},e.formAttributes)}function M(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function k(){var e=this.userOptions.title&&this.userOptions.title.text,n=this.options.exporting.filename;return n?n.replace(/\//g,"-"):("string"==typeof e&&(n=e.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!n||5>n.length)&&(n="chart"),n)}function E(e){var t,i=Z(this.options,e);i.plotOptions=Z(this.userOptions.plotOptions,e&&e.plotOptions),i.time=Z(this.userOptions.time,e&&e.time);var o=f("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},u.body),r=this.renderTo.style.width,a=this.renderTo.style.height;r=i.exporting.sourceWidth||i.chart.width||/px$/.test(r)&&parseInt(r,10)||(i.isGantt?800:600),a=i.exporting.sourceHeight||i.chart.height||/px$/.test(a)&&parseInt(a,10)||400,g(i.chart,{animation:!1,renderTo:o,forExport:!0,renderer:"SVGRenderer",width:r,height:a}),i.exporting.enabled=!1,delete i.data,i.series=[],this.series.forEach(function(e){(t=Z(e.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:e.visible})).isInternal||i.series.push(t)});var s={};this.axes.forEach(function(e){e.userOptions.internalKey||(e.userOptions.internalKey=I()),e.options.isInternal||(s[e.coll]||(s[e.coll]=!0,i[e.coll]=[]),i[e.coll].push(Z(e.userOptions,{visible:e.visible})))});var l=new n(i,this.callback);return e&&["xAxis","yAxis","series"].forEach(function(n){var t={};e[n]&&(t[n]=e[n],l.update(t))}),this.axes.forEach(function(e){var n=v(l.axes,function(n){return n.options.internalKey===e.userOptions.internalKey}),t=e.getExtremes(),i=t.userMin;t=t.userMax,n&&(void 0!==i&&i!==n.min||void 0!==t&&t!==n.max)&&n.setExtremes(i,t,!0,!1)}),a=l.getChartHTML(),y(this,"getSVG",{chartCopy:l}),a=this.sanitizeSVG(a,i),i=null,l.destroy(),x(o),a}function T(e,n){var t=this.options.exporting;return this.getSVG(Z({chart:{borderRadius:0}},t.chartOptions,n,{exporting:{sourceWidth:e&&e.sourceWidth||t.sourceWidth,sourceHeight:e&&e.sourceHeight||t.sourceHeight}}))}function A(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()})}function R(){var e,n=i.inlineWhitelist,t={},o=u.createElement("iframe");m(o,{width:"1px",height:"1px",visibility:"hidden"}),u.body.appendChild(o);var r=o.contentWindow.document;r.open(),r.write('<svg xmlns="http://www.w3.org/2000/svg"></svg>'),r.close(),function i(o){function s(e,i){if(l=c=!1,n.length){for(d=n.length;d--&&!c;)c=n[d].test(i);l=!c}for("transform"===i&&"none"===e&&(l=!0),d=L.length;d--&&!l;)l=L[d].test(i)||"function"==typeof e;l||m[i]===e&&"svg"!==o.nodeName||t[o.nodeName][i]===e||(H&&-1===H.indexOf(i)?u+=A(i)+":"+e+";":e&&o.setAttribute(A(i),e))}var l,c,d,u="";if(1===o.nodeType&&-1===W.indexOf(o.nodeName)){var h=p.getComputedStyle(o,null),m="svg"===o.nodeName?{}:p.getComputedStyle(o.parentNode,null);if(!t[o.nodeName]){e=r.getElementsByTagName("svg")[0];var f=r.createElementNS(o.namespaceURI,o.nodeName);e.appendChild(f),t[o.nodeName]=Z(p.getComputedStyle(f,null)),"text"===o.nodeName&&delete t.text.fill,e.removeChild(f)}if(a.isFirefox||a.isMS)for(var x in h)s(h[x],x);else j(h,s);u&&(h=o.getAttribute("style"),o.setAttribute("style",(h?h+";":"")+u)),"svg"===o.nodeName&&o.setAttribute("stroke-width","1px"),"text"!==o.nodeName&&[].forEach.call(o.children||o.childNodes,i)}}(this.container.querySelector("svg")),e.parentNode.removeChild(e),o.parentNode.removeChild(o)}function D(e){(this.fixedDiv?[this.fixedDiv,this.scrollingContainer]:[this.container]).forEach(function(n){e.appendChild(n)})}function F(){var e=this;e.exporting={update:function(n,t){e.isDirtyExporting=!0,Z(!0,e.options.exporting,n),w(t,!0)&&e.redraw()}},t.addUpdate(function(n,t){e.isDirtyExporting=!0,Z(!0,e.options.navigation,n),w(t,!0)&&e.redraw()},e)}function O(){var e=this;e.isPrinting||(B=e,a.isSafari||e.beforePrint(),setTimeout(function(){p.focus(),p.print(),a.isSafari||setTimeout(function(){e.afterPrint()},1e3)},1))}function N(){var e=this,n=e.options.exporting,t=n.buttons,i=e.isDirtyExporting||!e.exportSVGElements;e.buttonOffset=0,e.isDirtyExporting&&e.destroyExport(),i&&!1!==n.enabled&&(e.exportEvents=[],e.exportingGroup=e.exportingGroup||e.renderer.g("exporting-group").attr({zIndex:3}).add(),j(t,function(n){e.addButton(n)}),e.isDirtyExporting=!1)}function G(e,n){var t=e.indexOf("</svg>")+6,i=e.substr(t);return e=e.substr(0,t),n&&n.exporting&&n.exporting.allowHTML&&i&&(i='<foreignObject x="0" y="0" width="'+n.chart.width+'" height="'+n.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+i.replace(/(<(?:img|br).*?(?=>))>/g,"$1 />")+"</body></foreignObject>",e=e.replace("</svg>",i+"</svg>")),e=e.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;);?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (|NS[0-9]+:)href=/g," xlink:href=").replace(/\n/," ").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xa0").replace(/&shy;/g,"\xad"),this.ieSanitizeSVG&&(e=this.ieSanitizeSVG(e)),e}var z=[],L=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/],H="fill stroke strokeLinecap strokeLinejoin strokeWidth textAnchor x y".split(" ");i.inlineWhitelist=[];var B,W=["clipPath","defs","desc"];i.compose=function(e,n){r.compose(n),-1===z.indexOf(e)&&(z.push(e),(n=e.prototype).afterPrint=d,n.exportChart=_,n.inlineStyles=R,n.print=O,n.sanitizeSVG=G,n.getChartHTML=M,n.getSVG=E,n.getSVGForExport=T,n.getFilename=k,n.moveContainers=D,n.beforePrint=S,n.contextMenu=P,n.addButton=o,n.destroyExport=$,n.renderExporting=N,n.callbacks.push(q),h(e,"init",F),a.isSafari&&a.win.matchMedia("print").addListener(function(e){B&&(e.matches?B.beforePrint():B.afterPrint())}))}}(d||(d={})),i.exporting=Z(o.exporting,i.exporting),i.lang=Z(o.lang,i.lang),i.navigation=Z(o.navigation,i.navigation),d}),n(e,"masters/modules/exporting.src.js",[e["Core/Globals.js"],e["Extensions/Exporting/Exporting.js"],e["Core/HttpUtilities.js"]],function(e,n,t){e.HttpUtilities=t,e.ajax=t.ajax,e.getJSON=t.getJSON,e.post=t.post,n.compose(e.Chart,e.Renderer)})},e.exports?(r.default=r,e.exports=r):void 0!==(o=(function(e){return r(e),r.Highcharts=e,r}).apply(n,[t(78840)]))&&(e.exports=o)},30845:function(e,n){"use strict";var t=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function i(e,n){return!!(e===n||t(e)&&t(n))}function o(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!i(e[t],n[t]))return!1;return!0}n.Z=function(e,n){void 0===n&&(n=o);var t,i,r=[],a=!1;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&t===this&&n(o,r)||(i=e.apply(this,o),a=!0,t=this,r=o),i}}},38727:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/assets/view",function(){return t(26166)}])},5336:function(e,n,t){"use strict";t.d(n,{C:function(){return _}});var i=t(85893),o=t(67294),r=t(45697),a=t.n(r),s=t(93946),l=t(25464),c=t(18972),d=t(57976),u=t(73890),p=t(69008),h=t(41687),m=t(60888),f=t(40535),x=t(63441),g=t(41733),v=t(77957),y=t(2548),b=t(24519),Z=t(2391),j=t(69308),w=t(79369),C=t(22961),I=t(28201),S=t(51233),q=t(15861),P={add:(0,i.jsx)(h.Z,{}),archive:(0,i.jsx)(u.Z,{}),avatar:(0,i.jsx)(I.Z,{}),check:(0,i.jsx)(m.Z,{}),delete:(0,i.jsx)(g.Z,{}),description:(0,i.jsx)(f.Z,{}),download:(0,i.jsx)(x.Z,{}),info:(0,i.jsx)(y.Z,{}),edit:(0,i.jsx)(v.Z,{}),location:(0,i.jsx)(j.Z,{}),unarchive:(0,i.jsx)(p.Z,{}),uploadFile:(0,i.jsx)(b.Z,{}),receipt:(0,i.jsx)(Z.Z,{}),visibility:(0,i.jsx)(C.Z,{})},$={default:(0,i.jsx)(d.Z,{}),defaultHoriz:(0,i.jsx)(w.Z,{}),description:(0,i.jsx)(f.Z,{})},_=function(e){var n=e.actionsData,t=e.icon,r=e.row,a=e.disabled,d=(0,o.useState)(null),u=d[0],p=d[1],h=function(e){e.stopPropagation(),p(e.currentTarget)},m=function(){p(null)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:a,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:h,children:$[t]}),(0,i.jsx)(l.Z,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:m,PaperProps:{sx:{borderRadius:2}},children:n(r).map(function(e,n){return(0,i.jsx)(c.Z,{disabled:e.disabled,onClick:function(n){e.onClick(n),m()},sx:{pl:3,pr:4},children:(0,i.jsxs)(S.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==P?void 0:P[e.icon])||null,(0,i.jsx)(q.Z,{children:e.tooltip})]})},n)})})]})};_.propTypes={actionsData:a().func.isRequired,icon:a().oneOf(["default","description"]),row:a().any.isRequired,disabled:a().bool},_.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},78232:function(e,n,t){"use strict";t.d(n,{F:function(){return q}});var i=t(14924),o=t(26042),r=t(69396),a=t(85893),s=t(45697),l=t.n(s),c=t(10166),d=t(80482),u=t(23776),p=t(98456),h=t(16143),m=t(50135),f=t(99534),x=t(29815),g=t(74061),v=t(6498),y=t(75438),b=t(15861),Z=t(61730),j=t(67294),w=(0,j.createContext)({}),C=(0,j.forwardRef)(function(e,n){var t=(0,j.useContext)(w);return(0,a.jsx)("div",(0,o.Z)({ref:n},e,t))}),I=(0,j.forwardRef)(function(e,n){var t=e.children,i=(0,f.Z)(e,["children"]),o=[];t.forEach(function(e){o.push(e),o.push.apply(o,(0,x.Z)(e.children||[]))});var r,s,l=(0,v.u)(),c=(0,Z.Z)(l.breakpoints.up("sm"),{noSsr:!0}),d=o.length,u=c?36:48,p=function(e){return e.hasOwnProperty("group")?48:u},h=(s=(0,j.useRef)(null),(0,j.useEffect)(function(){null!=s.current&&s.current.resetAfterIndex(0,!0)},[d]),s);return(0,a.jsx)("div",{ref:n,children:(0,a.jsx)(w.Provider,{value:i,children:(0,a.jsx)(g.S_,{itemData:o,height:(d>8?8*u:o.map(p).reduce(function(e,n){return e+n},0))+16,width:"100%",ref:h,outerElementType:C,innerElementType:"ul",itemSize:function(e){return p(o[e])},overscanCount:5,itemCount:d,children:S})})})});function S(e){var n=e.data,t=e.index,i=e.style,s=n[t],l=(0,r.Z)((0,o.Z)({},i),{top:i.top+8});return s.hasOwnProperty("group")?(0,a.jsx)(y.Z,{component:"div",style:l,children:s.group},s.key):(0,a.jsx)(b.Z,(0,r.Z)((0,o.Z)({component:"li"},s[0]),{noWrap:!0,style:l,children:s[1].label}))}var q=function(e){var n=e.label,t=e.loading,i=e.placeholder,s=e.error,l=e.helperText,c=e.inputProps;return(0,a.jsx)($,(0,r.Z)((0,o.Z)({},e),{disableListWrap:!0,PopperComponent:P,ListboxComponent:I,renderInput:function(e){return(0,a.jsx)(m.Z,(0,r.Z)((0,o.Z)({},e,c),{error:s,helperText:l,label:n,placeholder:i,color:"secondary",variant:"standard",InputProps:(0,r.Z)((0,o.Z)({},e.InputProps,(null==c?void 0:c.InputProps)||{}),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(p.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},renderOption:function(e,n,t){return[e,n,t.index]},renderGroup:function(e){return e}}))};q.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1},q.propTypes={value:l().shape({value:l().any,label:l().string}),onChange:l().func,label:l().string,loading:l().bool,onOpen:l().func,options:l().arrayOf(l().shape({value:l().any,label:l().string})),inputProps:l().object,withoutSelectIcon:l().bool,inputValue:l().string,onInputChange:l().func};var P=(0,c.Z)(h.Z)((0,i.Z)({zIndex:"12000 !important"},"& .".concat(d.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),$=(0,c.Z)(u.Z)(function(e){var n=e.withoutSelectIcon;return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":(0,o.Z)({},n&&{display:"none"})}}}})},86267:function(e,n,t){"use strict";t.d(n,{G:function(){return O}});var i=t(26042),o=t(69396),r=t(85893),a=t(45697),s=t.n(a),l=t(6388),c=t(52824),d=t(15033),u=t(23892),p=t(39087),h=t(76256),m=t(40826),f=function(e,n){var t=function(){return(0,r.jsx)(m.Z,{context:"success",icon:"check",size:"sm",title:"Yes"})},i=function(){return(0,r.jsx)(m.Z,{context:"warning",icon:"times",size:"sm",title:"No"})},o=function(){return(0,r.jsx)(m.Z,{context:"dark",icon:"minus",size:"sm",title:"Unavailable"})};return"image"===e?(null==n?void 0:n.thumbnails)&&(null==n?void 0:n.thumbnails.length)?t:i:o},x=t(20705),g=t(2845),v=t(86532),y=t(22797),b=t(38895),Z=t(5616),j=t(11057),w=t(51233),C=t(21023),I=t(15861),S=t(14924),q=t(70872),P=t(58886),$=t(90948),_=t(67294),M=t(77314),k=(0,t(42850).bH)(M.ZP),E=function(e){var n=e.images,t=e.showPagination,o=e.height,a=(0,_.useState)(0),s=a[0],l=a[1],c=function(e){l(e)};return(0,r.jsxs)(w.Z,{width:"100%",alignItems:"center",children:[(0,r.jsx)(k,{index:s,onChangeIndex:c,enableMouseEvents:!0,interval:1e4,children:n.map(function(e){return(0,r.jsx)(Z.Z,{component:"img",sx:{height:o,display:"block",overflow:"hidden",width:"100%",objectFit:"cover"},src:e.filename,alt:e.caption},e.caption)})}),t&&n.length>1&&(0,r.jsx)(T,{page:s+1,count:n.length,onChange:function(e,n){return c(n-1)},variant:"outlined",shape:"rounded",renderItem:function(e){return(0,r.jsx)(P.Z,(0,i.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})]})};E.defaultProps={images:[],showPagination:!0},E.propTypes={height:s().oneOfType([s().string,s().number]),images:s().arrayOf(s().shape({caption:s().string,filename:s().string.isRequired}).isRequired).isRequired,showPagination:s().bool};var T=(0,$.ZP)(q.Z)(function(e){e.hidePrevButton,e.hideNextButton;var n,t=e.theme;return n={},(0,S.Z)(n,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,S.Z)(n,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,S.Z)(n,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,S.Z)(n,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,S.Z)(n,"& button.Mui-selected",{color:t.palette.white.main,backgroundColor:t.palette.secondary.main}),n}),A=t(27434),R=t(5336),D=t(12547),F=t(64872),O=function(e){var n=e.carousel,t=e.category,a=e.data,s=e.entity,m=e.entityId,S=e.filters,q=e.listView,P=e.mediaMeta,$=e.onMediaAdd,_=e.onMediaRemove,M=e.showActionButtons,k=e.showEntityColumn,T=e.showItemActions,O=e.title,N=e.type,G=e.expanded,z=e.onChangeExpanded,L=e.hideExpandIcon,H=e.mediaFormProps,B=e.offCanvasProps,W=e.onlySingleMedia,U=e.elevation,V=e.accordionSx,Y=e.refetch,K=(0,x.x)({filters:S}),J=K.initialData,Q=K.ref,X=(0,g.x)(),ee=X.hasRole,en=X.user,et=(0,F.a)(),ei=(0,l.aM)(c.t,{variables:(0,o.Z)((0,i.Z)({},J),{entity:s,entityId:m,category:t,adminId:en.adminId,meta:P})}),eo=ei.data,er=void 0===eo?{items:[],meta:{aggregate:{totalCount:0}}}:eo,ea=er.items,es=er.meta,el=ei.loading,ec=ei.refetch,ed=function(e){et.close(),a.length||ec();var n=e.map(function(e){return(0,o.Z)((0,i.Z)({},e),{link:"".concat("https://cleverly-staging-media.s3.eu-west-2.amazonaws.com","/").concat(e.filename)})});$&&$(n),Y&&Y()},eu=function(e){et.close(),a.length||ec(),_&&_(e),Y&&Y()},ep=function(e){e.stopPropagation(),et.show((0,i.Z)({content:(0,r.jsx)(h.z,(0,i.Z)({accept:"image/*",adminId:en.adminId,category:t,entity:s,entityId:m,expiryShow:!1,mediaMeta:P,multiple:!0,onSuccess:ed,type:"image"},H)),title:"Upload Photos"},B))},eh=function(e){e.stopPropagation(),et.show((0,i.Z)({content:(0,r.jsx)(h.z,(0,i.Z)({accept:".pdf, .doc, .docx, .xlsx",adminId:en.adminId,category:t,entity:s,entityId:m,expiryShow:!1,mediaMeta:P,onSuccess:ed,type:"document"},H)),title:"Upload Documents"},B))},em=function(e){et.show({content:(0,r.jsx)(u.d,{mediaId:e.data.id,onSuccess:eu}),submit:!1,title:"Delete Media"})},ef=function(e){et.show({content:(0,r.jsx)(p.z,{media:e.data,toggleShow:et.close}),title:"Media Details",width:"50%"})},ex=function(e){return[{context:"primary",icon:"info",onClick:function(n){return ef(e)},tooltip:"Details"},{context:"danger",icon:"delete",onClick:function(n){return em(e)},tooltip:"Delete"}]},eg=[{field:"file",headerName:"File",flex:1,sortable:!1,renderCell:function(e){var n=e.row,t=e.value;return(0,r.jsx)(D.r,{color:"secondary",onClick:function(e){e.preventDefault(),window.open("".concat("https://cleverly-staging-media.s3.eu-west-2.amazonaws.com","/").concat(n.filename))},children:t})}},{field:"visibility",headerName:"Visible to",flex:1,sortable:!1},{hide:!k,field:"entity",headerName:"Entity",flex:1,sortable:!1},{field:"authority",headerName:"",width:50,sortable:!1,renderCell:function(e){var n=e.value;return(0,r.jsx)(r.Fragment,{children:(null==n?void 0:n.adminOnly)&&(0,r.jsx)(C.Z,{title:"Admin user only",children:(0,r.jsx)(Z.Z,{component:"img",alt:"Admin Only",src:"/messaging/admin-only.svg",sx:{height:"24px"}})})})}},{field:"uploaded",headerName:"Uploaded by",flex:1,sortable:!1},{hide:!q,field:"thumbnails",headerName:"Thumbnails",flex:1,sortable:!1,renderCell:function(e){var n=e.value;return"function"==typeof n?n():n}},{hide:!T,field:"actions",headerName:"",width:50,sortable:!1,renderCell:function(e){var n=e.row;return ee("admin")?(0,r.jsx)(R.C,{actionsData:ex,row:n}):en.id===n.userId?(0,r.jsx)(R.C,{actionsData:ex,row:n}):null}}],ev=[],ey=ea.filter(function(e){var n=e.item;return(null==n?void 0:n.visibility)&&ee(null==n?void 0:n.visibility)}).map(function(e){var n=e.entity,t=e.entityId,i=e.id,o=e.item,r=o.caption,a=o.filename,s=o.meta,l=o.name,c=o.type,d=o.user,u=o.visibility;return{data:o,id:i,userId:null==d?void 0:d.id,filename:a,visibility:u.join(", "),file:r||l||a,entity:n&&"".concat(n,"#").concat(t),authority:s,uploaded:"".concat(null==d?void 0:d.nameFirst," ").concat(null==d?void 0:d.nameLast),thumbnails:f(c,s),actions:""}}),eb=(ea.filter(function(e){var n=e.item;return(null==n?void 0:n.visibility)&&ee(null==n?void 0:n.visibility)}).forEach(function(e){var n=e.item,t=n.caption,i=n.filename;"image"===n.type&&ev.push({caption:t,filename:"".concat("https://cleverly-staging-media.s3.eu-west-2.amazonaws.com","/").concat(i)})}),ev),eZ=eb.length;return(0,r.jsxs)(v.Z,{elevation:U,expanded:G,onChange:z,sx:V,children:[(0,r.jsx)(b.Z,(0,o.Z)((0,i.Z)({},L?{}:{expandIcon:(0,r.jsx)(A.Z,{})}),{children:(0,r.jsx)(I.Z,{variant:"h6",children:O})})),(0,r.jsxs)(y.Z,{children:[n&&eZ>0&&(0,r.jsx)(E,{height:"200px",images:eb}),(0,r.jsx)(d.i,{columns:eg,rows:ey,loading:el,meta:es,ref:Q,refetch:ec,columnVisibilityModel:{entity:k,thumbnails:q,actions:T}}),M&&!(W&&ey.length>0)&&(0,r.jsxs)(w.Z,{direction:"row",justifyContent:"center",spacing:2,mt:2,children:[(!N||"document"===N)&&(0,r.jsx)(j.Z,{variant:"contained",color:"secondary",onClick:eh,children:"Add Document"}),(!N||"image"===N||"avatar"===N)&&(0,r.jsxs)(j.Z,{variant:"contained",color:"secondary",onClick:ep,children:["Add ",N?"".concat(N.charAt(0).toUpperCase()).concat(N.slice(1)):"Image"]})]})]})]})};O.propTypes={carousel:s().bool,category:s().string,data:s().array,entity:s().string,entityId:s().number,filters:s().object,listView:s().bool,mediaMeta:s().object,onMediaAdd:s().func,onMediaRemove:s().func,showActionButtons:s().bool,showEntityColumn:s().bool,showItemActions:s().bool,title:s().string,type:s().string,expanded:s().bool,onChangeExpanded:s().func,hideExpandIcon:s().bool,mediaFormProps:s().object,offCanvasProps:s().object,onlySingleMedia:s().bool,elevation:s().number,accordionSx:s().object,refetch:s().func},O.defaultProps={carousel:!0,data:[],filters:{},listView:!1,mediaMeta:null,showActionButtons:!0,showEntityColumn:!1,showItemActions:!0,title:"Media",type:null,onChangeExpanded:function(){},mediaFormProps:{},offCanvasProps:{},category:"media",onlySingleMedia:!1,elevation:1,accordionSx:{},refetch:function(){}}},35418:function(e,n,t){"use strict";t.d(n,{G:function(){return E}});var i=t(26042),o=t(69396),r=t(7297),a=t(85893),s=t(67294),l=t(45697),c=t(6388),d=t(52824),u=t(10367),p=t(78289),h=t(41564),m=t(34953),f=t(62466),x=t(68956),g=t(73373),v=t(11585),y=t(28733),b=t(55377),Z=t(16551),j=t(77439),w=t(74297),C=t(23892),I=t(39087),S=t(76256),q=t(75795),P=t(91272),$=t(20705),_=t(2845);function M(){var e=(0,r.Z)(["\n  width: 24px;\n"]);return M=function(){return e},e}function k(){var e=(0,r.Z)(["\n  border: 1px solid #eee;\n"]);return k=function(){return e},e}var E=function(e){var n=e.carousel,t=e.category,r=e.children,l=e.data,u=(e.details,e.entity),M=e.entityId,k=e.filters,E=(e.limit,e.listView),R=e.mediaMeta,D=e.onMediaAdd,F=e.onMediaRemove,O=(e.pagination,e.showActionButtons),N=e.showEntityColumn,G=e.showItemActions,z=e.summary,L=e.type,H=(0,$.x)({filters:k}),B=H.initialData,W=H.ref,U=(0,_.x)(),V=U.hasRole,Y=U.user,K=(0,s.useContext)(p.Z),J=(0,c.aM)(d.t,{variables:(0,o.Z)((0,i.Z)({},B),{entity:u,entityId:M,category:t,adminId:Y.adminId,meta:R})}),Q=J.data,X=void 0===Q?{items:[],meta:{aggregate:{totalCount:0}}}:Q,ee=X.items,en=X.meta,et=J.loading,ei=J.refetch,eo=function(e){K.close(),l.length||ei(),D&&D(e)},er=function(e){K.close(),l.length||ei(),F&&F(e)},ea=function(e){e.stopPropagation(),K.show({content:(0,a.jsx)(S.z,{accept:"image/*",adminId:Y.adminId,category:t,entity:u,entityId:M,expiryShow:!1,mediaMeta:R,multiple:!0,onSuccess:eo,type:"image"}),title:"Upload Photos"})},es=function(e){e.stopPropagation(),K.show({content:(0,a.jsx)(S.z,{accept:".pdf, .doc, .docx, .xlsx",adminId:Y.adminId,category:t,entity:u,entityId:M,expiryShow:!1,mediaMeta:R,onSuccess:eo,type:"document"}),title:"Upload Documents"})},el=function(e){K.show({content:(0,a.jsx)(C.d,{mediaId:e.data.id,onSuccess:er}),submit:!1,title:"Delete Media"})},ec=function(e){K.show({content:(0,a.jsx)(I.z,{media:e.data,toggleShow:K.close}),submit:!1,title:"Media Details",width:"50%"})},ed=[{context:"primary",icon:["fas","info-circle"],onClick:function(e,n){return ec(n)},tooltip:"Details"}];V("admin")&&ed.push({context:"danger",icon:["fas","trash"],onClick:function(e,n){return el(n)},tooltip:"Delete"});var eu=[{hidden:!0},{hidden:!0},{hidden:!0,text:"Caption"},{hidden:!1,text:"File"},{hidden:!N,text:"Entity"},{formatter:function(e){var n,t=e.row;return(0,a.jsx)(T,{children:(null==t?void 0:null===(n=t.authority)||void 0===n?void 0:n.adminOnly)&&(0,a.jsx)(h.Z,{content:"Admin user only",children:(0,a.jsx)(m.Z,{alt:"Admin Only",src:"/messaging/admin-only.svg"})})})},text:"",tooltip:"Only Admin can see"},{formatter:(0,f.Z)("/dashboard/users/view","userId","uploaded"),text:"Uploaded by"},{hidden:!E,text:"Thumbnails"},{hidden:!G,formatter:x.Z,formatterData:ed,text:"Actions"}],ep=function(e,n){e.preventDefault(),window.open("".concat("https://cleverly-staging-media.s3.eu-west-2.amazonaws.com","/").concat(n))},eh=[],em=ee.map(function(e){var n=e.entity,t=e.entityId,i=e.id,o=e.item,r=o.caption,s=o.filename,l=o.meta,c=o.name,d=o.type,u=o.user;return{data:o,id:i,userId:null==u?void 0:u.id,file:function(){return(0,a.jsx)(g.Z,{onClick:function(e){return ep(e,s)},children:r||c||s})},entity:n&&"".concat(n,"#").concat(t),authority:l,uploaded:"".concat(null==u?void 0:u.nameFirst," ").concat(null==u?void 0:u.nameLast),thumbnails:(0,q.S)(d,l),actions:""}}),ef=(ee.forEach(function(e){var n=e.item,t=n.caption,i=n.filename;"image"===n.type&&eh.push({caption:t,filename:i})}),eh),ex=ef.length;return(0,a.jsxs)(v.Z,{fitParentHeight:!0,open:!0,title:z,children:[r,n&&ex>0&&(0,a.jsx)(A,{children:(0,a.jsx)(y.Z,{fullWidth:!0,height:"200px",numberOfItems:1,showNavs:!1,showPagination:!0,slides:ef.map(function(e){var n=e.caption,t=e.filename;return{node:(0,a.jsx)(m.Z,{alt:n,src:"".concat("https://cleverly-staging-media.s3.eu-west-2.amazonaws.com","/").concat(t)}),text:" "}})})}),(0,a.jsx)(P.t,{columns:eu,loading:et,fullHeight:!0,paginationSize:!1,meta:en,ref:W,refetch:ei,rows:em}),O&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{size:"sm"}),(0,a.jsxs)(Z.Z,{align:"flex-end",children:[(!L||"document"===L)&&!V("supplier")&&(0,a.jsx)(j.Z,{content:"Add Document",context:"secondary",onClick:es,size:"sm"}),(!L||"image"===L||"avatar"===L)&&!V("supplier")&&(0,a.jsx)(j.Z,{content:"Add ".concat((0,w.Z)(L||"Image")),context:"secondary",onClick:ea,size:"sm"})]})]})]})},T=u.ZP.div.withConfig({displayName:"table__StyledIcon",componentId:"sc-9d92024f-0"})(M()),A=u.ZP.div.withConfig({displayName:"table__StyledCarousel",componentId:"sc-9d92024f-1"})(k());E.propTypes={carousel:l.bool,category:l.string,children:l.node,data:l.array,details:l.bool,entity:l.string,entityId:l.number,filters:l.object,limit:l.number,listView:l.bool,mediaMeta:l.object,onMediaAdd:l.func,onMediaRemove:l.func,pagination:l.object,showActionButtons:l.bool,showEntityColumn:l.bool,showItemActions:l.bool,summary:l.string,type:l.string},E.defaultProps={carousel:!0,category:null,data:[],details:!1,filters:{},limit:20,listView:!1,mediaMeta:null,showActionButtons:!0,showEntityColumn:!1,showItemActions:!0,summary:"Media",type:null}},66321:function(e,n,t){"use strict";t.d(n,{E:function(){return x}});var i=t(26042),o=t(69396),r=t(85893),a=t(45697),s=t.n(a),l=t(94054),c=t(50480),d=t(56815),u=t(40476),p=t(79717),h=t(36872),m=t(51233),f=t(15861),x=function(e){var n=e.label,t=e.options,a=e.error,s=e.helperText,x=e.stackProps,v=e.formControlProps,y=e.labelLeft,b=function(e){var n=e.children;return(0,r.jsx)(r.Fragment,{children:n})};return(0,r.jsxs)(l.Z,(0,o.Z)((0,i.Z)({sx:{m:3},error:a,variant:"standard"},void 0===v?{}:v),{children:[(0,r.jsxs)(m.Z,(0,o.Z)((0,i.Z)({},y&&g),{children:[n&&(0,r.jsx)(u.Z,{id:"radio-group",color:"secondary",children:n}),(0,r.jsx)(p.Z,(0,o.Z)((0,i.Z)({},e),{"aria-labelledby":"radio-group",children:(0,r.jsx)(m.Z,(0,o.Z)((0,i.Z)({},void 0===x?{}:x),{children:t.map(function(e){var n=e.value,t=e.label,i=e.icon,o=e.ParentComponent;return(0,r.jsx)(void 0===o?b:o,{children:(0,r.jsx)(c.Z,{value:n,control:(0,r.jsx)(h.Z,{color:"secondary"}),label:(0,r.jsxs)(m.Z,{direction:"row",alignItems:"center",spacing:1,children:[i,(0,r.jsx)(f.Z,{children:t})]})})})})}))}))]})),(0,r.jsx)(d.Z,{children:s})]}))};x.defaultProps={options:[],error:!1,helperText:"",stackProps:{},formControlProps:{},labelLeft:!1},x.propTypes={label:s().string,options:s().arrayOf(s().shape({label:s().string.isRequired,value:s().any.isRequired,ParentComponent:s().elementType})).isRequired,error:s().bool,helperText:s().string,stackProps:s().object,formControlProps:s().object,labelLeft:s().bool};var g={direction:"row",alignItems:"center",flexWrap:"wrap",spacing:1}},98571:function(e,n,t){"use strict";t.d(n,{eI:function(){return $},UH:function(){return b},Pd:function(){return C}});var i=t(85893),o=t(84059),r=t(45697),a=t.n(r),s=t(51233),l=t(11057),c=t(86532),d=t(22797),u=t(38895),p=t(15861),h=t(5616),m=t(27434),f=t(63441),x=t(63139),g=t(67294),v=function(e){var n=e.id,t=e.value,r=e.isExpandedByDefault,a=e.collapsible,v=(0,x.a)(),b=(0,g.useState)(r),Z=b[0],j=b[1],w=function(){return j(function(e){return!e})},C=function(e){e.stopPropagation();var t=document.querySelector("#qr-".concat(n," > canvas")).toDataURL(),i=document.createElement("a");i.href=t,i.download="".concat(n,".png"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},I=(0,g.useMemo)(function(){var e={Main:s.Z,Header:s.Z,Body:s.Z};return a&&(e={Main:c.Z,Header:u.Z,Body:d.Z}),e},[a]);return(0,i.jsx)(h.Z,{children:(0,i.jsxs)(I.Main,{expanded:Z,onChange:w,children:[(0,i.jsx)(I.Header,{expandIcon:(0,i.jsx)(m.Z,{}),children:(0,i.jsxs)(s.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(p.Z,{variant:"h6",children:"QR Code"}),(0,i.jsx)(l.Z,{disabled:v,disableMinWidth:!0,size:"small",color:"info",variant:"contained",onClick:C,sx:y.downloadButton,children:(0,i.jsx)(f.Z,{sx:y.downloadIcon})})]})}),(0,i.jsx)(I.Body,{sx:y.body,children:(0,i.jsx)(s.Z,{id:"qr-".concat(n),alignItems:"center",children:(0,i.jsx)(o.Qd,{bgColor:"#ffffff",fgColor:"#000000",value:t,level:"H",size:256})})})]})})},y={downloadIcon:{height:"17px",width:"17px"},downloadButton:{mr:2},body:{marginTop:"20px"}};v.propTypes={id:a().string,value:a().string,isExpandedByDefault:a().bool,collapsible:a().bool},v.defaultProps={id:"new-qr-code",isExpandedByDefault:!1,collapsible:!0};var b=v,Z=t(93946),j=t(78394),w=function(e){var n=e.id,t=e.value,r=function(e){e.stopPropagation();var t=document.querySelector("#qr-".concat(n," > canvas")).toDataURL(),i=document.createElement("a");i.href=t,i.download="".concat(n,".png"),document.body.appendChild(i),i.click(),document.body.removeChild(i)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.Z,{onClick:r,size:"large",sx:{borderRadius:"10px!important",width:"130px"},children:(0,i.jsxs)(s.Z,{alignItems:"center",children:[(0,i.jsx)(j.Z,{sx:{width:"50px",height:"50px"},color:"secondary"}),(0,i.jsx)(p.Z,{children:"Qr Code"})]})}),(0,i.jsx)(s.Z,{id:"qr-".concat(n),alignItems:"center",display:"none",children:(0,i.jsx)(o.Qd,{style:{display:"none"},bgColor:"#ffffff",fgColor:"#000000",value:t,level:"H",size:256})})]})};w.propTypes={id:a().string,value:a().string},w.defaultProps={id:"new-qr-code",isExpandedByDefault:!1,collapsible:!0};var C=w,I=t(78566),S=t.n(I),q=t(28842),P=function(e){var n=e.id,t=e.value,o=function(e){e.stopPropagation();var t=document.querySelector("#barcode-".concat(n," > svg")).outerHTML,i=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),o=URL.createObjectURL(i),r=document.createElement("a");r.href=o,r.download="".concat(n,".svg"),document.body.appendChild(r),r.click(),document.body.removeChild(r)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.Z,{onClick:o,size:"large",sx:{borderRadius:"10px!important",width:"130px"},children:(0,i.jsxs)(s.Z,{alignItems:"center",children:[(0,i.jsx)(q.Z,{sx:{width:"50px",height:"50px"},color:"secondary"}),(0,i.jsx)(p.Z,{children:"Barcode"})]})}),(0,i.jsx)(s.Z,{id:"barcode-".concat(n),alignItems:"center",display:"none",children:(0,i.jsx)(S(),{value:"".concat(t),style:{display:"none"}})})]})};P.defaultProps={id:"asset",value:""},P.propTypes={id:a().string.isRequired,value:a().string.isRequired};var $=P},4972:function(e,n,t){"use strict";t.d(n,{A5:function(){return ec},Ak:function(){return L},Cj:function(){return Q},K4:function(){return er},Oq:function(){return el},Qn:function(){return G},RJ:function(){return J},SW:function(){return N},T_:function(){return V},UH:function(){return O},UM:function(){return ei},Ve:function(){return X},_d:function(){return B},_f:function(){return eo},by:function(){return Y},cz:function(){return R},he:function(){return z},j$:function(){return H},kB:function(){return en},kU:function(){return ee},kx:function(){return W},nD:function(){return F},nP:function(){return es},pY:function(){return ea},qd:function(){return D},t1:function(){return U},yR:function(){return K},zR:function(){return et}});var i=t(7297),o=t(75063);function r(){var e=(0,i.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]);return r=function(){return e},e}function a(){var e=(0,i.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return a=function(){return e},e}function s(){var e=(0,i.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return s=function(){return e},e}function l(){var e=(0,i.Z)(["\n  query GetAssetsForSelect(\n    $locationId: Int\n    $q: String\n    $categoryId: Int\n    $bookable: String\n    $limit: Int\n    $offset: Int\n  ) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']);return c=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}function u(){var e=(0,i.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return u=function(){return e},e}function p(){var e=(0,i.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,i.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return m=function(){return e},e}function f(){var e=(0,i.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return f=function(){return e},e}function x(){var e=(0,i.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return x=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=(0,i.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]);return v=function(){return e},e}function y(){var e=(0,i.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return y=function(){return e},e}function b(){var e=(0,i.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return b=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return Z=function(){return e},e}function j(){var e=(0,i.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return j=function(){return e},e}function w(){var e=(0,i.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "complianceCategory" } }\n      order_by: { name: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return w=function(){return e},e}function C(){var e=(0,i.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]);return C=function(){return e},e}function I(){var e=(0,i.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]);return I=function(){return e},e}function S(){var e=(0,i.Z)(['\n  query GetTaxonomy($q: String, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return S=function(){return e},e}function q(){var e=(0,i.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n    $includeMeta: Boolean! = false\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n      meta @include(if: $includeMeta)\n    }\n  }\n"]);return q=function(){return e},e}function P(){var e=(0,i.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']);return P=function(){return e},e}function $(){var e=(0,i.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']);return $=function(){return e},e}function _(){var e=(0,i.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n']);return _=function(){return e},e}function M(){var e=(0,i.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]);return M=function(){return e},e}function k(){var e=(0,i.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return k=function(){return e},e}function E(){var e=(0,i.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n            code\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return E=function(){return e},e}function T(){var e=(0,i.Z)(['\n  query GetCompliancesForSelectNew($q: String, $locationId: Int, $limit: Int, $offset: Int) {\n    items: Compliance(\n      where: {\n        name: { _ilike: $q }\n        Category: { type: { _eq: "complianceCategory" } }\n        Compliance_Entities: { entity: { _eq: "Location" }, Location: { id: { _eq: $locationId } } }\n      }\n      order_by: { name: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      value: id\n      label: name\n      category: Category {\n        label: name\n      }\n    }\n  }\n']);return T=function(){return e},e}function A(){var e=(0,i.Z)(['\n  query GetTaskAssignedToForSelect(\n    $accountId: Int\n    $q: String\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return A=function(){return e},e}var R=(0,o.Ps)(r()),D=(0,o.Ps)(a()),F=(0,o.Ps)(s()),O=(0,o.Ps)(l()),N=(0,o.Ps)(c()),G=(0,o.Ps)(d()),z=(0,o.Ps)(u()),L=(0,o.Ps)(p()),H=(0,o.Ps)(h()),B=(0,o.Ps)(m()),W=(0,o.Ps)(f()),U=(0,o.Ps)(x()),V=(0,o.Ps)(g()),Y=(0,o.Ps)(v()),K=(0,o.Ps)(y()),J=(0,o.Ps)(b()),Q=(0,o.Ps)(Z()),X=(0,o.Ps)(j()),ee=(0,o.Ps)(w()),en=(0,o.Ps)(C()),et=(0,o.Ps)(I()),ei=(0,o.Ps)(S()),eo=(0,o.Ps)(q());(0,o.Ps)(P()),(0,o.Ps)($()),(0,o.Ps)(_());var er=(0,o.Ps)(M()),ea=(0,o.Ps)(k()),es=(0,o.Ps)(E()),el=(0,o.Ps)(T()),ec=(0,o.Ps)(A())},15033:function(e,n,t){"use strict";t.d(n,{i:function(){return I}});var i=t(14924),o=t(26042),r=t(69396),a=t(85893),s=t(67294),l=t(11163),c=t(45697),d=t.n(c),u=t(61870),p=t(5616),h=t(51233),m=t(15861),f=t(90948),x=t(41796),g=t(29217),v=t(45111),y=t(46003),b=t(70872),Z=t(58886),j=t(61730),w=function(e){var n=e.currentPage,t=e.totalCount,i=e.pageSize,r=e.onPageChange,s=(0,j.Z)("(max-width:400px)"),l=(0,j.Z)("(max-width:500px)");return(0,a.jsx)(C,{mb:2,page:n,count:Math.ceil(t/i),onChange:function(e,n){return r(n)},variant:"outlined",shape:"rounded",size:s?"small":"medium",hidePrevButton:1===n,hideNextButton:n===Math.ceil(t/i),siblingCount:l?0:1,renderItem:function(e){return(0,a.jsx)(Z.Z,(0,o.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})};w.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}},w.propTypes={currentPage:d().number,totalCount:d().number,pageSize:d().number,onPageChange:d().func};var C=(0,f.ZP)(b.Z)(function(e){var n,t=e.hidePrevButton,r=e.hideNextButton,a=e.theme;return n={},(0,i.Z)(n,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,i.Z)(n,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,i.Z)(n,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,i.Z)(n,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,i.Z)(n,"& button.Mui-selected",(0,o.Z)({color:a.palette.white.main,backgroundColor:a.palette.secondary.main},r?{borderRadius:"0 5px 5px 0"}:{},t?{borderRadius:"5px 0 0 5px"}:{})),n}),I=(0,s.forwardRef)(function(e,n){var t=e.columns,i=e.history,r=e.initialSort,c=e.meta,d=e.refetch,u=e.paginationSize,p=e.containerHeight,f=e.noResultsMessage,x=e.autoHeight,b=(0,l.useRouter)(),Z=b.query,j=void 0===Z?{}:Z,C=(0,s.useState)(parseInt(null==j?void 0:j.page,10)||1),I=C[0],P=C[1],$=(0,s.useState)(u||y.C1.paginationSize),_=$[0],M=$[1];r||(r={item:"createdAt",order:"desc"});var k=(0,s.useState)({item:r.item,order:r.order}),E=k[0],T=k[1],A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=b.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(i)},R=function(){T({item:r.item,order:r.order}),P(1);var e=A();b.push(e),M(u||y.C1.paginationSize)};(0,s.useImperativeHandle)(n,function(){return{currentPage:I,pageSize:_,sort:E,resetPagination:function(){R()}}});var D=function(e){var n=A(e);i&&b.push(n),P(e),!i&&d&&d()},F=function(e){e&&e.field&&e.sort?(T({item:t.find(function(n){return n.field===e.field}).sortName||e.field||e.item||r.item,order:e.sort||e.order||r.order}),d&&d()):(T({item:r.item,order:r.order}),d&&d())};return(0,a.jsxs)(S,{containerHeight:p,children:[(0,a.jsx)(q,(0,o.Z)({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:x,sortingMode:"server",onSortModelChange:function(e){return F(e[0])},columns:t,pageSize:_,slots:{columnSortedAscendingIcon:function(){return(0,a.jsx)(g.Z,{})},columnSortedDescendingIcon:function(){return(0,a.jsx)(v.Z,{})},columnUnsortedIcon:function(){return(0,a.jsxs)(h.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,a.jsx)(g.Z,{sx:{marginBottom:"-15px"}}),(0,a.jsx)(v.Z,{})]})},noResultsOverlay:function(){return(0,a.jsx)(h.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(m.Z,{children:f})})},noRowsOverlay:function(){return(0,a.jsx)(h.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(m.Z,{children:f})})}}},e)),c&&Math.ceil(c.aggregate.totalCount/_)>1&&(0,a.jsx)(w,{currentPage:I,totalCount:c.aggregate.totalCount,pageSize:_,onPageChange:D})]})});I.propTypes={history:d().bool,initialSort:d().object,loading:d().bool,meta:d().object,refetch:d().func,paginationSize:d().number,noResultsMessage:d().string,columns:d().array.isRequired,rows:d().array.isRequired,autoHeight:d().bool},I.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var S=(0,f.ZP)(p.Z)(function(e){return{height:e.containerHeight,display:"flex",flexDirection:"column"}}),q=(0,f.ZP)(u.s)(function(e){var n,t=e.theme,a=e.hideHeader,s=(e.rows,e.loading,e.rowHeight),l=e.isPdf;return n={"--DataGrid-overlayHeight":"40px"},(0,i.Z)(n,"&.MuiDataGrid-root",(0,o.Z)({color:t.palette.black.main,border:"none"},l&&{"@media print":{display:"block"}})),(0,i.Z)(n,"& .MuiDataGrid-main",(0,o.Z)({},l&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(n,"& .MuiDataGrid-columnHeaders",(0,r.Z)((0,o.Z)({},a&&{display:"none"}),{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:t.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,i.Z)(n,"& .MuiDataGrid-virtualScroller",(0,o.Z)({},a&&{marginTop:"0 !important"},l&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(n,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,i.Z)(n,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(n,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(n,"& .MuiDataGrid-virtualScrollerContent",(0,o.Z)({},l&&{height:"initial !important",minHeight:"initial !important"})),(0,i.Z)(n,"& .MuiDataGrid-virtualScrollerRenderZone",(0,o.Z)({},l&&{position:"relative"})),(0,i.Z)(n,"& .MuiDataGrid-overlayWrapper",(0,i.Z)({},"& .MuiCircularProgress-root",{color:t.palette.secondary.main})),(0,i.Z)(n,"& .MuiDataGrid-row",(0,o.Z)({},l&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,i.Z)(n,"& .MuiDataGrid-row > .MuiDataGrid-cell",(0,o.Z)({},l&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,i.Z)(n,"& .MuiDataGrid-row.even",{backgroundColor:t.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,x.Fq)(t.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,x.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,x.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,x.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity)}}}}),n})},91272:function(e,n,t){"use strict";t.d(n,{t:function(){return c}});var i=t(85893),o=t(67294),r=t(45697),a=t(11163),s=t(46003),l=t(8500),c=(0,o.forwardRef)(function(e,n){var t=e.columns,r=e.history,c=e.initialSort,d=e.loading,u=e.meta,p=e.paginationSize,h=e.refetch,m=e.submissionsRefetch,f=e.rowClick,x=e.rows,g=e.xeroPageSize,v=(0,a.useRouter)(),y=v.query,b=void 0===y?{}:y,Z=(0,o.useState)(parseInt(null==b?void 0:b.page,10)||1),j=Z[0],w=Z[1],C=(0,o.useState)(g||s.C1.paginationSize),I=C[0],S=C[1];c||(c={item:"createdAt",order:"desc"});var q=(0,o.useState)({item:c.item,order:c.order}),P=q[0],$=q[1],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=v.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(i)},M=function(){$({item:c.item,order:c.order}),w(1);var e=_();v.push(e),S(g||s.C1.paginationSize)};(0,o.useImperativeHandle)(n,function(){return{currentPage:j,pageSize:I,sort:P,resetPagination:function(){M()}}});var k=function(e){var n=_(e);r&&v.push(n),w(e),!r&&h&&h()&&m&&m()},E=function(e){e!==s.C1.paginationSize&&(S(e),h&&h()&&m&&m())},T=function(e){var n;$({item:e.item,order:e.order}),h&&h()&&m&&m()};return(0,i.jsx)(l.Z,{columns:t,loading:d,paginationSize:p,pagination:u&&!0,paginationProps:u&&{currentPage:j,onPageChange:k,onPageSizeChange:E,pageCount:Math.ceil(u.aggregate.totalCount/I),perPage:I},rowClick:f,rows:x,sort:P,setSort:T})});c.propTypes={columns:r.array.isRequired,history:r.bool,initialSort:r.object,loading:r.bool,meta:r.object,refetch:r.func,submissionsRefetch:r.func,rowClick:r.func,rows:r.array.isRequired},c.defaultProps={history:!0,loading:!0,paginationSize:!1}},9492:function(e,n,t){"use strict";t.d(n,{S:function(){return i}});var i=function(e,n){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=n,t.href=e,t.click(),document.body.removeChild(t)):location.replace(e)}},26166:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eZ}});var i=t(85893),o=t(14924),r=t(26042),a=t(69396),s=t(828),l=t(29815),c=t(45697),d=t.n(c),u=t(11163),p=t.n(u),h=t(6388),m=t(68957),f=t(5616),x=t(98456),g=t(86886),v=t(51233),y=t(86532),b=t(22797),Z=t(38895),j=t(11057),w=t(15861),C=t(77957),I=t(30381),S=t.n(I),q=t(27434),P=t(64872),$=t(35656),_=t(71152),M=function(e){var n,t,o=e.assetId,r=e.name,a=e.description,l=e.parentAsset,c=e.customer,d=e.location,u=e.sublocation,p=e.category,h=e.createdAt,m=e.status,x=e.categoryQuestions,I=e.categoryAnswers,M=e.assetAdditional,k=e.editable,E=e.expanded,T=e.onChangeExpanded,A=(0,P.a)(),R=function(e){e.stopPropagation(),A.show({content:(0,i.jsx)($.R,{assetId:o,offCanvas:A}),title:"Edit Asset",submit:!0})};return(0,i.jsx)(f.Z,{children:(0,i.jsxs)(y.Z,{expanded:E,onChange:T,children:[(0,i.jsx)(Z.Z,{expandIcon:(0,i.jsx)(q.Z,{}),children:(0,i.jsxs)(v.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(w.Z,{variant:"h6",children:"Details"}),k&&(0,i.jsx)(j.Z,{disableMinWidth:!0,size:"small",color:"secondary",variant:"contained",onClick:R,sx:{mr:2},children:(0,i.jsx)(C.Z,{sx:{height:"17px",width:"17px"}})})]})}),(0,i.jsx)(b.Z,{children:(0,i.jsxs)(g.ZP,{container:!0,rowSpacing:2,children:[(0,i.jsxs)(g.ZP,{container:!0,item:!0,xs:6,rowSpacing:1,columnSpacing:1,children:[(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Name"}),(0,i.jsx)(w.Z,{children:r})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Description"}),(0,i.jsx)(w.Z,{children:a})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Parent asset"}),(0,i.jsx)(w.Z,{children:l})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Customer"}),(0,i.jsx)(w.Z,{children:c})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,sx:{maxWidth:"85%!important"},children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Location"}),(0,i.jsx)(w.Z,{children:d})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Sublocation"}),(0,i.jsx)(w.Z,{children:u})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Category"}),(0,i.jsx)(w.Z,{children:p})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Type"}),(0,i.jsx)(w.Z,{children:l?"Child":"Parent"})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Date created"}),(0,i.jsx)(w.Z,{children:S()(h).format("YYYY-MM-DD")})]}),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:"Status"}),(0,i.jsx)(w.Z,{children:m})]}),x.map(function(e,n){var t,o,r=I[e.name];return Array.isArray(r)&&(r=r.filter(function(e){return e}).join(", ")),(null===(t=e.meta)||void 0===t?void 0:t.input)==="datepicker"&&(r=S()(r).format("Do MMM YYYY")),(0,i.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:null===(o=e.meta)||void 0===o?void 0:o.label}),(0,i.jsx)(w.Z,{children:r})]},"".concat(e.name,"-").concat(n))})]}),(0,i.jsx)(g.ZP,{container:!0,item:!0,xs:6,children:(0,i.jsx)(v.Z,{spacing:1,mt:1,children:M?Object.entries(M).map(function(e){var o,r,a=(0,s.Z)(e,2),l=a[0],c=a[1];return(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(w.Z,{variant:"subtitle2",children:null!==(n=null===(o=_.W[l])||void 0===o?void 0:o.label)&&void 0!==n?n:"No label"}),(0,i.jsxs)(v.Z,{direction:"row",alignItems:"center",children:[null!==(t=null===(r=_.W[l])||void 0===r?void 0:r.icon)&&void 0!==t?t:null,(0,i.jsx)(w.Z,{children:null!=c?c:"-"})]})]})}):null})})]})})]})})};M.defaultProps={assetId:null,name:"-",description:"-",parentAsset:!1,customer:"-",location:"-",sublocation:"-",category:"-",createdAt:new Date,status:"active",categoryQuestions:[],categoryAnswers:{},editable:!1,expanded:!1,onChangeExpanded:function(){}},M.propTypes={assetId:d().number.isRequired,name:d().string,description:d().string,parentAsset:d().string,customer:d().string,location:d().string,sublocation:d().string,category:d().string,createdAt:d().oneOfType([d().object,d().string]),status:d().string,assetAdditional:d().object,categoryQuestions:d().arrayOf(d().shape({name:d().string.isRequired,meta:d().shape({label:d().string.isRequired,input:d().oneOf(["input","textArea","currencyInput","radio","select","selectRange","datepicker","checkbox"]).isRequired})})),categoryAnswers:d().object.isRequired,editable:d().bool,expanded:d().bool,onChangeExpanded:d().func};var k=t(86267),E=t(57460),T=t.n(E),A=t(15033),R=t(20705),D=t(2845),F=t(45416),O=t(18586),N=t(75759),G=t(12547),z=t(5336),L=t(73359),H=t(9492),B=t(67294),W=function(e){var n,t,o,l=e.assetId,c=e.editable,d=e.expanded,u=e.onChangeExpanded,g=e.asset,C=(0,O.q)(),I=(0,D.x)().hasRole,P=I("admin"),$=I("supplier"),_=I("tenant"),M=null===(n=C.admin.jobSetting)||void 0===n?void 0:n.jobNumberPrefix,k=null===(t=C.admin.jobSetting)||void 0===t?void 0:t.jobNumberSuffix,E=(0,B.useState)(!1),W=E[0],U=E[1],V=(0,R.x)({filters:{}}),Y=V.ref,K=V.initialData,J=(0,h.aM)(m.zu,{variables:(0,a.Z)((0,r.Z)({},K),{assetId:null==g?void 0:g.id})}),Q=J.data,X=void 0===Q?{jobs:[],meta:{aggregate:{totalCount:0}}}:Q,ee=X.jobs,en=X.meta,et=J.loading,ei=J.refetch,eo=(0,s.Z)((0,L.t)(m.zu,{fetchPolicy:"no-cache",variables:{assetId:l,orderBy:K.orderBy,offset:0,limit:(null==en?void 0:null===(o=en.aggregate)||void 0===o?void 0:o.totalCount)||150},onCompleted:function(e){var n=e.jobs;try{var t=T().unparse(ea(n,!0)),i="data:application/octet-stream,"+encodeURIComponent(t);(0,H.S)(i,"asset-".concat(l,"_jobs.csv"))}finally{U(!1)}}}),1)[0],er=function(e){var n=[];return c&&n.push({context:"secondary",icon:"edit",onClick:function(n){return p().push("/dashboard/issues/manage?id=".concat(e.number).concat("quote"===e.type?"&quoted=1":""))},tooltip:"Edit"}),n.push({context:"secondary",icon:"info",onClick:function(n){return p().push("/dashboard/issues/view?id=".concat(e.number))},tooltip:"Info"}),n},ea=function(e,n){return e.map(function(e){var t,i,o,s,l,c,d,u,p,h,m,f,x,g,v,y,b=e.manager?e.manager.fullName:"Unassigned",Z=e.scheduledAt?S()(e.scheduledAt).format("YYYY-MM-DD"):S()(e.timingStart).format("YYYY-MM-DD"),j=n&&(null==e?void 0:e.supplierOffers.length)>0?null===(t=null==e?void 0:e.supplierOffers[0].supplier)||void 0===t?void 0:t.name:null==e?void 0:e.supplierOffers;return(0,a.Z)((0,r.Z)({},!n&&{id:e.id}),{type:e.type,number:e.number,invoiceNumber:null===(i=e.invoices)||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o.invoiceNumber,creator:null===(s=e.timings)||void 0===s?void 0:null===(l=s[0])||void 0===l?void 0:null===(c=l.user)||void 0===c?void 0:c.fullName,propertyId:null===(d=e.location)||void 0===d?void 0:d.id,managerId:null===(u=e.manager)||void 0===u?void 0:u.id,customerId:null===(p=e.customer)||void 0===p?void 0:p.id,priority:(null===(h=e.sla)||void 0===h?void 0:h.name)||"-",supplierId:e.supplier?e.supplier.id:"",service:(null===(m=e.service)||void 0===m?void 0:m.name)||"-",description:(null===(f=e.shortJobDesc)||void 0===f?void 0:null===(x=f[0])||void 0===x?void 0:x.taxonomy.name)||"-",manager:b,location:(null===(g=e.location)||void 0===g?void 0:g.name)||"-",customer:(null===(v=e.customer)||void 0===v?void 0:v.name)||"-",supplier:e.supplier?e.supplier.name:"-",supplierUser:e.supplierUser?e.supplierUser.fullName:"-",scheduleDate:Z,date:S()(e.createdAt).format("YYYY-MM-DD"),status:(null==e?void 0:e.job)?null===(y=e.job)||void 0===y?void 0:y.status:e.status,offerTo:P?j:""})})},es=function(e){e.stopPropagation(),U(!0),eo()};return(0,i.jsx)(f.Z,{children:(0,i.jsxs)(y.Z,{expanded:d,onChange:u,sx:{maxHeight:"calc(100vh - 32px)",overflow:"scroll"},children:[(0,i.jsx)(Z.Z,{expandIcon:(0,i.jsx)(q.Z,{}),children:(0,i.jsxs)(v.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(w.Z,{variant:"h6",children:"Work Orders"}),(0,i.jsx)(v.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,i.jsx)(j.Z,{disableMinWidth:!0,disabled:W,size:"small",color:"success",variant:"contained",onClick:es,sx:{mr:2},children:W?(0,i.jsx)(x.Z,{size:20,color:"secondary"}):"CSV"})})]})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(A.i,{autoHeight:!1,loading:et,ref:Y,columns:[{minWidth:60,field:"id",headerName:"Job ID",renderCell:function(e){var n=e.row;return(0,i.jsx)(F.D,{id:n.id,number:n.number,openCanvas:!0,type:n.type,numberPrefix:M,numberSuffix:k})}},{minWidth:60,field:"invoiceNumber",headerName:"Invoice ID",renderCell:function(e){return e.row.invoiceNumber},sortable:!1},{maxWidth:80,field:"priority",headerName:"Priority",sortName:'{"SLA": {"name": "ORDER"}}'},{minWidth:200,field:"service",headerName:"Service",sortName:'{"Service": {"name": "ORDER"}}'},{minWidth:80,field:"type",headerName:"Type",sortable:!1},{minWidth:200,flex:1,field:"description",headerName:"Description",sortable:!1},{minWidth:130,flex:1,field:"manager",headerName:"Assigned to",sortName:'{"Manager": {"nameFirst": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,i.jsx)(G.r,{color:"secondary",href:"/dashboard/users/view?id=".concat(n.managerId),children:n.manager})}},{minWidth:200,flex:1,field:"location",headerName:P?"Customer":"Location",sortName:'{"Customer": {"name": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,i.jsxs)(v.Z,{children:[P&&(0,i.jsx)(G.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(n.customerId),children:n.customer}),(0,i.jsx)(G.r,{noWrap:$||_,color:"secondary",href:"/dashboard/properties/view?id=".concat(n.propertyId),children:n.location})]})}},{minWidth:140,flex:1,field:"supplier",headerName:"Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,i.jsx)(G.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(n.supplierId),children:n.supplier})}},{flex:1,minWidth:120,field:"supplierUser",headerName:"Assigned to",sortName:'{"SupplierUser": {"nameFirst": "ORDER"}}'},{minWidth:160,field:"scheduleDate",headerName:"Scheduled",sortable:!1},{minWidth:120,flex:1,field:"date",headerName:"Created",sortName:"createdAt"},{minWidth:120,flex:1,field:"status",headerName:"Status",renderCell:function(e){var n,t,o=e.row;return(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(f.Z,{children:(0,i.jsx)(N.B,{value:o.status})}),P&&"offered"===o.status&&o.offerTo&&o.offerTo.length>0&&(0,i.jsx)(G.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(null===(n=o.offerTo[0].supplier)||void 0===n?void 0:n.id),children:null===(t=o.offerTo[0].supplier)||void 0===t?void 0:t.name})]})}},{width:50,field:"actions",headerName:"",sortable:!1,renderCell:function(e){var n=e.row;return(0,i.jsx)(z.C,{actionsData:er,row:n})}}],rows:ea(ee,!1),meta:en,refetch:ei,columnVisibilityModel:{priority:P,manager:P,supplier:P,supplierUser:$}})})]})})};W.defaultProps={editable:!1,expanded:!1,onChangeExpanded:function(){}},W.propTypes={editable:d().bool,expanded:d().bool,onChangeExpanded:d().func,asset:d().object,assetId:d().number.isRequired};var U=t(46003),V=t(69308),Y=function(e){var n=e.filename,t=e.initialCoordinates,o=e.color,r=e.editable,a=e.handleChangeCoordinates,s=(0,B.useRef)(null),l=(0,B.useRef)(null),c=(0,B.useState)(t),d=c[0],u=c[1];(0,B.useEffect)(function(){u(t)},[t]);var p=function(e){if(r){var n=s.current,t=n.clientHeight,i=n.clientWidth,o=l.current,c=o.clientHeight,d=o.clientWidth,p={x:(e.nativeEvent.offsetX-i/2)*100/d,y:(e.nativeEvent.offsetY-t)*100/c};u(p),a(p)}};return(0,i.jsx)(f.Z,{sx:{position:"relative"},children:n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Z,{ref:l,component:"img",src:n,sx:{width:"100%"},onClick:p}),(0,i.jsx)(V.Z,{ref:s,color:o,sx:{position:"absolute",width:"8%",height:"auto",top:"".concat(d.y,"%"),left:"".concat(d.x,"%")}})]})})};Y.defaultProps={initialCoordinates:{x:0,y:0},color:"warning",editable:!1,handleChangeCoordinates:function(){}},Y.propTypes={filename:d().string.isRequired,initialCoordinates:d().shape({x:d().number.isRequired,y:d().number.isRequired}).isRequired,color:d().string,editable:d().bool,handleChangeCoordinates:d().func};var K=t(76256),J=t(50319),Q=function(e){var n,t,o,l,c,d=e.assetId,u=e.asset,p=e.markerColor,x=e.editable,g=e.expanded,I=e.onChangeExpanded,S=(0,P.a)(),$=(0,D.x)().user,_=(0,B.useState)(null),M=_[0],k=_[1],E=(0,h.aM)(m.Jt,{variables:{adminId:$.adminId,entityId:d,entity:"Asset",category:"assetFloorplan",type:"image"}}),T=E.data,A=(void 0===T?{items:[]}:T).items,R=E.refetch,F=(0,s.Z)((0,J.D)(m.Wx),1)[0],O=function(e){e.stopPropagation(),S.show({content:(0,i.jsx)(K.z,{accept:"image/*",adminId:$.adminId,category:"assetFloorplan",entity:"Asset",entityId:d,expiryShow:!1,mediaMeta:null,multiple:!1,showAdminOnly:!1,onSuccess:function(){S.close(),R()},type:"image"}),title:"Upload floorplan image"})},N=function(e){M&&clearTimeout(M),k(setTimeout(function(){F({variables:{id:d,changes:{meta:(0,a.Z)((0,r.Z)({},u.meta),{coordinates:e})}}})},1e3))},G="".concat("https://cleverly-staging-media.s3.eu-west-2.amazonaws.com","/").concat(null==A?void 0:null===(n=A[0])||void 0===n?void 0:null===(t=n.item)||void 0===t?void 0:t.filename);return(0,i.jsx)(f.Z,{children:(0,i.jsxs)(y.Z,{expanded:g,onChange:I,children:[(0,i.jsx)(Z.Z,{expandIcon:(0,i.jsx)(q.Z,{}),children:(0,i.jsxs)(v.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(w.Z,{variant:"h6",children:"Place asset on floorplan"}),x&&(0,i.jsx)(j.Z,{disableMinWidth:!0,size:"small",color:"secondary",variant:"contained",onClick:O,sx:{mr:2},children:(0,i.jsx)(C.Z,{sx:{height:"17px",width:"17px"}})})]})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(v.Z,{alignItems:"center",children:(null==A?void 0:null===(o=A[0])||void 0===o?void 0:null===(l=o.item)||void 0===l?void 0:l.filename)?(0,i.jsx)(Y,{editable:x,filename:G,initialCoordinates:null===(c=u.meta)||void 0===c?void 0:c.coordinates,markerColor:p,handleChangeCoordinates:N}):(0,i.jsx)(w.Z,{color:"muiGray.main",children:"No image available"})})})]})})};Q.defaultProps={asset:{},editable:!1,expanded:!1,onChangeExpanded:function(){}},Q.defaultProps={assetId:d().number.isRequired,asset:d().shape({meta:d().shape({coordinates:d().shape({x:d().number.isRequired,y:d().number.isRequired}).isRequired}).isRequired}).isRequired,markerColor:d().string,editable:d().bool,expanded:d().bool,onChangeExpanded:d().func};var X=t(93946),ee=t(56693),en=t(23054),et=t(874),ei=function(e){var n=e.currentStep,t=e.color,o=e.circularProgressSx,s=e.labelComponent;return(0,i.jsx)(v.Z,{direction:"row",justifyContent:"space-around",alignItems:"center",width:"100%",height:"150px",children:(0,i.jsxs)(v.Z,{sx:{position:"relative",display:"inline-flex",width:"50%%",height:"100%",justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)(x.Z,(0,a.Z)((0,r.Z)({variant:"determinate"},e),{sx:(0,a.Z)((0,r.Z)({},o),{width:"150px",borderRadius:"50%",boxShadow:"inset 0 0 0 13px #BFBFBF "}),size:"large",value:n})),(0,i.jsx)(f.Z,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",color:void 0===t?"success":t},children:(0,i.jsx)(s,{})})]})})},eo=t(62077),er=t(40656),ea=t(98571),es=t(16391),el={bubblesWrapper:{backgroundColor:"rgb(191, 207, 231, 0.7)",padding:"10px",borderRadius:"10px"},bubble:{display:"flex",justifyContent:"space-between",minWidth:"100px",padding:"3px 7px",backgroundColor:"green",borderRadius:"10px"},tile:{width:"40%",minHeight:"70px",border:"1px solid black",borderRadius:"10px",padding:"10px",textAlign:"center",backgroundColor:"rgb(191, 207, 231, 0.7)"},bold:{fontWeight:"600!important"},thin:{fontWeight:300}},ec=function(e){var n,t,o,l,c,d,u,h,m,x,g,j,C,I,$,_,M,E,T,A=e.expanded,R=e.onChangeExpanded,F=e.asset,O=e.qrCodeValue,N=e.jobsTotalByMonths,G=(0,es.useMainContext)().setPredefinedAssetForWorkOrder,z=(0,D.x)(),L=z.user,H=z.hasRole,B=(0,P.a)(),W=F.condition?(0,eo.wo)(eo.Fn,F.condition):{backgroundColor:"success",color:"success"},U=F.preparationStatus?(0,eo.wo)(eo.of,F.preparationStatus):{backgroundColor:"success",color:"success"},V=(Object.entries(N).reduce(function(e,n){var t=(0,s.Z)(n,2);return e+(t[0],t[1])},0)/(null===(n=F.meta)||void 0===n?void 0:null===(t=n.assetAdditional)||void 0===t?void 0:t.estimatedAnnualMaintenance)*100).toFixed(0),Y=function(){B.show({title:"Primary media",content:(0,i.jsx)(k.G,{entity:"Asset",entityId:F.id})})},K=S()(null===(o=F.meta)||void 0===o?void 0:null===(l=o.assetAdditional)||void 0===l?void 0:l.datePutInService),J=S()(null===(c=F.meta)||void 0===c?void 0:null===(d=c.assetAdditional)||void 0===d?void 0:d.estimatedEndDate),Q=Math.abs(K.diff(J,"days")),ec=J.diff(new Date,"days"),ed=function(e){e.stopPropagation();var n={customer:F.customer,location:F.location,sublocation:F.sublocation,category:F.category,asset:{id:F.id,name:F.name},assetCategory:F.category,customerUser:H("admin")?{id:F.location.customerUser.id,name:"".concat(F.location.customerUser.nameFirst," ").concat(F.location.customerUser.nameLast)}:{id:L.id,name:"".concat(L.nameFirst," ").concat(L.nameLast)}};G(n),p().push("/dashboard/issues/manage")},eu=function(){var e,n;return(null===(e=F.meta)||void 0===e?void 0:null===(n=e.assetAdditional)||void 0===n?void 0:n.datePutInService)?(0,i.jsxs)(w.Z,{children:[ec,"/",Q," days"]}):null};return(0,i.jsxs)(y.Z,{expanded:A,onChange:R,children:[(0,i.jsx)(Z.Z,{expandIcon:(0,i.jsx)(q.Z,{}),children:(0,i.jsx)(w.Z,{typography:"h6",children:"Information"})}),(0,i.jsx)(b.Z,{children:(0,i.jsxs)(v.Z,{rowGap:2,children:[(0,i.jsx)(w.Z,{typography:"h6",children:F.name}),(0,i.jsx)(v.Z,{sx:el.bubblesWrapper,rowGap:2,children:(0,i.jsxs)(v.Z,{direction:"row",columnGap:1,children:[(0,i.jsx)(et.Z,{}),(0,i.jsxs)(w.Z,{typography:"h6",children:[F.location.name,F.sublocation?"/".concat(null===(u=F.sublocation)||void 0===u?void 0:u.name,"/"):"",null===(h=F.parentAsset)||void 0===h?void 0:h.name]})]})}),(0,i.jsx)(v.Z,{rowGap:2,children:(0,i.jsxs)(v.Z,{direction:"row",columnGap:2,children:[(0,i.jsxs)(f.Z,{sx:(0,a.Z)((0,r.Z)({},el.bubble),{backgroundColor:U.color,color:U.fontColor}),children:[(0,i.jsx)(w.Z,{typography:"subtitle1",sx:el.bold,children:"Status:\xa0"}),(0,i.jsx)(w.Z,{typography:"subtitle1",sx:el.thin,children:F.preparationStatus?null==U?void 0:U.label:"N/A"})]}),(0,i.jsxs)(f.Z,{sx:(0,a.Z)((0,r.Z)({},el.bubble),{backgroundColor:W.color,color:W.fontColor}),children:[(0,i.jsx)(w.Z,{typography:"subtitle1",sx:el.bold,children:"Condition:\xa0"}),(0,i.jsx)(w.Z,{typography:"subtitle1",sx:el.thin,children:F.condition?null==W?void 0:W.label:"N/A"})]})]})}),(0,i.jsxs)(v.Z,{direction:"row",justifyContent:"space-between",sx:{overflowX:"auto"},children:[(0,i.jsx)(ea.Pd,{id:"download-asset-qrcode-".concat(F.id),value:O}),(0,i.jsx)(ea.eI,{id:"download-asset-barcode-".concat(F.id),value:F.id}),(0,i.jsx)(X.Z,{onClick:Y,size:"large",sx:{borderRadius:"10px!important",width:"130px"},children:(0,i.jsxs)(v.Z,{alignItems:"center",children:[(0,i.jsx)(ee.Z,{sx:{width:"50px",height:"50px"},color:"secondary"}),(0,i.jsx)(w.Z,{children:"Primary media"})]})}),(0,i.jsx)(X.Z,{onClick:ed,size:"large",sx:{borderRadius:"10px!important",width:"130px"},children:(0,i.jsxs)(v.Z,{alignItems:"center",children:[(0,i.jsx)(en.Z,{sx:{width:"50px",height:"50px"},color:"secondary"}),(0,i.jsx)(w.Z,{children:"Work order"})]})})]}),(0,i.jsxs)(v.Z,{direction:"row",rowGap:6,flexWrap:"wrap",justifyContent:"space-around",children:[(0,i.jsxs)(f.Z,{sx:el.tile,children:[(0,i.jsx)(w.Z,{typography:"h6",children:"Initial cost"}),(0,i.jsx)(w.Z,{typography:"subtitle1",sx:el.bold,children:(null===(m=F.meta)||void 0===m?void 0:null===(x=m.assetAdditional)||void 0===x?void 0:x.initialCost)?"\xa3".concat(F.meta.assetAdditional.initialCost):"N/A"})]}),(0,i.jsxs)(f.Z,{sx:el.tile,children:[(0,i.jsx)(w.Z,{typography:"h6",children:"Annual cost"}),(0,i.jsx)(w.Z,{typography:"subtitle1",sx:el.bold,children:(null===(g=F.meta)||void 0===g?void 0:null===(j=g.assetAdditional)||void 0===j?void 0:j.estimatedAnnualMaintenance)?"\xa3".concat(F.meta.assetAdditional.estimatedAnnualMaintenance):"N/A"})]}),(0,i.jsxs)(f.Z,{sx:el.tile,children:[(0,i.jsx)(w.Z,{typography:"h6",children:"Residual value"}),(0,i.jsx)(w.Z,{typography:"subtitle1",sx:el.bold,children:(null===(C=F.meta)||void 0===C?void 0:null===(I=C.assetAdditional)||void 0===I?void 0:I.residualValue)?"\xa3".concat(F.meta.assetAdditional.residualValue):"N/A"})]}),(0,i.jsxs)(f.Z,{sx:el.tile,children:[(0,i.jsx)(w.Z,{typography:"h6",children:"Versus budget"}),(0,i.jsx)(w.Z,{typography:"subtitle1",sx:(0,r.Z)({color:V<=100?er.Q.COLOUR.success:er.Q.COLOUR.danger},el.bold),children:(null===($=F.meta)||void 0===$?void 0:null===(_=$.assetAdditional)||void 0===_?void 0:_.estimatedAnnualMaintenance)?"".concat(V,"%"):"N/A"})]})]}),(0,i.jsx)(f.Z,{sx:(0,a.Z)((0,r.Z)({},el.tile),{width:"90%",margin:"20px auto"}),children:(0,i.jsxs)(v.Z,{rowGap:2,children:[(0,i.jsx)(w.Z,{typography:"h6",children:"Useful time remaining"}),(0,i.jsx)(ei,{labelComponent:eu,currentStep:(null===(M=F.meta)||void 0===M?void 0:M.assetAdditional)?ec/Q*100:0,circularProgressSx:{color:S()().add(6,"months").isSameOrBefore(J)?er.Q.COLOUR.success:er.Q.COLOUR.danger}})]})})]})})]})},ed=t(78840),eu=t.n(ed),ep=t(75708),eh=t.n(ep),em=Array(12).fill("").map(function(e,n){return S()().subtract(n,"month").format("MM.YYYY")}).reverse().map(function(e){return{name:e,y:0,color:"#BFBFBF"}}),ef=function(e){var n=Object.entries(e).map(function(e){var n,t=(0,s.Z)(e,2);return{name:t[0],y:t[1],color:"#BFBFBF"}});return em.map(function(e){var t;return(null!==(t=n.find(function(n){return n.name===e.name}))&&void 0!==t?t:null)||e})},ex=function(e){var n=e.expanded,o=e.onChangeExpanded,r=e.jobsTotalByMonths,a=function(e){e.reflow()};t(18393)(eu());var s=(0,B.useMemo)(function(){return Array(12).fill("").map(function(e,n){return S()().subtract(n,"month").format("MM.YYYY")}).reverse()},[]);return(0,i.jsxs)(y.Z,{expanded:n,onChange:o,children:[(0,i.jsx)(Z.Z,{expandIcon:(0,i.jsx)(q.Z,{}),children:(0,i.jsx)(w.Z,{typography:"h6",children:"Finances"})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(eh(),{callback:a,constructorType:"chart",Highcharts:eu(),options:{chart:{type:"column"},title:{text:null},series:[{name:null,data:ef(r)}],xAxis:{title:null,categories:s},yAxis:{title:null,formatter:function(){return"\xa3".concat(this.value)}}}})})]})},eg=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return e.reduce(function(e,i){var s=n(i),c=t(s);return e[c]?(0,a.Z)((0,r.Z)({},e),(0,o.Z)({},c,(0,l.Z)(e[c]).concat([i]))):(0,a.Z)((0,r.Z)({},e),(0,o.Z)({},c,[i]))},{})},ev=function(e){var n,t,c,d,u,y,b,Z,j,w,C=e.id,I=e.editable,q=e.showMediaButtons,P=(0,B.useState)(["asset-details","asset-qr-code","asset-bar-code","asset-floorplan","asset-media","asset-work-orders","asset-information","asset-charts"]),$=P[0],_=P[1],E=(0,h.aM)(m.yC,{variables:{id:C}}),T=E.loading,A=E.data,R=(void 0===A?{asset:{}}:A).asset,D=null!==(w=null===(n=R.assetEntity)||void 0===n?void 0:n.map(function(e){return e.job}).filter(function(e){var n=e.timingStart,t=e.timingEnd;return S()(n).isSameOrAfter(S()().subtract(12,"month"))&&S()().isSameOrBefore(S()(t))}))&&void 0!==w?w:[],F=Object.entries(eg(D,function(e){return e.timingStart},function(e){return S()(e.timingStart).format("MM.YYYY")})).reduce(function(e,n){var t=(0,s.Z)(n,2),i=t[0],l=t[1].reduce(function(e,n){var t,i,o,r;return e+(null!==(r=null===(t=n.customerFinances)||void 0===t?void 0:null===(i=t.amountInfo)||void 0===i?void 0:i.vatTotal)&&void 0!==r?r:0/((null===(o=n.assets)||void 0===o?void 0:o.length)||1))},0);return(0,a.Z)((0,r.Z)({},e),(0,o.Z)({},i,l))},{});if(!T&&!(null==R?void 0:R.id))return p().push("/404"),null;var O=function(e){return function(n,t){t?_(function(n){return(0,l.Z)(n).concat([e])}):_(function(n){return n.filter(function(n){return n!==e})})}},N="".concat(U.C1.portalUrl,"/dashboard/assets/view?id=").concat(C),G=(null===(t=R.category)||void 0===t?void 0:t.childs)||[],z=(null===(c=R.meta)||void 0===c?void 0:c.categoryQuestions)||{};return T?(0,i.jsx)(v.Z,{height:"100%",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(x.Z,{color:"secondary"})}):(0,i.jsxs)(g.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(g.ZP,{item:!0,xs:12,md:6,lg2:3,children:(0,i.jsxs)(v.Z,{spacing:2,children:[(0,i.jsx)(ec,{asset:R,qrCodeValue:N,expanded:$.includes("asset-information"),onChangeExpanded:O("asset-information"),jobsTotalByMonths:F}),(0,i.jsx)(M,{editable:I,expanded:$.includes("asset-details"),onChangeExpanded:O("asset-details"),assetId:R.id,name:R.name,description:R.description,parentAsset:null===(d=R.parentAsset)||void 0===d?void 0:d.name,customer:null===(u=R.customer)||void 0===u?void 0:u.name,location:null===(y=R.location)||void 0===y?void 0:y.name,sublocation:null===(b=R.sublocation)||void 0===b?void 0:b.name,category:null===(Z=R.category)||void 0===Z?void 0:Z.name,createdAt:R.createdAt,status:R.status,categoryQuestions:G,categoryAnswers:z,assetAdditional:null==R?void 0:null===(j=R.meta)||void 0===j?void 0:j.assetAdditional})]})}),(0,i.jsx)(g.ZP,{item:!0,xs:12,md:6,lg2:4,children:(0,i.jsxs)(v.Z,{spacing:2,children:[(0,i.jsx)(Q,{editable:I,expanded:$.includes("asset-floorplan"),onChangeExpanded:O("asset-floorplan"),assetId:C,asset:R}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(k.G,{showActionButtons:q,expanded:$.includes("asset-media"),onChangeExpanded:O("asset-media"),details:!0,entity:"Asset",category:null,entityId:parseInt(C)})}),(0,i.jsx)(ex,{expanded:$.includes("asset-charts"),onChangeExpanded:O("asset-charts"),jobsTotalByMonths:F})]})}),(0,i.jsx)(g.ZP,{item:!0,xs:12,md:6,lg2:5,children:(0,i.jsx)(W,{editable:I,expanded:$.includes("asset-work-orders"),onChangeExpanded:O("asset-work-orders"),assetId:C,asset:R})})]})};ev.defaultProps={showMediaButtons:!0},ev.propTypes={id:d().number.isRequired,editable:d().bool.isRequired,showMediaButtons:d().bool.isRequired};var ey=t(58849),eb=function(){var e,n,t=(0,D.x)(),o=t.user,r=t.hasRole,a=(0,u.useRouter)().query,s=(0,O.q)(),l=null==s?void 0:null===(e=s.admin)||void 0===e?void 0:null===(n=e.modules)||void 0===n?void 0:n.assets,c=r("admin"),d=r("tenant");return o?l?(0,i.jsx)(ev,{id:a.id,editable:c,showMediaButtons:!d}):(p().push("/404"),null):(p().push("/account/sign-in"),null)},eZ=eb;eb.getLayout=function(e){return(0,i.jsx)(ey.Z,{children:e})}},40872:function(e,n,t){"use strict";function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function o(){return i.apply(this,arguments)}t.d(n,{Z:function(){return o}})}},function(e){e.O(0,[3662,6898,2283,212,8890,619,2583,4135,8579,6043,1838,4244,3911,1417,3776,1564,3054,2329,8500,778,4046,1023,7454,1870,2797,1047,8062,3058,6313,597,3754,1050,4061,7490,8849,8344,6733,5656,9774,2888,179],function(){return e(e.s=38727)}),_N_E=e.O()}]);