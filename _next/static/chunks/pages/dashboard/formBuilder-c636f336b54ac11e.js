(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[103],{41899:function(n,e,t){"use strict";var r=t(64836);e.Z=void 0;var i=r(t(64938)),o=t(85893);e.Z=(0,i.default)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")},9869:function(n,e,t){"use strict";var r=t(64836);e.Z=void 0;var i=r(t(64938)),o=t(85893);e.Z=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"ModeEdit")},42761:function(n,e,t){"use strict";var r=t(64836);e.Z=void 0;var i=r(t(64938)),o=t(85893);e.Z=(0,i.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},23795:function(n,e,t){"use strict";t.d(e,{Z:function(){return w}});var r=t(63366),i=t(87462),o=t(67294),a=t(63961),s=t(58510),u=t(98216),l=t(90948),d=t(71657),c=t(79674),m=t(51705),f=t(15861),p=t(1977),v=t(8027);function h(n){return(0,v.ZP)("MuiLink",n)}let g=(0,p.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var x=t(54844),b=t(2101);let y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Z=n=>y[n]||n,S=({theme:n,ownerState:e})=>{let t=Z(e.color),r=(0,x.DW)(n,`palette.${t}`,!1)||e.color,i=(0,x.DW)(n,`palette.${t}Channel`);return"vars"in n&&i?`rgba(${i} / 0.4)`:(0,b.Fq)(r,.4)};var F=t(85893);let I=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],j=n=>{let{classes:e,component:t,focusVisible:r,underline:i}=n,o={root:["root",`underline${(0,u.Z)(i)}`,"button"===t&&"button",r&&"focusVisible"]};return(0,s.Z)(o,h,e)},C=(0,l.ZP)(f.Z,{name:"MuiLink",slot:"Root",overridesResolver(n,e){let{ownerState:t}=n;return[e.root,e[`underline${(0,u.Z)(t.underline)}`],"button"===t.component&&e.button]}})(({theme:n,ownerState:e})=>(0,i.Z)({},"none"===e.underline&&{textDecoration:"none"},"hover"===e.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===e.underline&&(0,i.Z)({textDecoration:"underline"},"inherit"!==e.color&&{textDecorationColor:S({theme:n,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===e.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${g.focusVisible}`]:{outline:"auto"}})),_=o.forwardRef(function(n,e){let t=(0,d.Z)({props:n,name:"MuiLink"}),{className:s,color:u="primary",component:l="a",onBlur:f,onFocus:p,TypographyClasses:v,underline:h="always",variant:g="inherit",sx:x}=t,b=(0,r.Z)(t,I),{isFocusVisibleRef:Z,onBlur:S,onFocus:_,ref:w}=(0,c.Z)(),[k,P]=o.useState(!1),$=(0,m.Z)(e,w),q=n=>{S(n),!1===Z.current&&P(!1),f&&f(n)},M=n=>{_(n),!0===Z.current&&P(!0),p&&p(n)},D=(0,i.Z)({},t,{color:u,component:l,focusVisible:k,underline:h,variant:g}),A=j(D);return(0,F.jsx)(C,(0,i.Z)({color:u,className:(0,a.Z)(A.root,s),classes:v,component:l,onBlur:q,onFocus:M,ref:$,ownerState:D,variant:g,sx:[...Object.keys(y).includes(u)?[]:[{color:u}],...Array.isArray(x)?x:[x]]},b))});var w=_},55221:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/formBuilder",function(){return t(15372)}])},48580:function(n,e,t){"use strict";t.d(e,{q:function(){return p}});var r=t(26042),i=t(69396),o=t(99534),a=t(85893),s=t(87918),u=t(98456),l=t(23776),d=t(50135),c=t(67294),m=t(45697),f=t.n(m),p=function(n){var e=n.loading,t=n.setSearch,m=n.textFieldProps,f=(0,o.Z)(n,["loading","setSearch","textFieldProps"]),p=(0,c.useState)(""),v=p[0],h=p[1];return(0,c.useEffect)(function(){var n=setTimeout(function(){t(v)},500);return function(){return clearTimeout(n)}},[v,t]),(0,a.jsx)(l.Z,(0,i.Z)((0,r.Z)({isOptionEqualToValue:function(n,e){return n.value===e.value}},f),{loading:e,onInputChange:function(n,e){h(e)},getOptionLabel:function(n){return n.label},renderTags:function(n,e){return n.map(function(n,t){return(0,a.jsx)(s.Z,(0,r.Z)({size:"small",label:n.label},e({index:t})))})},renderInput:function(n){return(0,a.jsx)(d.Z,(0,i.Z)((0,r.Z)({},n,m),{InputProps:(0,i.Z)((0,r.Z)({},n.InputProps,m.InputProps||{}),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[e?(0,a.jsx)(u.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))}}))};p.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}},p.propTypes={multiple:f().bool,limitTags:f().number,filterSelectedOptions:f().bool,color:f().string,loading:f().bool,value:f().oneOf([f().array,f().object]),onChange:f().func,options:f().arrayOf(f().shape({value:f().any.isRequired,label:f().string.isRequired})).isRequired,onOpen:f().func,setSearch:f().func,textFieldProps:f().shape({label:f().string,variant:f().oneOf(["standard"]),color:f().string,error:f().bool,helperText:f().string})}},38216:function(n,e,t){"use strict";t.d(e,{FE:function(){return A},HS:function(){return M},Q2:function(){return q},T0:function(){return _},Vw:function(){return D},_q:function(){return T},cH:function(){return Z},dR:function(){return I},eu:function(){return P},fB:function(){return w},g$:function(){return S},ji:function(){return C},kH:function(){return k},n:function(){return j},q0:function(){return $},sy:function(){return F}});var r=t(7297),i=t(75063);function o(){var n=(0,r.Z)(["\n  query GetForms(\n    $q: String\n    $name: String\n    $userId: Int\n    $status: Boolean\n    $createdAt: timestamptz\n    $orderBy: [Form_order_by!]\n    $limit: Int\n    $offset: Int\n  ) {\n    Form(\n      where: {\n        _and: [\n          { id: { _neq: 1 } }\n          { name: { _ilike: $q } }\n          { userId: { _eq: $userId } }\n          { status: { _eq: $status } }\n          { createdAt: { _eq: $createdAt } }\n        ]\n      }\n      order_by: $orderBy\n      limit: $limit\n      offset: $offset\n    ) {\n      id\n      name\n      description\n      createdAt\n      userId\n      status\n      formFields\n      settings\n      FormUser {\n        id\n        nameFirst\n        nameLast\n        __typename\n      }\n      __typename\n    }\n    meta: Form_aggregate(\n      where: {\n        _and: [\n          { id: { _neq: 1 } }\n          { name: { _ilike: $q } }\n          { userId: { _eq: $userId } }\n          { status: { _eq: $status } }\n          { createdAt: { _eq: $createdAt } }\n        ]\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return o=function(){return n},n}function a(){var n=(0,r.Z)(["\n  mutation UpdateStatus($id: Int!, $status: Boolean!) {\n    update_Form_by_pk(pk_columns: { id: $id }, _set: { status: $status }) {\n      id\n      status\n    }\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,r.Z)(['\n  mutation UpdateStatusAndEntity($formId: Int!) {\n    update_Form(where: { id: { _eq: $formId } }, _set: { status: false }) {\n      affected_rows\n    }\n    delete_FormSubmissions(\n      where: {\n        formId: { _eq: $formId }\n        _or: [\n          {\n            entity: { _eq: "Taxonomy" }\n            FormSubmissionsTaxonomies: {\n              status: { _in: ["active", "followOn", "reportSent", "completed"] }\n            }\n          }\n          {\n            entity: { _eq: "Job" }\n            FormSubmissionsJobs: { status: { _in: ["raised", "offered", "accepted"] } }\n          }\n          {\n            entity: { _eq: "Ppm" }\n            FormSubmissionsJobs: { status: { _in: ["raised", "offered", "accepted"] } }\n          }\n          { entity: { _eq: "Task" }, FormSubmissionsTasks: { status: { _in: ["new", "todo"] } } }\n          { entity: { _eq: "Workflow" }, FormSubmissionsWorkflows: { status: { _in: ["active"] } } }\n        ]\n      }\n    ) {\n      affected_rows\n    }\n  }\n']);return s=function(){return n},n}function u(){var n=(0,r.Z)(["\n  query GetFormNames {\n    Form {\n      name\n      id\n      formFields\n      settings\n    }\n  }\n"]);return u=function(){return n},n}function l(){var n=(0,r.Z)(["\n  query GetActiveForms {\n    Form(where: { status: { _eq: true } }) {\n      name\n      id\n      status\n      formFields\n      settings\n    }\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,r.Z)(["\n  query GetFormById($id: Int!) {\n    Form_by_pk(id: $id) {\n      id\n      userId\n      status\n      name\n      description\n      formFields\n      adminId\n      createdAt\n      updatedAt\n      settings\n    }\n  }\n"]);return d=function(){return n},n}function c(){var n=(0,r.Z)(["\n  mutation AddForm($object1: Form_insert_input!) {\n    insert_Form_one(object: $object1) {\n      id\n    }\n  }\n"]);return c=function(){return n},n}function m(){var n=(0,r.Z)(["\n  mutation UpdateForm($id: Int!, $changes: Form_set_input!) {\n    update_Form_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n      userId\n      status\n      name\n      description\n      formFields\n      settings\n    }\n  }\n"]);return m=function(){return n},n}function f(){var n=(0,r.Z)(['\n  mutation UpdateSubmissionsByForm($formId: Int!, $formFields: jsonb!) {\n    update_FormSubmissions(\n      where: { formId: { _eq: $formId }, entity: { _eq: "Taxonomy" } }\n      _set: { submissionData: null, formFields: $formFields }\n    ) {\n      affected_rows\n      returning {\n        id\n        formId\n        formFields\n        submissionData\n        entity\n        entityId\n      }\n    }\n  }\n']);return f=function(){return n},n}function p(){var n=(0,r.Z)(['\n  mutation UpdateIncompleteSubmissionsByForm(\n    $formId: Int!\n    $formFields: jsonb!\n    $submissionData: jsonb = null\n  ) {\n    update_FormSubmissions(\n      where: {\n        formId: { _eq: $formId }\n        entity: { _neq: "Taxonomy" }\n        _or: [\n          {\n            entity: { _eq: "Job" }\n            FormSubmissionsJobs: { status: { _in: ["raised", "offered", "accepted"] } }\n          }\n          {\n            entity: { _eq: "Ppm" }\n            FormSubmissionsJobs: { status: { _in: ["raised", "offered", "accepted"] } }\n          }\n          { entity: { _eq: "Task" }, FormSubmissionsTasks: { status: { _in: ["new", "todo"] } } }\n          { entity: { _eq: "Workflow" }, FormSubmissionsWorkflows: { status: { _in: ["active"] } } }\n        ]\n      }\n      _set: { submissionData: $submissionData, formFields: $formFields }\n    ) {\n      affected_rows\n      returning {\n        id\n        formId\n        formFields\n        submissionData\n        entity\n        entityId\n      }\n    }\n  }\n']);return p=function(){return n},n}function v(){var n=(0,r.Z)(["\n  query GetFormSubmissionsByTaxonomyIds($taxonomyIds: [Int!]) {\n    FormSubmissions(where: { entityId: { _in: $taxonomyIds } }) {\n      id\n      entity\n      entityId\n      form: FormSubmissionsForm {\n        name\n      }\n    }\n  }\n"]);return v=function(){return n},n}function h(){var n=(0,r.Z)(["\n  query GetFormSubmission($entity: String!, $entityId: Int!) {\n    FormSubmissions(\n      where: { _and: [{ entity: { _eq: $entity } }, { entityId: { _eq: $entityId } }] }\n    ) {\n      id\n      formId\n      userId\n      formFields\n      submissionData\n      entity\n      entityId\n      type\n      form: FormSubmissionsForm {\n        name\n        description\n        status\n        settings\n      }\n    }\n  }\n"]);return h=function(){return n},n}function g(){var n=(0,r.Z)(["\n  query GetFormSubmission($id: Int!) {\n    FormSubmissions_by_pk(id: $id) {\n      id\n      formId\n      formFields\n      submissionData\n      entity\n      entityId\n      form: FormSubmissionsForm {\n        name\n        status\n        description\n      }\n    }\n  }\n"]);return g=function(){return n},n}function x(){var n=(0,r.Z)(["\n  mutation CreateFormSubmissions(\n    $formId: Int!\n    $userId: Int!\n    $formFields: jsonb!\n    $submissionData: jsonb\n    $entity: String!\n    $entityId: Int!\n  ) {\n    insert_FormSubmissions_one(\n      object: {\n        formId: $formId\n        userId: $userId\n        formFields: $formFields\n        submissionData: $submissionData\n        entity: $entity\n        entityId: $entityId\n      }\n    ) {\n      id\n      formId\n      userId\n      formFields\n      submissionData\n      entity\n      entityId\n    }\n  }\n"]);return x=function(){return n},n}function b(){var n=(0,r.Z)(["\n  mutation UpdateFormSubmission($id: Int!, $changes: FormSubmissions_set_input!) {\n    update_FormSubmissions_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n      formId\n      formFields\n      submissionData\n      entity\n      entityId\n    }\n  }\n"]);return b=function(){return n},n}function y(){var n=(0,r.Z)(["\n  mutation deleteFormSubmission($id: Int!) {\n    delete_FormSubmissions(where: { id: { _eq: $id } }) {\n      affected_rows\n    }\n  }\n"]);return y=function(){return n},n}var Z=(0,i.Ps)(o()),S=(0,i.Ps)(a()),F=(0,i.Ps)(s()),I=(0,i.Ps)(u()),j=(0,i.Ps)(l()),C=(0,i.Ps)(d()),_=(0,i.Ps)(c()),w=(0,i.Ps)(m()),k=(0,i.Ps)(f()),P=(0,i.Ps)(p()),$=(0,i.Ps)(v()),q=(0,i.Ps)(h()),M=(0,i.Ps)(g()),D=(0,i.Ps)(x()),A=(0,i.Ps)(b()),T=(0,i.Ps)(y())},12547:function(n,e,t){"use strict";t.d(e,{r:function(){return c}});var r=t(26042),i=t(69396),o=t(85893),a=t(45697),s=t.n(a),u=t(41664),l=t.n(u),d=t(23795),c=function(n){var e=n.children,t=n.href,a=n.noWrap,s=n.target,u=n.sx,c=void 0===u?{}:u;return a?(0,o.jsx)(o.Fragment,{children:e}):t?(0,o.jsx)(l(),{href:t,target:s,passHref:!0,children:(0,o.jsx)(d.Z,(0,i.Z)((0,r.Z)({sx:c},n),{children:e}))}):(0,o.jsx)(d.Z,(0,i.Z)((0,r.Z)({sx:c},n),{children:e}))};c.defaultProps={onClick:function(n){n.stopPropagation()}},c.propTypes={onClick:s().func,href:s().string,noWrap:s().bool,color:s().string}},93884:function(n,e,t){"use strict";t.d(e,{C:function(){return f}});var r=t(26042),i=t(69396),o=t(85893);t(67294);var a=t(45697),s=t(90948),u=t(15861),l=t(51233),d=t(11057),c=t(61730),m=(0,s.ZP)("img")({width:"300px",height:"250px"}),f=function(n){var e=n.imageSrc,t=n.sx,a=n.imageSx,s=n.title,f=n.titleSx,p=n.subtitleFirstLine,v=n.subtitleFirstLineSx,h=n.subtitleSecondLine,g=n.subtitleSecondLineSx,x=n.buttonText,b=n.onAction,y=(0,c.Z)("(max-width: 400px)");return(0,o.jsxs)(l.Z,{sx:(0,i.Z)((0,r.Z)({},t),{width:"100%",height:"100%"}),justifyContent:"center",alignItems:"center",spacing:2,color:"#757575",children:[(0,o.jsx)(m,{src:e,sx:(0,i.Z)((0,r.Z)({},a),{width:y?"250px":"300px"})}),(0,o.jsx)(u.Z,{typography:"h5",sx:(0,r.Z)({},f),children:s}),(0,o.jsxs)(l.Z,{alignItems:"center",sx:{padding:"0px 10px",textAlign:"center"},children:[(0,o.jsx)(u.Z,{sx:(0,r.Z)({},v),children:p}),(0,o.jsx)(u.Z,{sx:(0,r.Z)({},g),children:h})]}),x&&b&&(0,o.jsx)(d.Z,{variant:"contained",color:"secondary",onClick:b,children:x})]})};f.propTypes={imageSrc:a.string,title:a.string,subtitleFirstLine:a.string,subtitleSecondLine:a.string,onAction:a.func,sx:a.object,imageSx:a.object,titleSx:a.object,subtitleFirstLineSx:a.object,subtitleSecondLineSx:a.object},f.defaultProps={title:"",subtitleFirstLine:"",subtitleSecondLine:"",sx:{},imageSx:{},titleSx:{},subtitleFirstLineSx:{},subtitleSecondLineSx:{},onAction:null}},15033:function(n,e,t){"use strict";t.d(e,{i:function(){return j}});var r=t(14924),i=t(26042),o=t(69396),a=t(85893),s=t(67294),u=t(11163),l=t(45697),d=t.n(l),c=t(61870),m=t(5616),f=t(51233),p=t(15861),v=t(90948),h=t(41796),g=t(29217),x=t(45111),b=t(46003),y=t(70872),Z=t(58886),S=t(61730),F=function(n){var e=n.currentPage,t=n.totalCount,r=n.pageSize,o=n.onPageChange,s=(0,S.Z)("(max-width:400px)"),u=(0,S.Z)("(max-width:500px)");return(0,a.jsx)(I,{mb:2,page:e,count:Math.ceil(t/r),onChange:function(n,e){return o(e)},variant:"outlined",shape:"rounded",size:s?"small":"medium",hidePrevButton:1===e,hideNextButton:e===Math.ceil(t/r),siblingCount:u?0:1,renderItem:function(n){return(0,a.jsx)(Z.Z,(0,i.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},n))}})};F.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}},F.propTypes={currentPage:d().number,totalCount:d().number,pageSize:d().number,onPageChange:d().func};var I=(0,v.ZP)(y.Z)(function(n){var e,t=n.hidePrevButton,o=n.hideNextButton,a=n.theme;return e={},(0,r.Z)(e,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,r.Z)(e,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,r.Z)(e,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,r.Z)(e,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,r.Z)(e,"& button.Mui-selected",(0,i.Z)({color:a.palette.white.main,backgroundColor:a.palette.secondary.main},o?{borderRadius:"0 5px 5px 0"}:{},t?{borderRadius:"5px 0 0 5px"}:{})),e}),j=(0,s.forwardRef)(function(n,e){var t=n.columns,r=n.history,o=n.initialSort,l=n.meta,d=n.refetch,c=n.paginationSize,m=n.containerHeight,v=n.noResultsMessage,h=n.autoHeight,y=(0,u.useRouter)(),Z=y.query,S=void 0===Z?{}:Z,I=(0,s.useState)(parseInt(null==S?void 0:S.page,10)||1),j=I[0],w=I[1],k=(0,s.useState)(c||b.C1.paginationSize),P=k[0],$=k[1];o||(o={item:"createdAt",order:"desc"});var q=(0,s.useState)({item:o.item,order:o.order}),M=q[0],D=q[1],A=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=y.query,t=void 0===e?{}:e;if(n>1?t.page=n:delete t.page,!(Object.keys(t).length>0))return{};var r=Object.keys(t).map(function(e){return"page"===e?"".concat(e,"=").concat(n):"".concat(e,"=").concat(t[e])}).join("&");return"?".concat(r)},T=function(){D({item:o.item,order:o.order}),w(1);var n=A();y.push(n),$(c||b.C1.paginationSize)};(0,s.useImperativeHandle)(e,function(){return{currentPage:j,pageSize:P,sort:M,resetPagination:function(){T()}}});var H=function(n){var e=A(n);r&&y.push(e),w(n),!r&&d&&d()},N=function(n){n&&n.field&&n.sort?(D({item:t.find(function(e){return e.field===n.field}).sortName||n.field||n.item||o.item,order:n.sort||n.order||o.order}),d&&d()):(D({item:o.item,order:o.order}),d&&d())};return(0,a.jsxs)(C,{containerHeight:m,children:[(0,a.jsx)(_,(0,i.Z)({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:h,sortingMode:"server",onSortModelChange:function(n){return N(n[0])},columns:t,pageSize:P,slots:{columnSortedAscendingIcon:function(){return(0,a.jsx)(g.Z,{})},columnSortedDescendingIcon:function(){return(0,a.jsx)(x.Z,{})},columnUnsortedIcon:function(){return(0,a.jsxs)(f.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,a.jsx)(g.Z,{sx:{marginBottom:"-15px"}}),(0,a.jsx)(x.Z,{})]})},noResultsOverlay:function(){return(0,a.jsx)(f.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(p.Z,{children:v})})},noRowsOverlay:function(){return(0,a.jsx)(f.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(p.Z,{children:v})})}}},n)),l&&Math.ceil(l.aggregate.totalCount/P)>1&&(0,a.jsx)(F,{currentPage:j,totalCount:l.aggregate.totalCount,pageSize:P,onPageChange:H})]})});j.propTypes={history:d().bool,initialSort:d().object,loading:d().bool,meta:d().object,refetch:d().func,paginationSize:d().number,noResultsMessage:d().string,columns:d().array.isRequired,rows:d().array.isRequired,autoHeight:d().bool},j.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var C=(0,v.ZP)(m.Z)(function(n){return{height:n.containerHeight,display:"flex",flexDirection:"column"}}),_=(0,v.ZP)(c.s)(function(n){var e,t=n.theme,a=n.hideHeader,s=(n.rows,n.loading,n.rowHeight),u=n.isPdf;return e={"--DataGrid-overlayHeight":"40px"},(0,r.Z)(e,"&.MuiDataGrid-root",(0,i.Z)({color:t.palette.black.main,border:"none"},u&&{"@media print":{display:"block"}})),(0,r.Z)(e,"& .MuiDataGrid-main",(0,i.Z)({},u&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(e,"& .MuiDataGrid-columnHeaders",(0,o.Z)((0,i.Z)({},a&&{display:"none"}),{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:t.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,r.Z)(e,"& .MuiDataGrid-virtualScroller",(0,i.Z)({},a&&{marginTop:"0 !important"},u&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(e,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,r.Z)(e,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(e,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(e,"& .MuiDataGrid-virtualScrollerContent",(0,i.Z)({},u&&{height:"initial !important",minHeight:"initial !important"})),(0,r.Z)(e,"& .MuiDataGrid-virtualScrollerRenderZone",(0,i.Z)({},u&&{position:"relative"})),(0,r.Z)(e,"& .MuiDataGrid-overlayWrapper",(0,r.Z)({},"& .MuiCircularProgress-root",{color:t.palette.secondary.main})),(0,r.Z)(e,"& .MuiDataGrid-row",(0,i.Z)({},u&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,r.Z)(e,"& .MuiDataGrid-row > .MuiDataGrid-cell",(0,i.Z)({},u&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,r.Z)(e,"& .MuiDataGrid-row.even",{backgroundColor:t.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,h.Fq)(t.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,h.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,h.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,h.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity)}}}}),e})},20705:function(n,e,t){"use strict";t.d(e,{x:function(){return d}});var r=t(14924),i=t(26042),o=t(69396),a=t(67294),s=t(96486),u=t(46003),l=function(n){try{return JSON.parse(n)}catch(e){return!1}},d=function(n){var e,t,d,c,m,f,p,v,h,g,x,b=n.filters,y=n.newFilters,Z=n.initialSort,S=(0,a.useRef)(),F=(0,a.useState)({}),I=F[0],j=F[1],C=(0,a.useState)({}),_=C[0],w=C[1],k=Z||{item:"createdAt",order:"desc"},P=(0,r.Z)({},(null===(e=S.current)||void 0===e?void 0:e.sort.item)||k.item,k.inneritem?(0,r.Z)({},k.inneritem,(null===(t=S.current)||void 0===t?void 0:t.sort.order)||k.order):(null===(d=S.current)||void 0===d?void 0:d.sort.order)||k.order);return(0,a.useEffect)(function(){var n=!(0,s.isEqual)(I,b),e=!(0,s.isEqual)(_,y);if(n&&(j(b),null==S||null===(r=S.current)||void 0===r||r.resetPagination()),e&&(w(y),null==S||null===(i=S.current)||void 0===i||i.resetPagination()),(null==S?void 0:null===(t=S.current)||void 0===t?void 0:t.setSort)&&!(n||e)){var t,r,i,o,a,u,l,d,c,m,f,p=(null===(o=S.current)||void 0===o?void 0:null===(a=o.sort)||void 0===a?void 0:a.item)&&(null===(u=S.current)||void 0===u?void 0:null===(l=u.sort)||void 0===l?void 0:l.order)?{item:null===(d=S.current)||void 0===d?void 0:null===(c=d.sort)||void 0===c?void 0:c.item,order:null===(m=S.current)||void 0===m?void 0:null===(f=m.sort)||void 0===f?void 0:f.order}:P;S.current.setSort(p)}},[b,y]),{initialData:(0,o.Z)((0,i.Z)({},b),{newFilters:(null==y?void 0:y.length)>0?y:void 0,limit:(null===(c=S.current)||void 0===c?void 0:c.pageSize)==="Infinity"?null:parseInt(null===(m=S.current)||void 0===m?void 0:m.pageSize,10)||u.C1.paginationSize,offset:((null===(f=S.current)||void 0===f?void 0:f.currentPage)-1||0)*((null===(p=S.current)||void 0===p?void 0:p.pageSize)||u.C1.paginationSize),orderBy:l(null===(v=S.current)||void 0===v?void 0:null===(h=v.sort)||void 0===h?void 0:null===(g=h.item)||void 0===g?void 0:g.replace(/ORDER/i,null===(x=S.current)||void 0===x?void 0:x.sort.order))||P}),initialSort:Z,ref:S}}},59938:function(n,e,t){"use strict";t.d(e,{X:function(){return p}});var r=t(14924),i=t(82670),o=t(828),a=t(7297),s=t(67294),u=t(6388),l=t(50319),d=t(75063),c=t(18586);function m(){var n=(0,a.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]);return m=function(){return n},n}function f(){var n=(0,a.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"]);return f=function(){return n},n}function p(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",a=(0,c.q)().user,d=(0,s.useState)(function(){try{switch(t){case"network":case"state":return e;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(n))||e}}catch(r){return e}}),m=d[0],f=d[1],p=function(e){try{var o=(0,i.Z)(e,Function)?e(m):e;switch(f(o),t){case"network":g({variables:{accountUserId:null==a?void 0:a.accountUserId,filters:(0,r.Z)({},n,o)}});break;case"sessionStorage":window.sessionStorage.setItem(n,JSON.stringify(o))}}catch(s){}};(0,u.aM)(v,{variables:{accountUserId:null==a?void 0:a.accountUserId},skip:"network"!==t,onCompleted:function(t){var r=t.accountUser;r&&f(r.filters[n]||e)}});var g=(0,o.Z)((0,l.D)(h),1)[0];return[m,p]}var v=(0,d.Ps)(m()),h=(0,d.Ps)(f())},15372:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return ni}});var r=t(85893),i=t(58849),o=t(47568),a=t(26042),s=t(69396),u=t(828),l=t(97582),d=t(67294),c=t(45697),m=t.n(c),f=t(30381),p=t.n(f),v=t(11163),h=t.n(v),g=t(50319),x=t(6388),b=t(38216),y=t(93946),Z=t(51233),S=t(11057),F=t(87918),I=t(90629),j=t(15861),C=t(41899),_=t(9869),w=t(15033),k=t(20705),P=t(93884),$=t(61730),q=t(50135),M=t(87109),D=t(5616),A=t(90948),T=t(11994),H=t(42283),N=t(42761),L=t(59938),U=t(48580),z=t(33754),B=function(n){var e,t,i,o,l=n.initialFilters,c=n.filters,m=n.setFilters,f=n.open,v=n.onClose,h=(0,$.Z)("(max-width: 400px)"),g=(0,d.useState)(""),F=g[0],I=g[1],C=(0,d.useState)(c.createdAt?p()(c.createdAt,"YYYY-MM-DD"):null),_=C[0],w=C[1],k=(0,u.Z)((0,L.X)("form_data_".concat(l.filterType),l),2),P=k[0],A=k[1],T=(0,x.aM)(b.cH,{variables:{userId:null!==(i=l.userId)&&void 0!==i?i:null,status:null!==(o=l.status)&&void 0!==o?o:null,name:c.name?c.name:null,q:""!==F?"%".concat(F,"%"):null,createdAt:l.createdAt||null,limit:50,offset:0}}),z=T.data,B=T.loading,Y=(0,d.useMemo)(function(){return(null==z?void 0:z.Form)||[]},[null==z?void 0:z.Form]),E=(0,d.useMemo)(function(){if(!z||!z.Form)return[];var n=new Map;return z.Form.forEach(function(e){var t=e.FormUser;t&&!n.has(e.userId)&&n.set(e.userId,{id:e.userId,fullName:"".concat(t.nameFirst," ").concat(t.nameLast)})}),Array.from(n.values())},[z]),V=(0,H.cI)({defaultValues:{name:P.name?{label:P.name,value:P.name}:null,status:void 0!==P.status&&null!==P.status?{label:!0===P.status?"Published":"Draft",value:P.status}:null,userId:P.userId&&(null==P?void 0:P.FormUser)?{label:"".concat(null==P?void 0:null===(e=P.FormUser)||void 0===e?void 0:e.nameFirst," ").concat(null==P?void 0:null===(t=P.FormUser)||void 0===t?void 0:t.nameLast),value:P.userId}:null,q:P.q||"",createdAt:P.createdAt?p()(P.createdAt).format("YYYY-MM-DD"):null}}),J=V.control,Q=V.handleSubmit,X=V.register,K=V.reset,nn=V.errors,ne=function(n){var e,t,r,i,o,u,d,f,p=(0,s.Z)((0,a.Z)({},c,n),{name:null!==(u=null==n?void 0:null===(e=n.name)||void 0===e?void 0:e.value)&&void 0!==u?u:null,q:(null==n?void 0:null===(t=n.name)||void 0===t?void 0:t.value)?null:n.q,FormUser:null===(r=Y.find(function(e){var t;return e.userId===(null==n?void 0:null===(t=n.userId)||void 0===t?void 0:t.value)}))||void 0===r?void 0:r.FormUser,status:(null==n?void 0:n.status)!==null&&(null==n?void 0:n.status)!==void 0?null==n?void 0:null===(i=n.status)||void 0===i?void 0:i.value:null,userId:null!==(d=null==n?void 0:null===(o=n.userId)||void 0===o?void 0:o.value)&&void 0!==d?d:null,createdAt:null!==(f=null==n?void 0:n.createdAt)&&void 0!==f?f:null});m((0,s.Z)((0,a.Z)({},p),{q:n.q?"%".concat(n.q,"%"):null})),A((0,s.Z)((0,a.Z)({},p),{filterType:l.filterType})),K(),v()},nt=(0,d.useCallback)(function(n){var e=p()(n).format("YYYY-MM-DD");w(e)},[]),nr=(0,d.useCallback)(function(){m(l),K(),v(),A((0,s.Z)((0,a.Z)({},l),{filterType:l.filterType}))},[l,m,A,v,K]);return(0,r.jsx)(O,{open:f,onClose:v,sx:R.modal,children:(0,r.jsx)("form",{onSubmit:Q(ne),children:(0,r.jsxs)(W,{children:[(0,r.jsx)(j.Z,{variant:"h6",sx:R.title,children:"Filters"}),(0,r.jsxs)(Z.Z,{direction:"row",flexWrap:"wrap",justifyContent:"center",children:[(0,r.jsx)(q.Z,{fullWidth:!0,variant:"standard",color:"secondary",label:"Search...",name:"q",value:F,inputRef:X,onChange:function(n){return I(n.target.value)},InputProps:{startAdornment:(0,r.jsx)(M.Z,{position:"start",children:(0,r.jsx)(y.Z,{edge:"start",children:(0,r.jsx)(N.Z,{})})})}}),(0,r.jsx)(D.Z,{sx:R.inputContainer(h),children:(0,r.jsx)(H.Qr,{name:"status",control:J,render:function(n){var e,t=n.value,i=n.onChange;return(0,r.jsx)(U.q,{value:t,onChange:function(n,e){return i(e)},limitTags:6,label:"Select status",options:[{label:"Published",value:!0},{label:"Draft",value:!1}],getOptionLabel:function(n){return"string"==typeof n?n:n.label||""},isOptionEqualToValue:function(n,e){return n.value===(null==e?void 0:e.value)},textFieldProps:{label:"Status by",variant:"standard",color:"secondary",helperText:null===(e=nn.status)||void 0===e?void 0:e.message}})}})}),(0,r.jsx)(D.Z,{sx:R.inputContainer(h),children:(0,r.jsx)(H.Qr,{name:"name",control:J,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(U.q,{value:e,limitTags:6,onChange:function(n,e){return t(e)},loading:B,getOptionLabel:function(n){return"string"==typeof n?n:n.label||""},options:(Y||[]).map(function(n){return{label:n.name,value:n.name}}),label:"Select name",isOptionEqualToValue:function(n,e){return n.value===(null==e?void 0:e.value)},setSearch:I,textFieldProps:{color:"secondary",variant:"standard",label:"Name"}})}})}),(0,r.jsx)(D.Z,{sx:R.inputContainer(h),children:(0,r.jsx)(H.Qr,{name:"createdAt",control:J,render:function(n){var e=n.onChange;return n.value,(0,r.jsx)(G,{value:_,inputFormat:"DD/MM/yyyy",onChange:function(n){if(n){var t=p()(n).format("YYYY-MM-DD");nt(n),e(t)}else e(null),nt(null)},renderInput:function(n){return(0,r.jsx)(q.Z,(0,s.Z)((0,a.Z)({},n),{fullWidth:!0,label:_?p()(_).format("DD/MM/yyyy"):"Created by date",color:"secondary",variant:"standard"}))}})}})}),(0,r.jsx)(D.Z,{sx:R.inputContainer(h),children:(0,r.jsx)(H.Qr,{name:"userId",control:J,render:function(n){var e,t=n.value,i=n.onChange;return(0,r.jsx)(U.q,{limitTags:6,color:"secondary",value:t,onChange:function(n,e){return i(e)},getOptionLabel:function(n){return"string"==typeof n?n:(null==n?void 0:n.fullName)||""},isOptionEqualToValue:function(n,e){return n.id===(null==e?void 0:e.id)},options:E.map(function(n){return{label:n.fullName||"User ".concat(n.id),value:n.id}}),label:"Created by",textFieldProps:{label:"Created by",variant:"standard",color:"secondary",error:nn.userId,helperText:null===(e=nn.userId)||void 0===e?void 0:e.message}})}})}),(0,r.jsxs)(Z.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,sx:R.bottomButtons,children:[(0,r.jsx)(S.Z,{variant:"contained",color:"danger",onClick:function(){return nr()},children:"Cancel"}),(0,r.jsx)(S.Z,{variant:"contained",color:"secondary",type:"submit",children:"Search"})]})]})]})})})},R={modal:{width:"100%",height:"100%"},inputContainer:function(n){return(0,a.Z)({width:n?"100%":"50%"},n?{padding:"10px 0px"}:{padding:"10px"})},singleFilter:function(n){return(0,a.Z)({width:"100%"},n?{padding:"10px 0px"}:{padding:"10px"})},checkboxContainer:function(n){return(0,a.Z)({width:"100%"},n?{padding:"10px 0px"}:{padding:"10px"})},bottomButtons:{marginTop:"20px"}},O=(0,A.ZP)(T.Z)(function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}),W=(0,A.ZP)(I.Z)(function(){return{padding:"24px",maxWidth:"700px",maxHeight:"100vh",overflowY:"scroll"}}),G=(0,A.ZP)(z.M)(function(){return{"&.MuiFormControl-root.MuiTextField-root":{width:"100%"}}});B.propTypes={initialFilters:m().object.isRequired,filters:m().object.isRequired,setFilters:m().func.isRequired,open:m().bool.isRequired,onClose:m().func.isRequired};var Y=(0,t(82066).Z)((0,r.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage"),E=t(64666),V=t(6514),J=t(31425),Q=function(n){var e=n.open,t=n.onClose,i=n.onConfirm,o=n.status;return(0,r.jsx)(E.Z,{open:e,onClose:t,PaperProps:{sx:{borderRadius:"8px",overflow:"hidden",width:"421px",maxWidth:"421px",height:"239px",display:"flex",alignItems:"center",justifyContent:"center",margin:0,position:"relative"}},slotProps:{backdrop:{sx:{backgroundColor:"rgba(0, 0, 0, 0.8)"}}},children:(0,r.jsxs)(D.Z,{sx:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(D.Z,{sx:{position:"absolute",top:0,left:0,right:0,backgroundColor:"#2673CA",color:"#ffffff",textAlign:"center",fontSize:"12px",display:"flex",justifyContent:"center",alignItems:"center",height:"64px"},children:(0,r.jsx)(j.Z,{align:"center",sx:{fontSize:"15px",justifyContent:"center"},children:o?"Are you sure you want to move this form to Draft?":"Are you sure you want to publish this form?"})}),(0,r.jsx)(V.Z,{sx:{display:"flex",justifyContent:"center",padding:0,paddingTop:"74px",flexGrow:1},children:(0,r.jsx)(j.Z,{align:"center",alignContent:"center",sx:{fontSize:"14px",maxWidth:"320px",lineHeight:1.57},children:o?(0,r.jsx)("div",{children:"It will no longer be available for selection in tasks and work orders. Existing work orders using this custom form will revert to the basic template."}):(0,r.jsx)("div",{children:"This will make it available for selection by users for tasks and work orders."})})}),(0,r.jsx)(J.Z,{sx:{display:"flex",justifyContent:"center",padding:0,marginTop:"10px",paddingBottom:"10px"},children:(0,r.jsxs)(Z.Z,{direction:"row",justifyContent:"center",sx:{display:"flex",gap:"46px"},children:[(0,r.jsx)(S.Z,{onClick:t,variant:"contained",size:"small",sx:{height:"36px",minHeight:"36px",minWidth:"100px",paddingInline:"24px",color:"#919191",backgroundColor:"transparent",justifyContent:"center",alignItems:"center",boxShadow:"none",border:"1px solid #9C9C9C",borderRadius:"4px",marginLeft:"0 !important","&:hover":{color:"#919191",backgroundColor:"transparent"}},children:"Cancel"}),(0,r.jsx)(S.Z,{onClick:i,variant:"contained",size:"small",sx:{height:"36px",minHeight:"36px",minWidth:"100px",paddingInline:"24px",color:"#F5F5F5",backgroundColor:"#1565C0",justifyContent:"center",alignItems:"center",boxShadow:"none",borderRadius:"4px","&:hover":{color:"#F5F5F5",backgroundColor:"#1565C0"}},children:o?"Move to Draft":"Publish form"})]})})]})})},X=t(12547),K=t(72852),nn=["status","name","createdAt","userId","q"],ne=function(n){var e,t,i,c,m,f,v=n.initialFilters,$=(0,d.useState)((0,a.Z)({},v)),q=$[0],M=$[1],D=(0,u.Z)((0,L.X)("form_data_".concat(v.filterType),v),2)[1],A=(0,d.useState)(!1),T=A[0],H=A[1],N=(0,d.useState)(!1),U=N[0],z=N[1],R=(0,d.useState)(null),O=R[0],W=R[1],G=(0,u.Z)((0,g.D)(b.g$),1)[0],E=(0,u.Z)((0,g.D)(b.sy),1)[0],V=(0,d.useMemo)(function(){return{item:"createdAt",order:"desc"}},[]),J=(0,k.x)({filters:q,initialSort:V}),ne=J.initialData,nt=J.ref,nr=(0,x.aM)(b.cH,{variables:(0,s.Z)((0,a.Z)({},ne,q),{userId:null!==(i=q.userId)&&void 0!==i?i:ne.userId,status:null!==(c=q.status)&&void 0!==c?c:ne.status,name:null!==(m=q.name)&&void 0!==m?m:ne.name,createdAt:null!==(f=q.createdAt)&&void 0!==f?f:ne.createdAt}),limit:50}),ni=nr.data,no=void 0===ni?{formbuilder:[],meta:{aggregate:{totalCount:0}}}:ni,na=no.Form,ns=no.meta,nu=nr.loading,nl=nr.refetch,nd=function(n,e){var t,r,i=n[e];return null===i?null:({name:i?"Name is ".concat(i):null,q:n.name?null:i?"Search is ".concat(i):null,status:void 0!==i?"Status is ".concat(!0===i?"Published":"Draft"):null,createdAt:i?"Created at ".concat(p()(i).format("DD/MM/YYYY")):null,userId:n.FormUser?"Created by ".concat(null===(t=n.FormUser)||void 0===t?void 0:t.nameFirst," ").concat(null===(r=n.FormUser)||void 0===r?void 0:r.nameLast):null})[e]||null},nc=(0,d.useCallback)(function(n){var e=(0,a.Z)({},q);delete e[n],"name"===n&&delete e.q,M(e),D((0,s.Z)((0,a.Z)({},e),{filterType:v.filterType}))},[q,D,v.filterType]),nm=(0,d.useCallback)(function(){return h().push("/dashboard/formBuilder/create")},[]),nf=(0,d.useCallback)(function(n){h().push("/dashboard/formBuilder/edit?id=".concat(n.id))},[]),np=(0,d.useCallback)(function(n){h().push("/dashboard/formBuilder/copy?id=".concat(n.id))},[]),nv=(0,d.useCallback)(function(n,e){W(e),z(!0)},[]),nh=(0,d.useCallback)((0,o.Z)(function(){var n;return(0,l.__generator)(this,function(e){switch(e.label){case 0:if(!O)return[3,10];if(!(n=!O.status))return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,G({variables:{id:O.id,status:n}})];case 2:return e.sent(),nl(),[3,4];case 3:return e.sent(),[3,4];case 4:return[3,9];case 5:if(n)return[3,9];e.label=6;case 6:return e.trys.push([6,8,,9]),[4,E({variables:{formId:O.id}})];case 7:return e.sent(),nl(),[3,9];case 8:return e.sent(),[3,9];case 9:z(!1),e.label=10;case 10:return[2]}})}),[nl,O,G]),ng=(0,d.useCallback)(function(){return z(!1)},[]),nx=(0,d.useCallback)(function(n){M(n)},[M]),nb=(0,d.useCallback)(function(n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{onClick:function(){return nf(n)},children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(y.Z,{onClick:function(){return np(n)},children:(0,r.jsx)(C.Z,{})})]})},[nf,np]),ny=(e=nv,t=nb,[{flex:1,field:"status",headerName:"",sortable:!1,minWidth:50,renderCell:function(n){var t=n.row;return(0,r.jsx)(K.Z,{checked:!0===t.status,onChange:function(n){return e(n,t)},color:"secondary"})}},{flex:1,field:"name",sortName:"name",headerName:"Form name",sortable:!0,minWidth:250},{flex:1,headerName:"Form description",field:"description",sortName:"description",minWidth:270,sortable:!0},{flex:1,field:"createdAt",sortName:"createdAt",headerName:"Date created",sortable:!0,minWidth:120,renderCell:function(n){var e;return e=n.row.createdAt,p()(e).format("DD/MM/YYYY")}},{flex:1,field:"userId",headerName:"Created by",sortName:"userId",sortable:!0,minWidth:130,renderCell:function(n){var e=n.row;return(0,r.jsx)(X.r,{noWrap:!e.createdBy,color:"secondary",href:"/dashboard/users/view?id=".concat(e.userId),children:e.createdBy})}},{flex:1,field:"published",headerName:"Published",sortable:!0,sortName:"status",minWidth:100},{flex:1,field:"actions",headerName:"Actions",sortable:!1,minWidth:60,renderCell:function(n){return t(n)}}]),nZ=(0,d.useMemo)(function(){return(na||[]).map(function(n){var e,t,r,i;return{userId:null===(e=n.FormUser)||void 0===e?void 0:e.id,createdBy:n.FormUser?"".concat((null===(t=n.FormUser)||void 0===t?void 0:t.nameFirst)||""," ").concat((null===(r=n.FormUser)||void 0===r?void 0:r.nameLast)||"").trim():"Unknown User",id:n.id,name:n.name,description:n.description||"No description",status:n.status,published:n.status?"Published":"Draft",createdAt:p()(n.createdAt).format("YYYY-MM-DD"),actions:""}})},[na]),nS=(0,d.useMemo)(function(){var n={};return 0===nZ.length&&((null==ne?void 0:ne.q)||(null==ne?void 0:ne.userId)||(null==ne?void 0:ne.createdAt)||(null==ne?void 0:ne.name)||(null==ne?void 0:ne.status))?{title:"No results",subtitleFirstLine:"The filters you have applied have returned no results",subtitleSecondLine:"Please amend and try again if necessary."}:{title:"No templates found",subtitleFirstLine:"It looks like you haven't created any form templates yet.",subtitleSecondLine:"Start by creating your first form to get things rolling!",buttonText:"Create new form",onAction:nm}},[nZ.length,null==ne?void 0:ne.q,null==ne?void 0:ne.userId,null==ne?void 0:ne.createdAt,null==ne?void 0:ne.name,null==ne?void 0:ne.status,nm]);return(0,r.jsxs)(r.Fragment,{children:[T&&(0,r.jsx)(B,{initialFilters:v,open:T,filters:q,setFilters:nx,onClose:function(){return H(!1)}}),(0,r.jsx)(Q,{open:U,onClose:ng,onConfirm:nh,status:null==O?void 0:O.status}),(0,r.jsxs)(Z.Z,{width:"100%",spacing:2,sx:{height:"100%"},children:[(0,r.jsxs)(Z.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,r.jsxs)(Z.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(S.Z,{variant:"contained",startIcon:(0,r.jsx)(Y,{}),onClick:function(){return H(!0)},children:"Filters"}),(0,r.jsx)(Z.Z,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:Object.keys(q).filter(function(n){return nn.includes(n)}).map(function(n){var e=nd(q,n);return e&&(0,r.jsx)(F.Z,{sx:{margin:"0px 0px 15px 0px",padding:"0.8vmin 0.5vmin"},label:e,onDelete:function(){return nc(n)}},n)})})]}),(0,r.jsx)(Z.Z,{direction:"row",spacing:2,children:(0,r.jsx)(S.Z,{variant:"contained",color:"secondary",onClick:nm,children:"Create new form"})})]}),(0,r.jsxs)(I.Z,{sx:{padding:"16px 0px",height:"calc(100% - 52px)",overflow:"hidden"},children:[(0,r.jsx)(j.Z,{ml:2,variant:"h5",sx:{fontWeight:600,marginBottom:"15px"},children:"Form Builder"}),(null==nZ?void 0:nZ.length)?(0,r.jsx)(w.i,{ref:nt,loading:nu,columns:ny,refetch:nl,rows:nZ,columnVisibilityModel:{},meta:ns,autoHeight:!1,containerHeight:"calc(100% - 52px)"}):!nu&&(0,r.jsx)(P.C,(0,a.Z)({imageSrc:"/static/icons/no_locations_found.svg"},nS))]})]})]})};ne.propTypes={initialFilters:c.object};var nt={userId:null,q:null,status:null,name:null,createdAt:null,filterType:"formbuilder_list"},nr=function(){return(0,r.jsx)(ne,{initialFilters:nt})};nr.getLayout=function(n){return(0,r.jsx)(i.Z,{children:n})};var ni=nr},83997:function(n,e,t){"use strict";t.d(e,{Z:function(){return i}});var r=t(71002);function i(n){var e=function(n,e){if("object"!=(0,r.Z)(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=(0,r.Z)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==(0,r.Z)(e)?e:e+""}},71002:function(n,e,t){"use strict";function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}t.d(e,{Z:function(){return r}})},82670:function(n,e,t){"use strict";function r(n,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}t.d(e,{Z:function(){return r}})}},function(n){n.O(0,[3662,2283,212,8890,2583,4135,8579,6043,4244,3911,3776,2329,778,1023,7454,1870,8062,3754,5497,8849,9774,2888,179],function(){return n(n.s=55221)}),_N_E=n.O()}]);