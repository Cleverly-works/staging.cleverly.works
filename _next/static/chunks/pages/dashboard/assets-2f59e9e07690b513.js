(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3383,4972],{75003:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M14 21c1.93 0 3.62-1.17 4-3l-1.75-.88C16 18.21 15.33 19 14 19H9.1c.83-1 1.5-2.34 1.5-4 0-.35-.03-.69-.08-1H14v-2H9.82C9 10.42 8 9.6 8 8c0-1.93 1.57-3.5 3.5-3.5 1.5 0 2.79.95 3.28 2.28L16.63 6c-.8-2.05-2.79-3.5-5.13-3.5C8.46 2.5 6 4.96 6 8c0 1.78.79 2.9 1.49 4H6v2h2.47c.08.31.13.64.13 1 0 2.7-2.6 4-2.6 4v2z"}),"CurrencyPound")},81261:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage")},23795:function(n,e,t){"use strict";t.d(e,{Z:function(){return C}});var i=t(63366),r=t(87462),o=t(67294),a=t(63961),s=t(58510),c=t(98216),l=t(90948),u=t(71657),d=t(79674),m=t(51705),f=t(15861),p=t(1977),h=t(8027);function v(n){return(0,h.ZP)("MuiLink",n)}let g=(0,p.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var y=t(54844),x=t(2101);let b={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Z=n=>b[n]||n,I=({theme:n,ownerState:e})=>{let t=Z(e.color),i=(0,y.DW)(n,`palette.${t}`,!1)||e.color,r=(0,y.DW)(n,`palette.${t}Channel`);return"vars"in n&&r?`rgba(${r} / 0.4)`:(0,x.Fq)(i,.4)};var $=t(85893);let _=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],q=n=>{let{classes:e,component:t,focusVisible:i,underline:r}=n,o={root:["root",`underline${(0,c.Z)(r)}`,"button"===t&&"button",i&&"focusVisible"]};return(0,s.Z)(o,v,e)},w=(0,l.ZP)(f.Z,{name:"MuiLink",slot:"Root",overridesResolver(n,e){let{ownerState:t}=n;return[e.root,e[`underline${(0,c.Z)(t.underline)}`],"button"===t.component&&e.button]}})(({theme:n,ownerState:e})=>(0,r.Z)({},"none"===e.underline&&{textDecoration:"none"},"hover"===e.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===e.underline&&(0,r.Z)({textDecoration:"underline"},"inherit"!==e.color&&{textDecorationColor:I({theme:n,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===e.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${g.focusVisible}`]:{outline:"auto"}})),j=o.forwardRef(function(n,e){let t=(0,u.Z)({props:n,name:"MuiLink"}),{className:s,color:c="primary",component:l="a",onBlur:f,onFocus:p,TypographyClasses:h,underline:v="always",variant:g="inherit",sx:y}=t,x=(0,i.Z)(t,_),{isFocusVisibleRef:Z,onBlur:I,onFocus:j,ref:C}=(0,d.Z)(),[S,P]=o.useState(!1),k=(0,m.Z)(e,C),M=n=>{I(n),!1===Z.current&&P(!1),f&&f(n)},A=n=>{j(n),!0===Z.current&&P(!0),p&&p(n)},T=(0,r.Z)({},t,{color:c,component:l,focusVisible:S,underline:v,variant:g}),F=q(T);return(0,$.jsx)(w,(0,r.Z)({color:c,className:(0,a.Z)(F.root,s),classes:h,component:l,onBlur:M,onFocus:A,ref:k,ownerState:T,variant:g,sx:[...Object.keys(b).includes(c)?[]:[{color:c}],...Array.isArray(y)?y:[y]]},x))});var C=j},30845:function(n,e){"use strict";var t=Number.isNaN||function(n){return"number"==typeof n&&n!=n};function i(n,e){return!!(n===e||t(n)&&t(e))}function r(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!i(n[t],e[t]))return!1;return!0}e.Z=function(n,e){void 0===e&&(e=r);var t,i,o=[],a=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return a&&t===this&&e(r,o)||(i=n.apply(this,r),a=!0,t=this,o=r),i}}},38910:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/assets",function(){return t(51212)}])},5336:function(n,e,t){"use strict";t.d(e,{C:function(){return P}});var i=t(85893),r=t(67294),o=t(45697),a=t.n(o),s=t(93946),c=t(25464),l=t(18972),u=t(57976),d=t(73890),m=t(69008),f=t(41687),p=t(60888),h=t(40535),v=t(63441),g=t(41733),y=t(77957),x=t(2548),b=t(24519),Z=t(2391),I=t(69308),$=t(79369),_=t(22961),q=t(28201),w=t(51233),j=t(15861),C={add:(0,i.jsx)(f.Z,{}),archive:(0,i.jsx)(d.Z,{}),avatar:(0,i.jsx)(q.Z,{}),check:(0,i.jsx)(p.Z,{}),delete:(0,i.jsx)(g.Z,{}),description:(0,i.jsx)(h.Z,{}),download:(0,i.jsx)(v.Z,{}),info:(0,i.jsx)(x.Z,{}),edit:(0,i.jsx)(y.Z,{}),location:(0,i.jsx)(I.Z,{}),unarchive:(0,i.jsx)(m.Z,{}),uploadFile:(0,i.jsx)(b.Z,{}),receipt:(0,i.jsx)(Z.Z,{}),visibility:(0,i.jsx)(_.Z,{})},S={default:(0,i.jsx)(u.Z,{}),defaultHoriz:(0,i.jsx)($.Z,{}),description:(0,i.jsx)(h.Z,{})},P=function(n){var e=n.actionsData,t=n.icon,o=n.row,a=n.disabled,u=(0,r.useState)(null),d=u[0],m=u[1],f=function(n){n.stopPropagation(),m(n.currentTarget)},p=function(){m(null)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:a,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:f,children:S[t]}),(0,i.jsx)(c.Z,{id:"simple-menu",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:p,PaperProps:{sx:{borderRadius:2}},children:e(o).map(function(n,e){return(0,i.jsx)(l.Z,{disabled:n.disabled,onClick:function(e){n.onClick(e),p()},sx:{pl:3,pr:4},children:(0,i.jsxs)(w.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==C?void 0:C[n.icon])||null,(0,i.jsx)(j.Z,{children:n.tooltip})]})},e)})})]})};P.propTypes={actionsData:a().func.isRequired,icon:a().oneOf(["default","description"]),row:a().any.isRequired,disabled:a().bool},P.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},17974:function(n,e,t){"use strict";t.d(e,{E:function(){return R}});var i=t(26042),r=t(85893),o=t(11163),a=t.n(o),s=t(45697),c=t.n(s),l=t(64872),u=t(15033),d=t(20705),m=t(68957),f=t(6388),p=t(30381),h=t.n(p),v=t(11057),g=t(90629),y=t(51233),x=t(15861),b=t(12547),Z=t(81261),I=t(35656),$=t(5336),_=t(69396),q=t(828),w=t(86886),j=t(11994),C=t(50135),S=t(61730),P=t(59938),k=t(42283),M=t(73359),A=t(67294),T=t(78232),F=t(4972),L=t(10166),G=function(n){var e,t=n.open,o=n.setOpen,a=n.initialFilters,s=n.filters,c=n.setFilters,l=(0,S.Z)("(max-width: 400px)")?4:0,u=(0,q.Z)((0,P.X)("form_data_".concat(a.filterType),a),2),d=u[0],m=u[1],f=(0,k.cI)({defaultValues:d}),p=f.control,h=f.handleSubmit,g=f.register,x=f.reset,b=(0,f.watch)(),Z=(0,q.Z)((0,M.t)(F.SW),2),I=Z[0],$=Z[1],j=$.loading,L=$.data,G=(void 0===L?{items:[]}:L).items,R=(0,q.Z)((0,M.t)(F._d,{variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:null===(e=b.customer)||void 0===e?void 0:e.value}}}}}),2),z=R[0],H=R[1],O=H.loading,U=H.data,E=(void 0===U?{items:[]}:U).items,W=(0,q.Z)((0,M.t)(F.UM),2),B=W[0],V=W[1],J=V.loading,Y=V.data,Q=(void 0===Y?{items:[]}:Y).items;(0,A.useEffect)(function(){t&&x(d)},[t]),(0,A.useEffect)(function(){m((0,_.Z)((0,i.Z)({},b),{filterType:a.filterType}))},[s]);var X=function(n){try{var e,t,r,a={customerId:null===(e=n.customer)||void 0===e?void 0:e.value,locationId:null===(t=n.location)||void 0===t?void 0:t.value,categoryId:null===(r=n.assetCategory)||void 0===r?void 0:r.value,q:n.search?"%".concat(n.search,"%"):null};c(function(n){return(0,i.Z)({},n,a)})}finally{o(!1)}},K=function(){c(a),x(a),o(!1)};return(0,r.jsx)(D,{keepMounted:!0,open:t,onClose:function(){return o(!1)},children:(0,r.jsx)("form",{onSubmit:h(X),children:(0,r.jsx)(N,{children:(0,r.jsxs)(w.ZP,{container:!0,rowGap:4,children:[(0,r.jsx)(w.ZP,{container:!0,children:(0,r.jsx)(w.ZP,{item:!0,xs:12,children:(0,r.jsx)(C.Z,{fullWidth:!0,variant:"standard",color:"secondary",label:"Search...",name:"search",inputRef:g})})}),(0,r.jsxs)(w.ZP,{container:!0,columnSpacing:4,rowGap:l,children:[(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(k.Qr,{name:"customer",control:p,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(T.F,{value:e,onChange:function(n,e){return t(e)},label:"Select customer",loading:j,onOpen:function(){return I()},options:G})}})}),(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(k.Qr,{name:"location",control:p,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(T.F,{value:e,onChange:function(n,e){return t(e)},label:"Select location",loading:O,onOpen:function(){return z()},options:E})}})})]}),(0,r.jsx)(w.ZP,{container:!0,columnSpacing:4,rowGap:l,children:(0,r.jsx)(w.ZP,{item:!0,xs:12,xs2:6,children:(0,r.jsx)(k.Qr,{name:"assetCategory",control:p,render:function(n){var e=n.value,t=n.onChange;return(0,r.jsx)(T.F,{value:e,onChange:function(n,e){return t(e)},label:"Select asset category",loading:J,onOpen:function(){return B()},options:Q})}})})}),(0,r.jsx)(w.ZP,{container:!0,item:!0,xs:12,children:(0,r.jsxs)(y.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,r.jsx)(v.Z,{variant:"contained",color:"danger",onClick:function(){return K()},children:"Cancel"}),(0,r.jsx)(v.Z,{variant:"contained",color:"secondary",type:"submit",children:"Search"})]})})]})})})})};G.defaultProps={open:!1,setOpen:function(){},initialFilters:{},filters:{},setFilters:function(){}},G.propTypes={open:c().bool,setOpen:c().func,initialFilters:c().object,filters:c().object,setFilters:c().func};var D=(0,L.Z)(j.Z)(function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}),N=(0,L.Z)(g.Z)(function(){return{padding:"24px",maxWidth:"700px",maxHeight:"100vh",overflowY:"scroll"}}),R=function(n){var e=n.hideLink,t=n.hideCustomerInfo,o=n.hideLocationInfo,s=n.showHeader,c=n.initialFilters,p=n.editable,_=n.createFormDefaultValues,q=(0,l.a)(),w=(0,A.useState)(!1),j=w[0],C=w[1],S=(0,A.useState)((0,i.Z)({},c)),P=S[0],k=S[1],M=(0,d.x)({filters:P}),T=M.initialData,F=M.ref,L=(0,f.aM)(m.tG,{variables:(0,i.Z)({},T)}),D=L.data,N=void 0===D?{assets:[],meta:{aggregate:{totalCount:0}}}:D,R=N.assets,z=N.meta,H=L.loading,O=L.refetch,U=function(){q.show({content:(0,r.jsx)(I.R,{offCanvas:q,defaultValues:_}),title:"Add Asset",submit:!0})},E=function(n){q.show({content:(0,r.jsx)(I.R,{assetId:n.id,offCanvas:q,defaultValues:_}),title:"Edit Asset",submit:!0})},W=function(n){var e=[];return p&&e.push({icon:"edit",onClick:function(e){e.stopPropagation(),E(n)},tooltip:"Edit"}),e.push({icon:"info",onClick:function(e){e.stopPropagation(),a().push("/dashboard/assets/view?id=".concat(n.id))},tooltip:"Info"}),e},B=function(n){var e=n.row;a().push("/dashboard/assets/view?id=".concat(e.id))};return(0,r.jsxs)(y.Z,{width:"100%",spacing:2,sx:{height:"calc(100% - 58px)"},children:[s&&(0,r.jsxs)(y.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,r.jsx)(v.Z,{variant:"contained",startIcon:(0,r.jsx)(Z.Z,{}),onClick:function(){return C(!0)},children:"Filters"}),p&&(0,r.jsx)(y.Z,{direction:"row",spacing:2,children:(0,r.jsx)(v.Z,{variant:"contained",color:"secondary",onClick:U,children:"Create Asset"})})]}),(0,r.jsxs)(g.Z,{sx:{paddingTop:"16px",paddingBottom:"16px",height:"100%"},children:[(0,r.jsxs)(y.Z,{direction:"row",justifyContent:"space-between",children:[(0,r.jsx)(x.Z,{ml:2,variant:"h5",sx:{fontWeight:600},children:"Assets"}),p&&!s&&(0,r.jsx)(v.Z,{sx:{mr:2},variant:"contained",color:"secondary",onClick:U,children:"Create Asset"})]}),s&&(0,r.jsx)(G,{initialFilters:c,filters:P,setFilters:k,open:j,setOpen:C}),(0,r.jsx)(u.i,{autoHeight:!1,loading:H,ref:F,columns:[{minWidth:80,flex:1,field:"name",headerName:"Name",sortable:!1},{minWidth:100,flex:1,field:"description",headerName:"Description",sortable:!1},{minWidth:80,flex:1,field:"categoryName",headerName:"Category",sortable:!1},{minWidth:120,flex:1,field:"locationName",headerName:"Location",sortable:!1,renderCell:function(n){var e=n.row;return(0,r.jsx)(b.r,{color:"secondary",href:"/dashboard/properties/view?id=".concat(e.locationId),children:e.locationName})}},{minWidth:80,flex:1,field:"sublocationName",headerName:"Sublocation",sortable:!1,renderCell:function(n){var t=n.row;return(0,r.jsx)(b.r,{noWrap:e,color:"secondary",href:"/dashboard/properties/view?id=".concat(t.locationId,"&tab=sublocations"),children:t.sublocationName})}},{minWidth:120,flex:1,field:"customerName",headerName:"Customer",sortable:!1,renderCell:function(n){var e=n.row;return(0,r.jsx)(b.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(e.customerId),children:e.customerName})}},{minWidth:60,flex:1,field:"type",headerName:"Type",sortable:!1},{minWidth:60,flex:1,field:"status",headerName:"Status",sortable:!1},{minWidth:100,flex:1,field:"createdAt",headerName:"Created",sortable:!0,sortName:"createdAt"},{width:50,field:"actions",headerName:"Actions",sortable:!1,renderCell:function(n){var e=n.row;return(0,r.jsx)($.C,{row:e,actionsData:W})}}],rows:R.map(function(n){var e,t,i,r,o,a,s,c,l,u,d,m,f,p,v,g,y;return{id:n.id,customer:{label:null===(e=n.customer)||void 0===e?void 0:e.name,value:null===(t=n.customer)||void 0===t?void 0:t.id},assetCategory:{label:null===(i=n.category)||void 0===i?void 0:i.name,value:null===(r=n.category)||void 0===r?void 0:r.id},description:n.description,name:n.name,location:{label:null===(o=n.location)||void 0===o?void 0:o.name,value:null===(a=n.location)||void 0===a?void 0:a.id},sublocation:{label:null===(s=n.sublocation)||void 0===s?void 0:s.name,value:null===(c=n.sublocation)||void 0===c?void 0:c.id},parent:{label:null===(l=n.parentId)||void 0===l?void 0:l.label,value:null===(u=n.parentId)||void 0===u?void 0:u.value},status:n.status,locationId:null===(d=n.location)||void 0===d?void 0:d.id,customerId:null===(m=n.customer)||void 0===m?void 0:m.id,categoryName:null===(f=n.category)||void 0===f?void 0:f.name,locationName:null===(p=n.location)||void 0===p?void 0:p.name,sublocationName:null===(v=n.sublocation)||void 0===v?void 0:v.name,type:(null===(g=n.parentId)||void 0===g?void 0:g.value)?"Child":"Parent",customerName:null===(y=n.customer)||void 0===y?void 0:y.name,createdAt:h()(n.createdAt).format("YYYY-MM-DD")}}),meta:z,refetch:O,onRowClick:B,containerHeight:"calc(100% - 32px)",columnVisibilityModel:{locationName:!o,customerName:!t}})]})]})};R.defaultProps={initialFilters:{},hideLink:!1,hideCustomerInfo:!1,hideLocationInfo:!1,showHeader:!0,editable:!0},R.propTypes={initialFilters:c().shape({filterType:c().string.isRequired}),hideLink:c().bool,hideCustomerInfo:c().bool,hideLocationInfo:c().bool,showHeader:c().bool,editable:c().bool,createFormDefaultValues:c().object}},78232:function(n,e,t){"use strict";t.d(e,{F:function(){return j}});var i=t(14924),r=t(26042),o=t(69396),a=t(85893),s=t(45697),c=t.n(s),l=t(10166),u=t(80482),d=t(23776),m=t(98456),f=t(16143),p=t(50135),h=t(99534),v=t(29815),g=t(74061),y=t(6498),x=t(75438),b=t(15861),Z=t(61730),I=t(67294),$=(0,I.createContext)({}),_=(0,I.forwardRef)(function(n,e){var t=(0,I.useContext)($);return(0,a.jsx)("div",(0,r.Z)({ref:e},n,t))}),q=(0,I.forwardRef)(function(n,e){var t=n.children,i=(0,h.Z)(n,["children"]),r=[];t.forEach(function(n){r.push(n),r.push.apply(r,(0,v.Z)(n.children||[]))});var o,s,c=(0,y.u)(),l=(0,Z.Z)(c.breakpoints.up("sm"),{noSsr:!0}),u=r.length,d=l?36:48,m=function(n){return n.hasOwnProperty("group")?48:d},f=(s=(0,I.useRef)(null),(0,I.useEffect)(function(){null!=s.current&&s.current.resetAfterIndex(0,!0)},[u]),s);return(0,a.jsx)("div",{ref:e,children:(0,a.jsx)($.Provider,{value:i,children:(0,a.jsx)(g.S_,{itemData:r,height:(u>8?8*d:r.map(m).reduce(function(n,e){return n+e},0))+16,width:"100%",ref:f,outerElementType:_,innerElementType:"ul",itemSize:function(n){return m(r[n])},overscanCount:5,itemCount:u,children:w})})})});function w(n){var e=n.data,t=n.index,i=n.style,s=e[t],c=(0,o.Z)((0,r.Z)({},i),{top:i.top+8});return s.hasOwnProperty("group")?(0,a.jsx)(x.Z,{component:"div",style:c,children:s.group},s.key):(0,a.jsx)(b.Z,(0,o.Z)((0,r.Z)({component:"li"},s[0]),{noWrap:!0,style:c,children:s[1].label}))}var j=function(n){var e=n.label,t=n.loading,i=n.placeholder,s=n.error,c=n.helperText,l=n.inputProps;return(0,a.jsx)(S,(0,o.Z)((0,r.Z)({},n),{disableListWrap:!0,PopperComponent:C,ListboxComponent:q,renderInput:function(n){return(0,a.jsx)(p.Z,(0,o.Z)((0,r.Z)({},n,l),{error:s,helperText:c,label:e,placeholder:i,color:"secondary",variant:"standard",InputProps:(0,o.Z)((0,r.Z)({},n.InputProps,(null==l?void 0:l.InputProps)||{}),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(m.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))},renderOption:function(n,e,t){return[n,e,t.index]},renderGroup:function(n){return n}}))};j.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1},j.propTypes={value:c().shape({value:c().any,label:c().string}),onChange:c().func,label:c().string,loading:c().bool,onOpen:c().func,options:c().arrayOf(c().shape({value:c().any,label:c().string})),inputProps:c().object,withoutSelectIcon:c().bool,inputValue:c().string,onInputChange:c().func};var C=(0,l.Z)(f.Z)((0,i.Z)({zIndex:"12000 !important"},"& .".concat(u.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),S=(0,l.Z)(d.Z)(function(n){var e=n.withoutSelectIcon;return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":(0,r.Z)({},e&&{display:"none"})}}}})},12547:function(n,e,t){"use strict";t.d(e,{r:function(){return d}});var i=t(26042),r=t(69396),o=t(85893),a=t(45697),s=t.n(a),c=t(41664),l=t.n(c),u=t(23795),d=function(n){var e=n.children,t=n.href,a=n.noWrap,s=n.target,c=n.sx,d=void 0===c?{}:c;return a?(0,o.jsx)(o.Fragment,{children:e}):t?(0,o.jsx)(l(),{href:t,target:s,passHref:!0,children:(0,o.jsx)(u.Z,(0,r.Z)((0,i.Z)({sx:d},n),{children:e}))}):(0,o.jsx)(u.Z,(0,r.Z)((0,i.Z)({sx:d},n),{children:e}))};d.defaultProps={onClick:function(n){n.stopPropagation()}},d.propTypes={onClick:s().func,href:s().string,noWrap:s().bool,color:s().string}},35418:function(n,e,t){"use strict";t.d(e,{G:function(){return A}});var i=t(26042),r=t(69396),o=t(7297),a=t(85893),s=t(67294),c=t(45697),l=t(6388),u=t(52824),d=t(10367),m=t(78289),f=t(41564),p=t(34953),h=t(62466),v=t(68956),g=t(73373),y=t(11585),x=t(28733),b=t(55377),Z=t(16551),I=t(77439),$=t(74297),_=t(23892),q=t(39087),w=t(76256),j=t(75795),C=t(91272),S=t(20705),P=t(2845);function k(){var n=(0,o.Z)(["\n  width: 24px;\n"]);return k=function(){return n},n}function M(){var n=(0,o.Z)(["\n  border: 1px solid #eee;\n"]);return M=function(){return n},n}var A=function(n){var e=n.carousel,t=n.category,o=n.children,c=n.data,d=(n.details,n.entity),k=n.entityId,M=n.filters,A=(n.limit,n.listView),L=n.mediaMeta,G=n.onMediaAdd,D=n.onMediaRemove,N=(n.pagination,n.showActionButtons),R=n.showEntityColumn,z=n.showItemActions,H=n.summary,O=n.type,U=(0,S.x)({filters:M}),E=U.initialData,W=U.ref,B=(0,P.x)(),V=B.hasRole,J=B.user,Y=(0,s.useContext)(m.Z),Q=(0,l.aM)(u.t,{variables:(0,r.Z)((0,i.Z)({},E),{entity:d,entityId:k,category:t,adminId:J.adminId,meta:L})}),X=Q.data,K=void 0===X?{items:[],meta:{aggregate:{totalCount:0}}}:X,nn=K.items,ne=K.meta,nt=Q.loading,ni=Q.refetch,nr=function(n){Y.close(),c.length||ni(),G&&G(n)},no=function(n){Y.close(),c.length||ni(),D&&D(n)},na=function(n){n.stopPropagation(),Y.show({content:(0,a.jsx)(w.z,{accept:"image/*",adminId:J.adminId,category:t,entity:d,entityId:k,expiryShow:!1,mediaMeta:L,multiple:!0,onSuccess:nr,type:"image"}),title:"Upload Photos"})},ns=function(n){n.stopPropagation(),Y.show({content:(0,a.jsx)(w.z,{accept:".pdf, .doc, .docx, .xlsx",adminId:J.adminId,category:t,entity:d,entityId:k,expiryShow:!1,mediaMeta:L,onSuccess:nr,type:"document"}),title:"Upload Documents"})},nc=function(n){Y.show({content:(0,a.jsx)(_.d,{mediaId:n.data.id,onSuccess:no}),submit:!1,title:"Delete Media"})},nl=function(n){Y.show({content:(0,a.jsx)(q.z,{media:n.data,toggleShow:Y.close}),submit:!1,title:"Media Details",width:"50%"})},nu=[{context:"primary",icon:["fas","info-circle"],onClick:function(n,e){return nl(e)},tooltip:"Details"}];V("admin")&&nu.push({context:"danger",icon:["fas","trash"],onClick:function(n,e){return nc(e)},tooltip:"Delete"});var nd=[{hidden:!0},{hidden:!0},{hidden:!0,text:"Caption"},{hidden:!1,text:"File"},{hidden:!R,text:"Entity"},{formatter:function(n){var e,t=n.row;return(0,a.jsx)(T,{children:(null==t?void 0:null===(e=t.authority)||void 0===e?void 0:e.adminOnly)&&(0,a.jsx)(f.Z,{content:"Admin user only",children:(0,a.jsx)(p.Z,{alt:"Admin Only",src:"/messaging/admin-only.svg"})})})},text:"",tooltip:"Only Admin can see"},{formatter:(0,h.Z)("/dashboard/users/view","userId","uploaded"),text:"Uploaded by"},{hidden:!A,text:"Thumbnails"},{hidden:!z,formatter:v.Z,formatterData:nu,text:"Actions"}],nm=function(n,e){n.preventDefault(),window.open("".concat("https://cleverly-staging-media.s3.eu-west-2.amazonaws.com","/").concat(e))},nf=[],np=nn.map(function(n){var e=n.entity,t=n.entityId,i=n.id,r=n.item,o=r.caption,s=r.filename,c=r.meta,l=r.name,u=r.type,d=r.user;return{data:r,id:i,userId:null==d?void 0:d.id,file:function(){return(0,a.jsx)(g.Z,{onClick:function(n){return nm(n,s)},children:o||l||s})},entity:e&&"".concat(e,"#").concat(t),authority:c,uploaded:"".concat(null==d?void 0:d.nameFirst," ").concat(null==d?void 0:d.nameLast),thumbnails:(0,j.S)(u,c),actions:""}}),nh=(nn.forEach(function(n){var e=n.item,t=e.caption,i=e.filename;"image"===e.type&&nf.push({caption:t,filename:i})}),nf),nv=nh.length;return(0,a.jsxs)(y.Z,{fitParentHeight:!0,open:!0,title:H,children:[o,e&&nv>0&&(0,a.jsx)(F,{children:(0,a.jsx)(x.Z,{fullWidth:!0,height:"200px",numberOfItems:1,showNavs:!1,showPagination:!0,slides:nh.map(function(n){var e=n.caption,t=n.filename;return{node:(0,a.jsx)(p.Z,{alt:e,src:"".concat("https://cleverly-staging-media.s3.eu-west-2.amazonaws.com","/").concat(t)}),text:" "}})})}),(0,a.jsx)(C.t,{columns:nd,loading:nt,fullHeight:!0,paginationSize:!1,meta:ne,ref:W,refetch:ni,rows:np}),N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{size:"sm"}),(0,a.jsxs)(Z.Z,{align:"flex-end",children:[(!O||"document"===O)&&!V("supplier")&&(0,a.jsx)(I.Z,{content:"Add Document",context:"secondary",onClick:ns,size:"sm"}),(!O||"image"===O||"avatar"===O)&&!V("supplier")&&(0,a.jsx)(I.Z,{content:"Add ".concat((0,$.Z)(O||"Image")),context:"secondary",onClick:na,size:"sm"})]})]})]})},T=d.ZP.div.withConfig({displayName:"table__StyledIcon",componentId:"sc-9d92024f-0"})(k()),F=d.ZP.div.withConfig({displayName:"table__StyledCarousel",componentId:"sc-9d92024f-1"})(M());A.propTypes={carousel:c.bool,category:c.string,children:c.node,data:c.array,details:c.bool,entity:c.string,entityId:c.number,filters:c.object,limit:c.number,listView:c.bool,mediaMeta:c.object,onMediaAdd:c.func,onMediaRemove:c.func,pagination:c.object,showActionButtons:c.bool,showEntityColumn:c.bool,showItemActions:c.bool,summary:c.string,type:c.string},A.defaultProps={carousel:!0,category:null,data:[],details:!1,filters:{},limit:20,listView:!1,mediaMeta:null,showActionButtons:!0,showEntityColumn:!1,showItemActions:!0,summary:"Media",type:null}},66321:function(n,e,t){"use strict";t.d(e,{E:function(){return v}});var i=t(26042),r=t(69396),o=t(85893),a=t(45697),s=t.n(a),c=t(94054),l=t(50480),u=t(56815),d=t(40476),m=t(79717),f=t(36872),p=t(51233),h=t(15861),v=function(n){var e=n.label,t=n.options,a=n.error,s=n.helperText,v=n.stackProps,y=n.formControlProps,x=n.labelLeft,b=function(n){var e=n.children;return(0,o.jsx)(o.Fragment,{children:e})};return(0,o.jsxs)(c.Z,(0,r.Z)((0,i.Z)({sx:{m:3},error:a,variant:"standard"},void 0===y?{}:y),{children:[(0,o.jsxs)(p.Z,(0,r.Z)((0,i.Z)({},x&&g),{children:[e&&(0,o.jsx)(d.Z,{id:"radio-group",color:"secondary",children:e}),(0,o.jsx)(m.Z,(0,r.Z)((0,i.Z)({},n),{"aria-labelledby":"radio-group",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},void 0===v?{}:v),{children:t.map(function(n){var e=n.value,t=n.label,i=n.icon,r=n.ParentComponent;return(0,o.jsx)(void 0===r?b:r,{children:(0,o.jsx)(l.Z,{value:e,control:(0,o.jsx)(f.Z,{color:"secondary"}),label:(0,o.jsxs)(p.Z,{direction:"row",alignItems:"center",spacing:1,children:[i,(0,o.jsx)(h.Z,{children:t})]})})})})}))}))]})),(0,o.jsx)(u.Z,{children:s})]}))};v.defaultProps={options:[],error:!1,helperText:"",stackProps:{},formControlProps:{},labelLeft:!1},v.propTypes={label:s().string,options:s().arrayOf(s().shape({label:s().string.isRequired,value:s().any.isRequired,ParentComponent:s().elementType})).isRequired,error:s().bool,helperText:s().string,stackProps:s().object,formControlProps:s().object,labelLeft:s().bool};var g={direction:"row",alignItems:"center",flexWrap:"wrap",spacing:1}},4972:function(n,e,t){"use strict";t.d(e,{A5:function(){return nl},Ak:function(){return O},Cj:function(){return X},K4:function(){return no},Oq:function(){return nc},Qn:function(){return z},RJ:function(){return Q},SW:function(){return R},T_:function(){return V},UH:function(){return N},UM:function(){return ni},Ve:function(){return K},_d:function(){return E},_f:function(){return nr},by:function(){return J},cz:function(){return L},he:function(){return H},j$:function(){return U},kB:function(){return ne},kU:function(){return nn},kx:function(){return W},nD:function(){return D},nP:function(){return ns},pY:function(){return na},qd:function(){return G},t1:function(){return B},yR:function(){return Y},zR:function(){return nt}});var i=t(7297),r=t(75063);function o(){var n=(0,i.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]);return o=function(){return n},n}function a(){var n=(0,i.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,i.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return s=function(){return n},n}function c(){var n=(0,i.Z)(["\n  query GetAssetsForSelect(\n    $locationId: Int\n    $q: String\n    $categoryId: Int\n    $bookable: String\n    $limit: Int\n    $offset: Int\n  ) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,i.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']);return l=function(){return n},n}function u(){var n=(0,i.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]);return u=function(){return n},n}function d(){var n=(0,i.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return d=function(){return n},n}function m(){var n=(0,i.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return m=function(){return n},n}function f(){var n=(0,i.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]);return f=function(){return n},n}function p(){var n=(0,i.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return p=function(){return n},n}function h(){var n=(0,i.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return h=function(){return n},n}function v(){var n=(0,i.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return v=function(){return n},n}function g(){var n=(0,i.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]);return g=function(){return n},n}function y(){var n=(0,i.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]);return y=function(){return n},n}function x(){var n=(0,i.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return x=function(){return n},n}function b(){var n=(0,i.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return b=function(){return n},n}function Z(){var n=(0,i.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return Z=function(){return n},n}function I(){var n=(0,i.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return I=function(){return n},n}function $(){var n=(0,i.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "complianceCategory" } }\n      order_by: { name: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return $=function(){return n},n}function _(){var n=(0,i.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]);return _=function(){return n},n}function q(){var n=(0,i.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]);return q=function(){return n},n}function w(){var n=(0,i.Z)(['\n  query GetTaxonomy($q: String, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return w=function(){return n},n}function j(){var n=(0,i.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n    $includeMeta: Boolean! = false\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n      meta @include(if: $includeMeta)\n    }\n  }\n"]);return j=function(){return n},n}function C(){var n=(0,i.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']);return C=function(){return n},n}function S(){var n=(0,i.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']);return S=function(){return n},n}function P(){var n=(0,i.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n']);return P=function(){return n},n}function k(){var n=(0,i.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]);return k=function(){return n},n}function M(){var n=(0,i.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return M=function(){return n},n}function A(){var n=(0,i.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n            code\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return A=function(){return n},n}function T(){var n=(0,i.Z)(['\n  query GetCompliancesForSelectNew($q: String, $locationId: Int, $limit: Int, $offset: Int) {\n    items: Compliance(\n      where: {\n        name: { _ilike: $q }\n        Category: { type: { _eq: "complianceCategory" } }\n        Compliance_Entities: { entity: { _eq: "Location" }, Location: { id: { _eq: $locationId } } }\n      }\n      order_by: { name: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      value: id\n      label: name\n      category: Category {\n        label: name\n      }\n    }\n  }\n']);return T=function(){return n},n}function F(){var n=(0,i.Z)(['\n  query GetTaskAssignedToForSelect(\n    $accountId: Int\n    $q: String\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return F=function(){return n},n}var L=(0,r.Ps)(o()),G=(0,r.Ps)(a()),D=(0,r.Ps)(s()),N=(0,r.Ps)(c()),R=(0,r.Ps)(l()),z=(0,r.Ps)(u()),H=(0,r.Ps)(d()),O=(0,r.Ps)(m()),U=(0,r.Ps)(f()),E=(0,r.Ps)(p()),W=(0,r.Ps)(h()),B=(0,r.Ps)(v()),V=(0,r.Ps)(g()),J=(0,r.Ps)(y()),Y=(0,r.Ps)(x()),Q=(0,r.Ps)(b()),X=(0,r.Ps)(Z()),K=(0,r.Ps)(I()),nn=(0,r.Ps)($()),ne=(0,r.Ps)(_()),nt=(0,r.Ps)(q()),ni=(0,r.Ps)(w()),nr=(0,r.Ps)(j());(0,r.Ps)(C()),(0,r.Ps)(S()),(0,r.Ps)(P());var no=(0,r.Ps)(k()),na=(0,r.Ps)(M()),ns=(0,r.Ps)(A()),nc=(0,r.Ps)(T()),nl=(0,r.Ps)(F())},92321:function(n,e,t){"use strict";t.d(e,{P:function(){return I}});var i=t(26042),r=t(69396),o=t(85893),a=t(67294),s=t(10166),c=t(45697),l=t.n(c),u=t(94054),d=t(47312),m=t(18972),f=t(18360),p=t(56815),h=t(51233),v=t(15861),g=t(5616),y=t(87918),x=t(69368),b={text:function(n){var e=n.option,t=n.multiple,i=n.index;return t&&i>0?", ".concat(e.label):e.label},textWithIcon:function(n){var e=n.option;return(0,o.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[e.icon,(0,o.jsxs)(v.Z,{children:[" ",e.label]})]})},chip:function(n){var e=n.chipProps,t=n.option;return(0,a.createElement)(y.Z,(0,r.Z)((0,i.Z)({},e),{key:t.value,label:t.label,icon:t.icon,sx:{color:t.color,bgcolor:t.bgcolor}}))}},Z={text:function(n){return n.option.label},textWithIcon:function(n){var e=n.option;return(0,o.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[e.icon,(0,o.jsxs)(v.Z,{children:[" ",e.label]})]})},chip:function(n){var e=n.chipProps,t=n.option;return(0,a.createElement)(y.Z,(0,r.Z)((0,i.Z)({},e),{key:t.value,label:t.label,icon:t.icon,sx:{color:t.color,bgcolor:t.bgcolor}}))},checkbox:function(n){var e=n.option,t=n.value;return(0,o.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,o.jsx)(x.Z,{color:"secondary",sx:{height:"10px"},checked:t.indexOf(e.value)>-1}),(0,o.jsxs)(v.Z,{children:[" ",e.label]})]})}},I=function(n){var e=n.label,t=n.value,a=n.onChange,s=n.leftSideLabel,c=n.options,l=n.inputComponent,u=n.selectComponent,d=n.withoutSelectIcon,h=n.formControl,y=n.chipProps,x=n.selectProps,I=function(n){return c.find(function(e){return e.value===n})};return(0,o.jsxs)($,(0,r.Z)((0,i.Z)({},h),{leftSideLabel:s,withoutSelectIcon:d,children:[e&&s&&(0,o.jsx)(v.Z,{children:e}),e&&!s&&(0,o.jsx)(_,{shrink:""!==t&&void 0!==t,children:e}),(0,o.jsx)(f.Z,(0,r.Z)((0,i.Z)({displayEmpty:!0},x),{value:t,onChange:a,inputProps:{shrink:!0},renderValue:function(){if(Array.isArray(t))return(0,o.jsx)(g.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.map(function(n,e){var t=I(n);return t?b[l]({chipProps:y,option:t,multiple:!0,index:e}):""})});var n=I(t);return n?(0,o.jsx)(g.Z,{children:b[l]({chipProps:y,option:n})}):""},children:c.map(function(n){return(0,o.jsx)(m.Z,{value:n.value,children:Z[u]({chipProps:y,option:n,value:t})},n.value)})})),(null==h?void 0:h.helperText)&&(0,o.jsx)(p.Z,{children:h.helperText})]}))};I.defaultProps={label:"",onChange:function(){},leftSideLabel:!1,options:[],inputComponent:"text",selectComponent:"text",withoutSelectIcon:!1,formControl:{error:!1,helperText:""},chipProps:{size:"small"},selectProps:{}},I.propTypes={label:l().string,value:l().oneOfType([l().string,l().array]),onChange:l().func,leftSideLabel:l().bool,options:l().arrayOf(l().shape({label:l().string.isRequired,value:l().string.isRequired,color:l().string,bgcolor:l().string,icon:l().node}).isRequired),inputComponent:l().oneOf(["text","textWithIcon","chip"]),selectComponent:l().oneOf(["text","textWithIcon","chip","checkbox"]),withoutSelectIcon:l().bool,formControl:l().object,chipProps:l().object,selectProps:l().object};var $=(0,s.Z)(u.Z)(function(n){n.theme;var e=n.leftSideLabel,t=n.withoutSelectIcon;return{"&.MuiFormControl-root":(0,i.Z)({display:"flex",flexDirection:"column",alignItems:"flex-start"},e&&{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"}),"& .MuiSelect-icon":(0,i.Z)({},t&&{display:"none"})}}),_=(0,s.Z)(d.Z)(function(n){return{"&.MuiFormLabel-root.MuiInputLabel-root.Mui-focused":{color:n.theme.palette.secondary.main}}})},15033:function(n,e,t){"use strict";t.d(e,{i:function(){return q}});var i=t(14924),r=t(26042),o=t(69396),a=t(85893),s=t(67294),c=t(11163),l=t(45697),u=t.n(l),d=t(61870),m=t(5616),f=t(51233),p=t(15861),h=t(90948),v=t(41796),g=t(29217),y=t(45111),x=t(46003),b=t(70872),Z=t(58886),I=t(61730),$=function(n){var e=n.currentPage,t=n.totalCount,i=n.pageSize,o=n.onPageChange,s=(0,I.Z)("(max-width:400px)"),c=(0,I.Z)("(max-width:500px)");return(0,a.jsx)(_,{mb:2,page:e,count:Math.ceil(t/i),onChange:function(n,e){return o(e)},variant:"outlined",shape:"rounded",size:s?"small":"medium",hidePrevButton:1===e,hideNextButton:e===Math.ceil(t/i),siblingCount:c?0:1,renderItem:function(n){return(0,a.jsx)(Z.Z,(0,r.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},n))}})};$.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}},$.propTypes={currentPage:u().number,totalCount:u().number,pageSize:u().number,onPageChange:u().func};var _=(0,h.ZP)(b.Z)(function(n){var e,t=n.hidePrevButton,o=n.hideNextButton,a=n.theme;return e={},(0,i.Z)(e,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,i.Z)(e,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,i.Z)(e,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,i.Z)(e,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,i.Z)(e,"& button.Mui-selected",(0,r.Z)({color:a.palette.white.main,backgroundColor:a.palette.secondary.main},o?{borderRadius:"0 5px 5px 0"}:{},t?{borderRadius:"5px 0 0 5px"}:{})),e}),q=(0,s.forwardRef)(function(n,e){var t=n.columns,i=n.history,o=n.initialSort,l=n.meta,u=n.refetch,d=n.paginationSize,m=n.containerHeight,h=n.noResultsMessage,v=n.autoHeight,b=(0,c.useRouter)(),Z=b.query,I=void 0===Z?{}:Z,_=(0,s.useState)(parseInt(null==I?void 0:I.page,10)||1),q=_[0],C=_[1],S=(0,s.useState)(d||x.C1.paginationSize),P=S[0],k=S[1];o||(o={item:"createdAt",order:"desc"});var M=(0,s.useState)({item:o.item,order:o.order}),A=M[0],T=M[1],F=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=b.query,t=void 0===e?{}:e;if(n>1?t.page=n:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(e){return"page"===e?"".concat(e,"=").concat(n):"".concat(e,"=").concat(t[e])}).join("&");return"?".concat(i)},L=function(){T({item:o.item,order:o.order}),C(1);var n=F();b.push(n),k(d||x.C1.paginationSize)};(0,s.useImperativeHandle)(e,function(){return{currentPage:q,pageSize:P,sort:A,resetPagination:function(){L()}}});var G=function(n){var e=F(n);i&&b.push(e),C(n),!i&&u&&u()},D=function(n){n&&n.field&&n.sort?(T({item:t.find(function(e){return e.field===n.field}).sortName||n.field||n.item||o.item,order:n.sort||n.order||o.order}),u&&u()):(T({item:o.item,order:o.order}),u&&u())};return(0,a.jsxs)(w,{containerHeight:m,children:[(0,a.jsx)(j,(0,r.Z)({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:v,sortingMode:"server",onSortModelChange:function(n){return D(n[0])},columns:t,pageSize:P,slots:{columnSortedAscendingIcon:function(){return(0,a.jsx)(g.Z,{})},columnSortedDescendingIcon:function(){return(0,a.jsx)(y.Z,{})},columnUnsortedIcon:function(){return(0,a.jsxs)(f.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,a.jsx)(g.Z,{sx:{marginBottom:"-15px"}}),(0,a.jsx)(y.Z,{})]})},noResultsOverlay:function(){return(0,a.jsx)(f.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(p.Z,{children:h})})},noRowsOverlay:function(){return(0,a.jsx)(f.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(p.Z,{children:h})})}}},n)),l&&Math.ceil(l.aggregate.totalCount/P)>1&&(0,a.jsx)($,{currentPage:q,totalCount:l.aggregate.totalCount,pageSize:P,onPageChange:G})]})});q.propTypes={history:u().bool,initialSort:u().object,loading:u().bool,meta:u().object,refetch:u().func,paginationSize:u().number,noResultsMessage:u().string,columns:u().array.isRequired,rows:u().array.isRequired,autoHeight:u().bool},q.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var w=(0,h.ZP)(m.Z)(function(n){return{height:n.containerHeight,display:"flex",flexDirection:"column"}}),j=(0,h.ZP)(d.s)(function(n){var e,t=n.theme,a=n.hideHeader,s=(n.rows,n.loading,n.rowHeight),c=n.isPdf;return e={"--DataGrid-overlayHeight":"40px"},(0,i.Z)(e,"&.MuiDataGrid-root",(0,r.Z)({color:t.palette.black.main,border:"none"},c&&{"@media print":{display:"block"}})),(0,i.Z)(e,"& .MuiDataGrid-main",(0,r.Z)({},c&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(e,"& .MuiDataGrid-columnHeaders",(0,o.Z)((0,r.Z)({},a&&{display:"none"}),{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:t.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,i.Z)(e,"& .MuiDataGrid-virtualScroller",(0,r.Z)({},a&&{marginTop:"0 !important"},c&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(e,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,i.Z)(e,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(e,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(e,"& .MuiDataGrid-virtualScrollerContent",(0,r.Z)({},c&&{height:"initial !important",minHeight:"initial !important"})),(0,i.Z)(e,"& .MuiDataGrid-virtualScrollerRenderZone",(0,r.Z)({},c&&{position:"relative"})),(0,i.Z)(e,"& .MuiDataGrid-overlayWrapper",(0,i.Z)({},"& .MuiCircularProgress-root",{color:t.palette.secondary.main})),(0,i.Z)(e,"& .MuiDataGrid-row",(0,r.Z)({},c&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,i.Z)(e,"& .MuiDataGrid-row > .MuiDataGrid-cell",(0,r.Z)({},c&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,i.Z)(e,"& .MuiDataGrid-row.even",{backgroundColor:t.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,v.Fq)(t.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,v.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,v.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,v.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity)}}}}),e})},91272:function(n,e,t){"use strict";t.d(e,{t:function(){return l}});var i=t(85893),r=t(67294),o=t(45697),a=t(11163),s=t(46003),c=t(8500),l=(0,r.forwardRef)(function(n,e){var t=n.columns,o=n.history,l=n.initialSort,u=n.loading,d=n.meta,m=n.paginationSize,f=n.refetch,p=n.submissionsRefetch,h=n.rowClick,v=n.rows,g=n.xeroPageSize,y=(0,a.useRouter)(),x=y.query,b=void 0===x?{}:x,Z=(0,r.useState)(parseInt(null==b?void 0:b.page,10)||1),I=Z[0],$=Z[1],_=(0,r.useState)(g||s.C1.paginationSize),q=_[0],w=_[1];l||(l={item:"createdAt",order:"desc"});var j=(0,r.useState)({item:l.item,order:l.order}),C=j[0],S=j[1],P=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=y.query,t=void 0===e?{}:e;if(n>1?t.page=n:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(e){return"page"===e?"".concat(e,"=").concat(n):"".concat(e,"=").concat(t[e])}).join("&");return"?".concat(i)},k=function(){S({item:l.item,order:l.order}),$(1);var n=P();y.push(n),w(g||s.C1.paginationSize)};(0,r.useImperativeHandle)(e,function(){return{currentPage:I,pageSize:q,sort:C,resetPagination:function(){k()}}});var M=function(n){var e=P(n);o&&y.push(e),$(n),!o&&f&&f()&&p&&p()},A=function(n){n!==s.C1.paginationSize&&(w(n),f&&f()&&p&&p())},T=function(n){var e;S({item:n.item,order:n.order}),f&&f()&&p&&p()};return(0,i.jsx)(c.Z,{columns:t,loading:u,paginationSize:m,pagination:d&&!0,paginationProps:d&&{currentPage:I,onPageChange:M,onPageSizeChange:A,pageCount:Math.ceil(d.aggregate.totalCount/q),perPage:q},rowClick:h,rows:v,sort:C,setSort:T})});l.propTypes={columns:o.array.isRequired,history:o.bool,initialSort:o.object,loading:o.bool,meta:o.object,refetch:o.func,submissionsRefetch:o.func,rowClick:o.func,rows:o.array.isRequired},l.defaultProps={history:!0,loading:!0,paginationSize:!1}},59938:function(n,e,t){"use strict";t.d(e,{X:function(){return p}});var i=t(14924),r=t(82670),o=t(828),a=t(7297),s=t(67294),c=t(6388),l=t(50319),u=t(75063),d=t(18586);function m(){var n=(0,a.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]);return m=function(){return n},n}function f(){var n=(0,a.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"]);return f=function(){return n},n}function p(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",a=(0,d.q)().user,u=(0,s.useState)(function(){try{switch(t){case"network":case"state":return e;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(n))||e}}catch(i){return e}}),m=u[0],f=u[1],p=function(e){try{var o=(0,r.Z)(e,Function)?e(m):e;switch(f(o),t){case"network":g({variables:{accountUserId:null==a?void 0:a.accountUserId,filters:(0,i.Z)({},n,o)}});break;case"sessionStorage":window.sessionStorage.setItem(n,JSON.stringify(o))}}catch(s){}};(0,c.aM)(h,{variables:{accountUserId:null==a?void 0:a.accountUserId},skip:"network"!==t,onCompleted:function(t){var i=t.accountUser;i&&f(i.filters[n]||e)}});var g=(0,o.Z)((0,l.D)(v),1)[0];return[m,p]}var h=(0,u.Ps)(m()),v=(0,u.Ps)(f())},51212:function(n,e,t){"use strict";t.r(e);var i=t(85893),r=t(11163),o=t.n(r),a=t(58849),s=t(17974),c=t(2845),l=t(18586),u=function(){var n,e,t=(0,l.q)(),r=(0,c.x)(),a=r.user,u=r.hasRole,d=null==t?void 0:null===(n=t.admin)||void 0===n?void 0:null===(e=n.modules)||void 0===e?void 0:e.assets;return a?d?(0,i.jsx)(s.E,{editable:u("admin"),initialFilters:{filterType:"assets_page"}}):(o().push("/404"),null):(o().push("/account/sign-in"),null)};u.getLayout=function(n){return(0,i.jsx)(a.Z,{children:n})},e.default=u},82670:function(n,e,t){"use strict";function i(n,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}t.d(e,{Z:function(){return i}})}},function(n){n.O(0,[3662,2283,212,8890,619,2583,4135,8579,6043,1838,4244,3911,1417,3776,1564,3054,2329,8500,778,1023,7454,1870,2797,1047,8062,3058,6313,3754,1050,4061,8849,6733,5656,9774,2888,179],function(){return n(n.s=38910)}),_N_E=n.O()}]);