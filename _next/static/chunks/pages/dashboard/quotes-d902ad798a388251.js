(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4064],{28201:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle")},41687:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline")},73890:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27M12 17.5 6.5 12H10v-2h4v2h3.5zM5.12 5l.81-1h12l.94 1z"}),"Archive")},60888:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")},41733:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},40535:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5z"}),"DescriptionOutlined")},63441:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},77957:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},2548:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined")},79369:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz")},57976:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},65817:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications")},2391:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt")},69008:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"m20.55 5.22-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28M12 9.5l5.5 5.5H14v2h-4v-2H6.5zM5.12 5l.82-1h12l.93 1z"}),"Unarchive")},24519:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile")},22961:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},30845:function(n,e){"use strict";var t=Number.isNaN||function(n){return"number"==typeof n&&n!=n};function i(n,e){return!!(n===e||t(n)&&t(e))}function r(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!i(n[t],e[t]))return!1;return!0}e.Z=function(n,e){void 0===e&&(e=r);var t,i,o=[],a=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return a&&t===this&&e(r,o)||(i=n.apply(this,r),a=!0,t=this,o=r),i}}},56529:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/quotes",function(){return t(31714)}])},45815:function(n,e,t){"use strict";t.d(e,{z:function(){return a}});var i=t(7297),r=t(75063);function o(){var n=(0,i.Z)(["\n  fragment AccountFields on Account {\n    id\n    type\n    name\n    status\n    vatId\n  }\n"]);return o=function(){return n},n}var a=(0,r.Ps)(o())},5336:function(n,e,t){"use strict";t.d(e,{C:function(){return A}});var i=t(85893),r=t(67294),o=t(45697),a=t.n(o),s=t(93946),u=t(25464),d=t(18972),c=t(57976),l=t(73890),m=t(69008),p=t(41687),f=t(60888),h=t(40535),g=t(63441),v=t(41733),_=t(77957),y=t(2548),b=t(24519),x=t(2391),I=t(69308),q=t(79369),S=t(22961),$=t(28201),Z=t(51233),C=t(15861),j={add:(0,i.jsx)(p.Z,{}),archive:(0,i.jsx)(l.Z,{}),avatar:(0,i.jsx)($.Z,{}),check:(0,i.jsx)(f.Z,{}),delete:(0,i.jsx)(v.Z,{}),description:(0,i.jsx)(h.Z,{}),download:(0,i.jsx)(g.Z,{}),info:(0,i.jsx)(y.Z,{}),edit:(0,i.jsx)(_.Z,{}),location:(0,i.jsx)(I.Z,{}),unarchive:(0,i.jsx)(m.Z,{}),uploadFile:(0,i.jsx)(b.Z,{}),receipt:(0,i.jsx)(x.Z,{}),visibility:(0,i.jsx)(S.Z,{})},k={default:(0,i.jsx)(c.Z,{}),defaultHoriz:(0,i.jsx)(q.Z,{}),description:(0,i.jsx)(h.Z,{})},A=function(n){var e=n.actionsData,t=n.icon,o=n.row,a=n.disabled,c=(0,r.useState)(null),l=c[0],m=c[1],p=function(n){n.stopPropagation(),m(n.currentTarget)},f=function(){m(null)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:a,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:p,children:k[t]}),(0,i.jsx)(u.Z,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:f,PaperProps:{sx:{borderRadius:2}},children:e(o).map(function(n,e){return(0,i.jsx)(d.Z,{disabled:n.disabled,onClick:function(e){n.onClick(e),f()},sx:{pl:3,pr:4},children:(0,i.jsxs)(Z.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==j?void 0:j[n.icon])||null,(0,i.jsx)(C.Z,{children:n.tooltip})]})},e)})})]})};A.propTypes={actionsData:a().func.isRequired,icon:a().oneOf(["default","description"]),row:a().any.isRequired,disabled:a().bool},A.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},78232:function(n,e,t){"use strict";t.d(e,{F:function(){return C}});var i=t(14924),r=t(26042),o=t(69396),a=t(85893),s=t(45697),u=t.n(s),d=t(10166),c=t(80482),l=t(23776),m=t(98456),p=t(16143),f=t(50135),h=t(99534),g=t(29815),v=t(74061),_=t(6498),y=t(75438),b=t(15861),x=t(61730),I=t(67294),q=(0,I.createContext)({}),S=(0,I.forwardRef)(function(n,e){var t=(0,I.useContext)(q);return(0,a.jsx)("div",(0,r.Z)({ref:e},n,t))}),$=(0,I.forwardRef)(function(n,e){var t=n.children,i=(0,h.Z)(n,["children"]),r=[];t.forEach(function(n){r.push(n),r.push.apply(r,(0,g.Z)(n.children||[]))});var o,s,u=(0,_.u)(),d=(0,x.Z)(u.breakpoints.up("sm"),{noSsr:!0}),c=r.length,l=d?36:48,m=function(n){return n.hasOwnProperty("group")?48:l},p=(s=(0,I.useRef)(null),(0,I.useEffect)(function(){null!=s.current&&s.current.resetAfterIndex(0,!0)},[c]),s);return(0,a.jsx)("div",{ref:e,children:(0,a.jsx)(q.Provider,{value:i,children:(0,a.jsx)(v.S_,{itemData:r,height:(c>8?8*l:r.map(m).reduce(function(n,e){return n+e},0))+16,width:"100%",ref:p,outerElementType:S,innerElementType:"ul",itemSize:function(n){return m(r[n])},overscanCount:5,itemCount:c,children:Z})})})});function Z(n){var e=n.data,t=n.index,i=n.style,s=e[t],u=(0,o.Z)((0,r.Z)({},i),{top:i.top+8});return s.hasOwnProperty("group")?(0,a.jsx)(y.Z,{component:"div",style:u,children:s.group},s.key):(0,a.jsx)(b.Z,(0,o.Z)((0,r.Z)({component:"li"},s[0]),{noWrap:!0,style:u,children:s[1].label}))}var C=function(n){var e=n.label,t=n.loading,i=n.placeholder,s=n.error,u=n.helperText,d=n.inputProps;return(0,a.jsx)(k,(0,o.Z)((0,r.Z)({},n),{disableListWrap:!0,PopperComponent:j,ListboxComponent:$,renderInput:function(n){return(0,a.jsx)(f.Z,(0,o.Z)((0,r.Z)({},n,d),{error:s,helperText:u,label:e,placeholder:i,color:"secondary",variant:"standard",InputProps:(0,o.Z)((0,r.Z)({},n.InputProps,(null==d?void 0:d.InputProps)||{}),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(m.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))},renderOption:function(n,e,t){return[n,e,t.index]},renderGroup:function(n){return n}}))};C.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1},C.propTypes={value:u().shape({value:u().any,label:u().string}),onChange:u().func,label:u().string,loading:u().bool,onOpen:u().func,options:u().arrayOf(u().shape({value:u().any,label:u().string})),inputProps:u().object,withoutSelectIcon:u().bool,inputValue:u().string,onInputChange:u().func};var j=(0,d.Z)(p.Z)((0,i.Z)({zIndex:"12000 !important"},"& .".concat(c.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),k=(0,d.Z)(l.Z)(function(n){var e=n.withoutSelectIcon;return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":(0,r.Z)({},e&&{display:"none"})}}}})},48580:function(n,e,t){"use strict";t.d(e,{q:function(){return f}});var i=t(26042),r=t(69396),o=t(99534),a=t(85893),s=t(87918),u=t(98456),d=t(23776),c=t(50135),l=t(67294),m=t(45697),p=t.n(m),f=function(n){var e=n.loading,t=n.setSearch,m=n.textFieldProps,p=(0,o.Z)(n,["loading","setSearch","textFieldProps"]),f=(0,l.useState)(""),h=f[0],g=f[1];return(0,l.useEffect)(function(){var n=setTimeout(function(){t(h)},500);return function(){return clearTimeout(n)}},[h,t]),(0,a.jsx)(d.Z,(0,r.Z)((0,i.Z)({isOptionEqualToValue:function(n,e){return n.value===e.value}},p),{loading:e,onInputChange:function(n,e){g(e)},getOptionLabel:function(n){return n.label},renderTags:function(n,e){return n.map(function(n,t){return(0,a.jsx)(s.Z,(0,i.Z)({size:"small",label:n.label},e({index:t})))})},renderInput:function(n){return(0,a.jsx)(c.Z,(0,r.Z)((0,i.Z)({},n,m),{InputProps:(0,r.Z)((0,i.Z)({},n.InputProps,m.InputProps||{}),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[e?(0,a.jsx)(u.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))}}))};f.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}},f.propTypes={multiple:p().bool,limitTags:p().number,filterSelectedOptions:p().bool,color:p().string,loading:p().bool,value:p().oneOf([p().array,p().object]),onChange:p().func,options:p().arrayOf(p().shape({value:p().any.isRequired,label:p().string.isRequired})).isRequired,onOpen:p().func,setSearch:p().func,textFieldProps:p().shape({label:p().string,variant:p().oneOf(["standard"]),color:p().string,error:p().bool,helperText:p().string})}},85488:function(n,e,t){"use strict";t.d(e,{H_:function(){return v},Vw:function(){return x},aL:function(){return f},pf:function(){return h},sW:function(){return b},wd:function(){return g},xY:function(){return _},yT:function(){return y}});var i=t(7297),r=t(75063),o=t(66312);function a(){var n=(0,i.Z)(["\n  fragment JobFields on Job {\n    access\n    issueReportedDescription\n    adminId\n    costCategory\n    createdAt\n    description\n    id\n    meta\n    pricing\n    reference\n    scheduledAt\n    status\n    supplierLabourAmount\n    supplierMaterialsAmount\n    timing\n    timingEnd\n    timingNormalHours\n    timingStart\n    title\n    type\n    siteVisitStart\n    siteVisitEnd\n    siteVisitWeekends\n    amount\n    number\n    quoted\n    timingStatus\n    correctDuration\n    correctStart\n    correctEnd\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,i.Z)(["\n  fragment JobQuoteFields on Job {\n    quoted\n    quoteNumber\n    quoteDue\n    quoteDueSupplier\n    quoteCharge\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,i.Z)(["\n  fragment JobAdminFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]);return u=function(){return n},n}function d(){var n=(0,i.Z)(["\n  fragment JobSupplierFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]);return d=function(){return n},n}function c(){var n=(0,i.Z)(["\n  mutation UpdateJob(\n    $id: Int!\n    $changes: Job_set_input\n    $timing: [JobTiming_insert_input!]!\n    $_append: Job_append_input = {}\n  ) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes, _append: $_append) {\n      id\n    }\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,i.Z)(["\n  mutation InsertJobTiming($timing: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return l=function(){return n},n}function m(){var n=(0,i.Z)(['\n  query GetJobHistory(\n    $jobId: Int\n    $locationId: Int!\n    $limit: Int\n    $offset: Int\n    $serviceId: Int\n    $startDate: timestamptz!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      id\n      title\n      status\n      scheduledAt\n      createdAt\n      meta\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return m=function(){return n},n}function p(){var n=(0,i.Z)(['\n  query GetJob($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quoted\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        id\n        invoiceNumber\n      }\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"]);return p=function(){return n},n}var f=(0,r.Ps)(a()),h=(0,r.Ps)(s()),g=(0,r.Ps)(u()),v=(0,r.Ps)(d()),_=(0,r.Ps)(c()),y=(0,r.Ps)(l()),b=(0,r.Ps)(m()),x=(0,r.Ps)(p(),o.WW,o.MR)},26576:function(n,e,t){"use strict";t.d(e,{w:function(){return h},L:function(){return f}});var i=t(7297),r=t(75063),o=t(45815),a=t(85488),s=t(66312);function u(){var n=(0,i.Z)(["\n  fragment QuoteFields on Job {\n    quoteNumber\n    quoteDue\n    quoteCharge\n  }\n"]);return u=function(){return n},n}function d(){var n=(0,i.Z)(["\n  query Quote($id: Int!) {\n    job: Job_by_pk(id: $id) {\n      id\n      title\n      description\n      costCategory\n      status\n      workStatus\n      scheduledAt\n      createdAt\n      customerId\n      customerUserId\n      locationId\n      managerId\n      parentId\n      serviceId\n      slaId\n      tenantId\n      reference\n      amount\n      accountByTenantid {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customer: Account {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      expenses: Expenses {\n        id\n        paid\n        description\n        amount\n        markup\n        vat\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n      }\n      messages: Messages {\n        id\n        message\n        priority\n        taskId\n        jobId\n        locationId\n        description\n      }\n      service: Service {\n        id\n        name\n        countryId\n        currencyId\n      }\n      supplier: Suplier {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      manager: Manager {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      timings: JobTimings {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return d=function(){return n},n}var c=(0,r.Ps)(u());(0,r.Ps)(d());var l=t(75327);function m(){var n=(0,i.Z)(["\n  query GetQuotes(\n    $endDate: timestamptz\n    $limit: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $type: String\n  ) {\n    quotes: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n      }\n      order_by: [$orderBy]\n    ) {\n      ...JobFields\n      ...JobSupplierFields\n      ...QuoteFields\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        notes\n        createdAt\n        user: User {\n          ...UserFields\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return n},n}function p(){var n=(0,i.Z)(["\n  query GetQuotes(\n    $customerId: Int\n    $date: timestamptz\n    $endDate: timestamptz\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $customerManagerId: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $supplierId: Int\n    $type: String\n    $userId: Int\n  ) {\n    quotes: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        ",'\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        type: { _eq: $type }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        supplierId: { _eq: $supplierId }\n        quoted: { _eq: true }\n        customerUserId: { _eq: $userId }\n      }\n      order_by: [$orderBy]\n    ) {\n      ...JobFields\n      ...JobAdminFields\n      ...QuoteFields\n      statusLog\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n        lineItems: SupplierQuoteLineItems {\n          id\n          qty\n          total\n        }\n      }\n      supplier: Supplier {\n        ...AccountFields\n      }\n      admin: Admin {\n        id\n        name\n      }\n      customer: Customer {\n        ...AccountFields\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      manager: Manager {\n        ...UserFields\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        notes\n        createdAt\n        user: User {\n          ...UserFields\n        }\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }}\n              {type: { _eq: "tags" }}\n            ]\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        ',"\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        supplierId: { _eq: $supplierId }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n        customerUserId: { _eq: $userId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return n},n}var f=(0,r.Ps)(m(),o.z,a.aL,c,a.H_,l.Px),h=function(n){var e=n.tagsWhere;return(0,r.Ps)(p(),e,e,o.z,s.WW,a.aL,a.wd,c,l.Px)}},42608:function(n,e,t){"use strict";var i=t(7297),r=t(75063),o=t(45815),a=t(85488),s=t(66312),u=t(75327);function d(){var n=(0,i.Z)(["\n  query GetDashboardList(\n    $accountId: Int\n    $adminId: Int\n    $customerId: Int\n    $supplierId: Int\n    $locationId: Int\n    $managerId: Int\n    $number: String\n    $asAt: timestamptz\n    $jobHoldReasonId: Int\n    $limit: Int\n    $monthStart: timestamptz\n    $offset: Int\n    $orderBy: dashboard_home_details_order_by!\n    $q: String\n    $tileName: String\n    $dayStart: timestamptz\n    $userId: Int\n    $status: [String!]\n    $yearStart: timestamptz\n    $type: String\n  ) {\n    quotes: getDashboard_HomeTile_Details(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { number: { _eq: $number } }\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n        ",'\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        status: { _in: $status }\n        Job: { type: { _eq: $type } }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n      }\n      order_by: [$orderBy]\n      limit: $limit\n      offset: $offset\n    ) {\n      Assets(where: { entity: { _eq: "Job" } }) {\n        id\n        assetId\n        __typename\n      }\n      ...JobFields\n      ...JobAdminFields\n      admin: Admin {\n        id\n        name\n        __typename\n      }\n      customer: Customer {\n        ...AccountFields\n        __typename\n      }\n      location: Location {\n        id\n        name\n        __typename\n      }\n      manager: Manager {\n        ...UserFields\n        __typename\n      }\n      service: Service {\n        id\n        name\n        __typename\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n          __typename\n        }\n        __typename\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }}\n              {type: { _eq: "tags" }}\n            ]\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n      sla: SLA {\n        id\n        name\n        __typename\n      }\n      supplier: Supplier {\n        ...AccountFields\n        __typename\n      }\n      supplierOffers: SupplierOffers {\n        status\n        rate\n        supplier: Supplier {\n          ...AccountFields\n          __typename\n        }\n        __typename\n      }\n      job: Job {\n        type\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        id\n        status\n        createdAt\n        user: User {\n          ...UserFields\n          __typename\n        }\n        __typename\n      }\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n      }\n      id: jobId\n      number\n      # location\n      priority\n      scheduledAt\n      assignedTo\n      jobHoldReason\n      locationId\n      meta\n      managerId\n      description\n      customerName\n      customerId\n      reference\n      serviceName\n      status\n      supplierId\n      supplierName\n      timingStart\n      type\n      quoteNumber\n      quoteDue\n      createdAt\n    }\n    meta: getDashboard_HomeTile_Details_aggregate(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n        ',"\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        number: { _eq: $number }\n        status: { _in: $status }\n        Job: { type: { _eq: $type } }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n        __typename\n      }\n      __typename\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return d=function(){return n},n}var c=function(n){var e=n.tagsWhere;return(0,r.Ps)(d(),e,e,o.z,s.WW,a.aL,a.wd,u.Px)};e.Z=c},15033:function(n,e,t){"use strict";t.d(e,{i:function(){return $}});var i=t(14924),r=t(26042),o=t(69396),a=t(85893),s=t(67294),u=t(11163),d=t(45697),c=t.n(d),l=t(61870),m=t(5616),p=t(51233),f=t(15861),h=t(90948),g=t(41796),v=t(29217),_=t(45111),y=t(46003),b=t(70872),x=t(58886),I=t(61730),q=function(n){var e=n.currentPage,t=n.totalCount,i=n.pageSize,o=n.onPageChange,s=(0,I.Z)("(max-width:400px)"),u=(0,I.Z)("(max-width:500px)");return(0,a.jsx)(S,{mb:2,page:e,count:Math.ceil(t/i),onChange:function(n,e){return o(e)},variant:"outlined",shape:"rounded",size:s?"small":"medium",hidePrevButton:1===e,hideNextButton:e===Math.ceil(t/i),siblingCount:u?0:1,renderItem:function(n){return(0,a.jsx)(x.Z,(0,r.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},n))}})};q.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}},q.propTypes={currentPage:c().number,totalCount:c().number,pageSize:c().number,onPageChange:c().func};var S=(0,h.ZP)(b.Z)(function(n){var e,t=n.hidePrevButton,o=n.hideNextButton,a=n.theme;return e={},(0,i.Z)(e,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,i.Z)(e,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,i.Z)(e,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,i.Z)(e,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,i.Z)(e,"& button.Mui-selected",(0,r.Z)({color:a.palette.white.main,backgroundColor:a.palette.secondary.main},o?{borderRadius:"0 5px 5px 0"}:{},t?{borderRadius:"5px 0 0 5px"}:{})),e}),$=(0,s.forwardRef)(function(n,e){var t=n.columns,i=n.history,o=n.initialSort,d=n.meta,c=n.refetch,l=n.paginationSize,m=n.containerHeight,h=n.noResultsMessage,g=n.autoHeight,b=(0,u.useRouter)(),x=b.query,I=void 0===x?{}:x,S=(0,s.useState)(parseInt(null==I?void 0:I.page,10)||1),$=S[0],j=S[1],k=(0,s.useState)(l||y.C1.paginationSize),A=k[0],w=k[1];o||(o={item:"createdAt",order:"desc"});var R=(0,s.useState)({item:o.item,order:o.order}),M=R[0],D=R[1],T=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=b.query,t=void 0===e?{}:e;if(n>1?t.page=n:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(e){return"page"===e?"".concat(e,"=").concat(n):"".concat(e,"=").concat(t[e])}).join("&");return"?".concat(i)},P=function(){D({item:o.item,order:o.order}),j(1);var n=T();b.push(n),w(l||y.C1.paginationSize)};(0,s.useImperativeHandle)(e,function(){return{currentPage:$,pageSize:A,sort:M,resetPagination:function(){P()}}});var U=function(n){var e=T(n);i&&b.push(e),j(n),!i&&c&&c()},L=function(n){n&&n.field&&n.sort?(D({item:t.find(function(e){return e.field===n.field}).sortName||n.field||n.item||o.item,order:n.sort||n.order||o.order}),c&&c()):(D({item:o.item,order:o.order}),c&&c())};return(0,a.jsxs)(Z,{containerHeight:m,children:[(0,a.jsx)(C,(0,r.Z)({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:g,sortingMode:"server",onSortModelChange:function(n){return L(n[0])},columns:t,pageSize:A,slots:{columnSortedAscendingIcon:function(){return(0,a.jsx)(v.Z,{})},columnSortedDescendingIcon:function(){return(0,a.jsx)(_.Z,{})},columnUnsortedIcon:function(){return(0,a.jsxs)(p.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,a.jsx)(v.Z,{sx:{marginBottom:"-15px"}}),(0,a.jsx)(_.Z,{})]})},noResultsOverlay:function(){return(0,a.jsx)(p.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(f.Z,{children:h})})},noRowsOverlay:function(){return(0,a.jsx)(p.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(f.Z,{children:h})})}}},n)),d&&Math.ceil(d.aggregate.totalCount/A)>1&&(0,a.jsx)(q,{currentPage:$,totalCount:d.aggregate.totalCount,pageSize:A,onPageChange:U})]})});$.propTypes={history:c().bool,initialSort:c().object,loading:c().bool,meta:c().object,refetch:c().func,paginationSize:c().number,noResultsMessage:c().string,columns:c().array.isRequired,rows:c().array.isRequired,autoHeight:c().bool},$.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var Z=(0,h.ZP)(m.Z)(function(n){return{height:n.containerHeight,display:"flex",flexDirection:"column"}}),C=(0,h.ZP)(l.s)(function(n){var e,t=n.theme,a=n.hideHeader,s=(n.rows,n.loading,n.rowHeight),u=n.isPdf;return e={"--DataGrid-overlayHeight":"40px"},(0,i.Z)(e,"&.MuiDataGrid-root",(0,r.Z)({color:t.palette.black.main,border:"none"},u&&{"@media print":{display:"block"}})),(0,i.Z)(e,"& .MuiDataGrid-main",(0,r.Z)({},u&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(e,"& .MuiDataGrid-columnHeaders",(0,o.Z)((0,r.Z)({},a&&{display:"none"}),{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:t.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,i.Z)(e,"& .MuiDataGrid-virtualScroller",(0,r.Z)({},a&&{marginTop:"0 !important"},u&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(e,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,i.Z)(e,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(e,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(e,"& .MuiDataGrid-virtualScrollerContent",(0,r.Z)({},u&&{height:"initial !important",minHeight:"initial !important"})),(0,i.Z)(e,"& .MuiDataGrid-virtualScrollerRenderZone",(0,r.Z)({},u&&{position:"relative"})),(0,i.Z)(e,"& .MuiDataGrid-overlayWrapper",(0,i.Z)({},"& .MuiCircularProgress-root",{color:t.palette.secondary.main})),(0,i.Z)(e,"& .MuiDataGrid-row",(0,r.Z)({},u&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,i.Z)(e,"& .MuiDataGrid-row > .MuiDataGrid-cell",(0,r.Z)({},u&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,i.Z)(e,"& .MuiDataGrid-row.even",{backgroundColor:t.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,g.Fq)(t.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,g.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,g.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,g.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity)}}}}),e})},20705:function(n,e,t){"use strict";t.d(e,{x:function(){return c}});var i=t(14924),r=t(26042),o=t(69396),a=t(67294),s=t(96486),u=t(46003),d=function(n){try{return JSON.parse(n)}catch(e){return!1}},c=function(n){var e,t,c,l,m,p,f,h,g,v,_,y=n.filters,b=n.newFilters,x=n.initialSort,I=(0,a.useRef)(),q=(0,a.useState)({}),S=q[0],$=q[1],Z=(0,a.useState)({}),C=Z[0],j=Z[1],k=x||{item:"createdAt",order:"desc"},A=(0,i.Z)({},(null===(e=I.current)||void 0===e?void 0:e.sort.item)||k.item,k.inneritem?(0,i.Z)({},k.inneritem,(null===(t=I.current)||void 0===t?void 0:t.sort.order)||k.order):(null===(c=I.current)||void 0===c?void 0:c.sort.order)||k.order);return(0,a.useEffect)(function(){var n=!(0,s.isEqual)(S,y),e=!(0,s.isEqual)(C,b);if(n&&($(y),null==I||null===(i=I.current)||void 0===i||i.resetPagination()),e&&(j(b),null==I||null===(r=I.current)||void 0===r||r.resetPagination()),(null==I?void 0:null===(t=I.current)||void 0===t?void 0:t.setSort)&&!(n||e)){var t,i,r,o,a,u,d,c,l,m,p,f=(null===(o=I.current)||void 0===o?void 0:null===(a=o.sort)||void 0===a?void 0:a.item)&&(null===(u=I.current)||void 0===u?void 0:null===(d=u.sort)||void 0===d?void 0:d.order)?{item:null===(c=I.current)||void 0===c?void 0:null===(l=c.sort)||void 0===l?void 0:l.item,order:null===(m=I.current)||void 0===m?void 0:null===(p=m.sort)||void 0===p?void 0:p.order}:A;I.current.setSort(f)}},[y,b]),{initialData:(0,o.Z)((0,r.Z)({},y),{newFilters:(null==b?void 0:b.length)>0?b:void 0,limit:(null===(l=I.current)||void 0===l?void 0:l.pageSize)==="Infinity"?null:parseInt(null===(m=I.current)||void 0===m?void 0:m.pageSize,10)||u.C1.paginationSize,offset:((null===(p=I.current)||void 0===p?void 0:p.currentPage)-1||0)*((null===(f=I.current)||void 0===f?void 0:f.pageSize)||u.C1.paginationSize),orderBy:d(null===(h=I.current)||void 0===h?void 0:null===(g=h.sort)||void 0===g?void 0:null===(v=g.item)||void 0===v?void 0:v.replace(/ORDER/i,null===(_=I.current)||void 0===_?void 0:_.sort.order))||A}),initialSort:x,ref:I}}},66137:function(n,e,t){"use strict";t.d(e,{Y:function(){return i}});var i=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Job",t="";return(null==n?void 0:n.length)&&(t="\n      Taxonomy: {\n      _and: [\n        { entity: { _eq: ".concat(e,' } }\n        {\n          Taxonomy: {\n            status: { _eq: "active" }\n            _and: [{ id: { _in: [').concat(n,'] } }, { type: { _eq: "tags" } }]\n          }\n        }\n      ]\n    }\n  ')),t}},75327:function(n,e,t){"use strict";t.d(e,{$E:function(){return P},AX:function(){return S},I4:function(){return q},JA:function(){return Z},MT:function(){return w},Px:function(){return j},WF:function(){return C},ZA:function(){return E},a8:function(){return k},fA:function(){return T},fo:function(){return $},ge:function(){return L},iM:function(){return D},nE:function(){return R},nh:function(){return M},r1:function(){return A},tW:function(){return F},uz:function(){return U}});var i=t(7297),r=t(75063);function o(){var n=(0,i.Z)(["\n  mutation InsertAccountUser($objects: [Account_User_insert_input!]!) {\n    insert_Account_User(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return o=function(){return n},n}function a(){var n=(0,i.Z)(["\n  mutation UpdateUser(\n    $id: Int!\n    $accountUserId: Int!\n    $accountUserChanges: Account_User_set_input\n    $changes: User_set_input\n    $updateAccountUser: Boolean!\n  ) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _set: $accountUserChanges)\n      @include(if: $updateAccountUser) {\n      id\n    }\n    update_User_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,i.Z)(["\n  query GetUsers(\n    $accountId: Int\n    $accountType: String\n    $date: timestamptz\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: User_order_by!\n    $status: String\n  ) {\n    users: User(\n      limit: $limit\n      offset: $offset\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [\n          { email: { _ilike: $q } }\n          { nameFirst: { _ilike: $q } }\n          { nameLast: { _ilike: $q } }\n        ]\n        status: { _eq: $status }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n        userLocations: User_Account_Locations {\n          accountLocationId\n        }\n      }\n    }\n    meta: User_aggregate(\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,i.Z)(["\n  query GetUser($id: Int!) {\n    user: User_by_pk(id: $id) {\n      id\n      fullName\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n      }\n    }\n  }\n"]);return u=function(){return n},n}function d(){var n=(0,i.Z)(["\n  query CheckDuplicateEmail($email: String!) {\n    users: User_public(where: { email: { _eq: $email } }) {\n      id\n      nameFirst\n      nameLast\n      email\n      phone\n    }\n  }\n"]);return d=function(){return n},n}function c(){var n=(0,i.Z)(["\n  fragment UserFields on User {\n    id\n    email\n    nameFirst\n    nameLast\n    fullName\n    phone\n    status\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,i.Z)(["\n  mutation SendGoogleAuthCode($code: String!, $id: Int!, $type: String!) {\n    createGoogleToken(code: $code, id: $id, type: $type) {\n      success\n      tokens\n      error\n    }\n  }\n"]);return l=function(){return n},n}function m(){var n=(0,i.Z)(["\n  mutation GenerateMSURL($type: String!, $id: Int!) {\n    genenrateMSURL(id: $id, type: $type) {\n      url\n    }\n  }\n"]);return m=function(){return n},n}function p(){var n=(0,i.Z)(["\n  mutation signoutMS($id: Int!, $type: String!, $email: String!) {\n    signoutMS(id: $id, type: $type, email: $email) {\n      error\n      msId\n      success\n    }\n  }\n"]);return p=function(){return n},n}function f(){var n=(0,i.Z)(["\n  query getAccountMeta($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      meta\n    }\n  }\n"]);return f=function(){return n},n}function h(){var n=(0,i.Z)(["\n  query user($id: Int!) {\n    user: User_by_pk(id: $id) {\n      meta\n      invoiceThreshold\n      quoteThreshold\n    }\n  }\n"]);return h=function(){return n},n}function g(){var n=(0,i.Z)(["\n  query GetAccountUserMeta($userId: Int!, $accountId: Int!) {\n    accountUser: Account_User(where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }) {\n      meta\n    }\n  }\n"]);return g=function(){return n},n}function v(){var n=(0,i.Z)(["\n  mutation UpdateAccountUserByUserIdAccoutId(\n    $userId: Int!\n    $accountId: Int!\n    $changes: Account_User_set_input!\n  ) {\n    update_Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n      _set: $changes\n    ) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return v=function(){return n},n}function _(){var n=(0,i.Z)(["\n  mutation updateAccount($accountId: Int!, $set: Account_set_input!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $set) {\n      id\n    }\n  }\n"]);return _=function(){return n},n}function y(){var n=(0,i.Z)(["\n  mutation updateUserMeta($userId: Int!, $meta: jsonb!) {\n    update_User_by_pk(pk_columns: { id: $userId }, _set: { meta: $meta }) {\n      id\n      meta\n    }\n  }\n"]);return y=function(){return n},n}function b(){var n=(0,i.Z)(['\n  query userDevices($accountId: Int!) {\n    users: User(\n      where: {\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        UserDevices: { status: { _eq: "active" } }\n        status: { _eq: "active" }\n      }\n    ) {\n      id\n      fullName\n      devices: UserDevices(\n        order_by: { updatedAt: desc_nulls_last }\n        where: { status: { _eq: "active" } }\n        limit: 1\n      ) {\n        id\n        playerId\n      }\n    }\n  }\n']);return b=function(){return n},n}function x(){var n=(0,i.Z)(['\n  query GetAccountLocations($accountId: Int, $limit: Int, $offset: Int) {\n    location: Location(\n      offset: $offset\n      limit: $limit\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      id\n      name\n      accountLocations: Account_Locations {\n        id\n      }\n      addresses: Addresses(where: { entity: { _eq: "Location" }, registered: { _eq: true } }) {\n        id\n        status\n        address: Address {\n          id\n          name\n          addressLine1\n          postCode\n        }\n      }\n    }\n    meta: Location_aggregate(\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return x=function(){return n},n}function I(){var n=(0,i.Z)(["\n  mutation InsertUserAccountLocations(\n    $accountUserId: Int!\n    $objects: [User_Account_Location_insert_input!]!\n  ) {\n    delete_User_Account_Location(where: { accountUserId: { _eq: $accountUserId } }) {\n      affected_rows\n    }\n    insert_User_Account_Location(objects: $objects) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"]);return I=function(){return n},n}var q=(0,r.Ps)(o()),S=(0,r.Ps)(a()),$=(0,r.Ps)(s()),Z=(0,r.Ps)(u()),C=(0,r.Ps)(d()),j=(0,r.Ps)(c()),k=(0,r.Ps)(l()),A=(0,r.Ps)(m()),w=(0,r.Ps)(p()),R=(0,r.Ps)(f()),M=(0,r.Ps)(h()),D=(0,r.Ps)(g()),T=(0,r.Ps)(v()),P=(0,r.Ps)(_()),U=(0,r.Ps)(y()),L=(0,r.Ps)(b()),E=(0,r.Ps)(x()),F=(0,r.Ps)(I())},9492:function(n,e,t){"use strict";t.d(e,{S:function(){return i}});var i=function(n,e){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=e,t.href=n,t.click(),document.body.removeChild(t)):location.replace(n)}},97768:function(n,e,t){"use strict";t.d(e,{x:function(){return i}});var i=[{text:"Reactive",value:"reactive",context:"#2EE6CA"},{text:"Planned Maintenance",value:"ppm",context:"#D67EFF"},{text:"Quote",value:"quote",context:"#7D7"},{text:"Compliance",value:"cppm",context:"#CC7429"}]},31714:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return nm}});var i=t(85893),r=t(11163),o=t.n(r),a=t(58849),s=t(26042),u=t(69396),d=t(828),c=t(67294),l=t(6388),m=t(73359),p=t(11057),f=t(98456),h=t(90629),g=t(51233),v=t(15861),_=t(81261),y=t(65817),b=t(30381),x=t.n(b),I=t(57460),q=t.n(I),S=t(45697),$=t.n(S),Z=t(18586),C=t(2845),j=t(20705),k=t(9492),A=t(86886),w=t(11994),R=t(50135),M=t(61730),D=t(42283),T=t(10166),P=t(33754),U=t(59938),L=t(22244),E=t(92148),F=t(4972),N=t(78232),O=t(57179),z=t(48580),H=function(n){var e=n.open,t=n.setOpen,r=n.initialFilters,o=(n.filters,n.setFilters),a=(0,M.Z)("(max-width: 400px)")?4:0,f=(0,C.x)(),h=f.hasRole,v=f.user,_=(0,d.Z)((0,U.X)("form_data_".concat(r.filterType),r),2),y=_[0],b=_[1],x=(0,D.cI)({defaultValues:y}),I=x.control,q=x.handleSubmit,S=x.register,$=x.reset,Z=x.watch,j=x.setValue,k=x.getValues,w=Z("startDate"),T=(0,c.useState)(""),P=T[0],H=T[1],B=L.iz.map(function(n){return h("supplier")?{label:n.supplierText,value:n.value}:h("customer")?{label:n.customerText,value:n.value}:{label:n.text,value:n.value}}).filter(function(n){return null!==n.label}),G=(0,d.Z)((0,m.t)(F.yR),2),V=G[0],Y=G[1],K=Y.loading,X=Y.data,nn=(void 0===X?{items:[]}:X).items,ne=(0,d.Z)((0,m.t)(F.SW),2),nt=ne[0],ni=ne[1],nr=ni.loading,no=ni.data,na=(void 0===no?{items:[]}:no).items,ns=(0,d.Z)((0,m.t)(F._d),2),nu=ns[0],nd=ns[1],nc=nd.loading,nl=nd.data,nm=(void 0===nl?{items:[]}:nl).items,np=(0,d.Z)((0,m.t)(F.by,{variables:{where:{type:{_eq:"supplier"}}}}),2),nf=np[0],nh=np[1],ng=nh.loading,nv=nh.data,n_=(void 0===nv?{items:[]}:nv).items,ny=(0,l.aM)(F.K4,{skip:!e,variables:{accountId:v.accountId,limit:50,offset:0,q:""!==P?"%".concat(P,"%"):null}}),nb=ny.data,nx=(void 0===nb?{items:[]}:nb).items,nI=ny.loading;(0,c.useEffect)(function(){var n=B.filter(function(n){return"quoteOffered"===n.value});j("status",w?n:[])},[w,j,B]);var nq=function(n){try{var e,i,a,u,d,c,l,m,p,f={locationId:null!==(p=null===(e=n.location)||void 0===e?void 0:e.value)&&void 0!==p?p:null,startDate:n.startDate,endDate:n.endDate,status:null===(i=n.status)||void 0===i?void 0:i.map(function(n){return n.value}),customerId:null===(a=n.customerId)||void 0===a?void 0:a.value,supplierId:null===(u=n.supplierId)||void 0===u?void 0:u.value,userId:null===(d=n.userId)||void 0===d?void 0:d.value,tags:null===(c=n.tags)||void 0===c?void 0:c.map(function(n){return n.value}),customerManagerId:null===(l=n.customerManager)||void 0===l?void 0:l.value},h=n.q;if(h){f.q="%".concat(h,"%")||0;var g=/^\d+$/.test(h);"id"in r&&(f.id=g?Number(h):null),"meta"in r&&(f.meta=g?{invoiceNumbers:[h]}:null),"jobNumber"in r&&(f.jobNumber=g?String(h):null,f.invoiceNumber=g?Number(h):null)}(null===(m=f.status)||void 0===m?void 0:m.length)&&(f.isChangedStatusSelect=!0),o(function(n){return(0,s.Z)({},n,f)});var v=k();b(function(n){return(0,s.Z)({},n,v)})}finally{t(!1)}},nS=function(){o(r),$(r),t(!1)};return(0,i.jsx)(W,{keepMounted:!0,open:e,onClose:function(){return t(!1)},children:(0,i.jsx)("form",{onSubmit:q(nq),children:(0,i.jsx)(J,{children:(0,i.jsxs)(A.ZP,{container:!0,rowGap:4,children:[(0,i.jsx)(A.ZP,{container:!0,children:(0,i.jsx)(A.ZP,{item:!0,xs:12,children:(0,i.jsx)(R.Z,{fullWidth:!0,variant:"standard",color:"secondary",label:"Search...",name:"q",inputRef:S})})}),(0,i.jsxs)(A.ZP,{container:!0,columnSpacing:4,rowGap:a,children:[(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,i.jsx)(D.Qr,{name:"startDate",control:I,render:function(n){return(0,i.jsx)(Q,(0,u.Z)((0,s.Z)({},n),{label:"Quote offered date",renderInput:function(n){return(0,i.jsx)(R.Z,(0,u.Z)((0,s.Z)({},n),{variant:"standard"}))}}))}})}),(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,rowGap:a,children:(0,i.jsx)(D.Qr,{name:"endDate",control:I,render:function(n){return(0,i.jsx)(Q,(0,u.Z)((0,s.Z)({},n),{label:"Quote due date",renderInput:function(n){return(0,i.jsx)(R.Z,(0,u.Z)((0,s.Z)({},n),{variant:"standard"}))}}))}})})]}),(0,i.jsxs)(A.ZP,{container:!0,columnSpacing:4,rowGap:a,children:[(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,i.jsx)(D.Qr,{name:"status",control:I,render:function(n){var e=n.value,t=n.onChange;return(0,i.jsx)(N.F,{disabled:Boolean(w),multiple:!0,limitTags:1,value:e,onChange:function(n,e){return t(e)},label:"Select status",options:B})}})}),!h(["customer","supplier"])&&(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,i.jsx)(D.Qr,{name:"customerId",control:I,render:function(n){var e=n.value,t=n.onChange;return(0,i.jsx)(N.F,{value:e,onChange:function(n,e){return t(e)},label:"Select customer",loading:nr,onOpen:function(){return nt()},options:na})}})}),h(E.n)&&(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,i.jsx)(D.Qr,{name:"userId",control:I,render:function(n){var e=n.value,t=n.onChange;return(0,i.jsx)(N.F,{value:e,onChange:function(n,e){return t(e)},label:"Select user",loading:K,onOpen:function(){return V()},options:nn})}})})]}),(0,i.jsxs)(A.ZP,{container:!0,columnSpacing:4,rowGap:a,children:[(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,i.jsx)(D.Qr,{name:"location",control:I,render:function(n){var e=n.value,t=n.onChange;return(0,i.jsx)(N.F,{value:e,onChange:function(n,e){return t(e)},label:"Select location",loading:nc,onOpen:function(){return nu()},options:nm})}})}),h("admin")&&(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,i.jsx)(O.r,{control:I})})]}),(0,i.jsx)(A.ZP,{container:!0,columnSpacing:4,rowGap:a,children:h("admin")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,i.jsx)(D.Qr,{name:"supplierId",control:I,render:function(n){var e=n.value,t=n.onChange;return(0,i.jsx)(N.F,{disabled:w,value:e,onChange:function(n,e){return t(e)},label:"Select supplier",loading:ng,onOpen:function(){return nf()},options:n_})}})}),(0,i.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,i.jsx)(D.Qr,{name:"customerManager",control:I,render:function(n){var e=n.value,t=n.onChange;return(0,i.jsx)(z.q,{value:e,onChange:function(n,e){return t(e)},loading:nI,options:nx,setSearch:H,textFieldProps:{color:"secondary",variant:"standard",label:"Select account manager"}})}})})]})}),(0,i.jsx)(A.ZP,{container:!0,item:!0,xs:12,children:(0,i.jsxs)(g.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,i.jsx)(p.Z,{variant:"contained",color:"danger",onClick:function(){return nS()},children:"Cancel"}),(0,i.jsx)(p.Z,{variant:"contained",color:"secondary",type:"submit",children:"Search"})]})})]})})})})};H.defaultProps={open:!1,setOpen:function(){},initialFilters:{},filters:{},setFilters:function(){}},H.propTypes={open:$().bool,setOpen:$().func,initialFilters:$().object,filters:$().object,setFilters:$().func};var W=(0,T.Z)(w.Z)(function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}),J=(0,T.Z)(h.Z)(function(){return{padding:"24px",maxWidth:"700px",maxHeight:"100vh",overflowY:"scroll"}}),Q=(0,T.Z)(P.M)(function(){return{"&.MuiFormControl-root.MuiTextField-root":{width:"100%"}}}),B=t(29815),G=t(97768),V=t(42608),Y=t(26576),K=function(n){var e=n.data,t=n.isCSV,i=n.hasRole,r=i("admin"),o=i("customer"),a=i("supplier");return e.map(function(n){var e,i,d,c,l,m,p,f,h,g,v,_,y,b,I,q,S=(0,B.Z)(L.iz).find(function(e){return e.value===n.status})||{text:"Accepted",supplierText:"Accepted",customerText:"Accepted"},$=S.text,Z=S.supplierText,C=S.customerText,j=$;o?j=C:a&&(j=Z);var k,A=((0,B.Z)(G.x).find(function(e){return e.value===n.type})||{text:"Quote"}).text,w=n.manager?"".concat(n.manager.nameFirst," ").concat(n.manager.nameLast):"Unassigned",R=n.scheduledAt?x()(n.scheduledAt,!0).format("YYYY-MM-DD"):"-",M=t&&(r||o)?(null===(e=n.sublocation)||void 0===e?void 0:e.name)||"-":void 0;return(0,u.Z)((0,s.Z)({id:n.id,description:(null==n?void 0:n.description)?null==n?void 0:n.description:"-",number:n.number,type:A,status:n.status,propertyId:null===(i=n.location)||void 0===i?void 0:i.id,managerId:null===(d=n.manager)||void 0===d?void 0:d.id,customerId:null===(c=n.customer)||void 0===c?void 0:c.id,supplierId:n.supplier?n.supplier.id:"",siteVisitStart:n.siteVisitStart,siteVisitEnd:n.siteVisitEnd,siteVisitWeekends:n.siteVisitWeekends,service:(null===(l=n.service)||void 0===l?void 0:l.name)||"-",manager:w,location:(null===(m=n.location)||void 0===m?void 0:m.name)||"-",property:(null===(p=n.location)||void 0===p?void 0:p.name)||"-",sublocation:M,tags:null==n?void 0:n.tags,customer:(null===(f=n.customer)||void 0===f?void 0:f.name)||"-",customerManager:(null===(h=n.customer)||void 0===h?void 0:null===(g=h.manager)||void 0===g?void 0:g.fullName)||"-"},!t&&{customerManagerId:null===(v=n.customer)||void 0===v?void 0:null===(_=v.manager)||void 0===_?void 0:_.id}),{acceptSupplier:n.supplier?n.supplier.name:"-",offeredSupplier:(null==n?void 0:null===(y=n.quotations)||void 0===y?void 0:y.length)>0?(k=n.quotations,t?k.map(function(n){var e;return null==n?void 0:null===(e=n.supplier)||void 0===e?void 0:e.name}).join(" / "):k):[],quotations:"".concat((null===(b=n.quotations)||void 0===b?void 0:b.length)||0,"/").concat(n.quoteNumber),received:"".concat(null===(I=n.quotations||[])||void 0===I?void 0:I.reduce(function(n,e){return"supplierQuoteComplete"===e.status?n+1:n},0),"/").concat((null===(q=n.quotations)||void 0===q?void 0:q.length)||0),range:X(n.quotations),due:x()(n.quoteDue).format("YYYY-MM-DD"),scheduleDate:R,date:x()(n.createdAt).format("YYYY-MM-DD"),statusText:j,quoted:n.quoted||!1,quotationsId:n.quotations[0]&&n.quotations[0].id,actions:""})})},X=function(n){var e=null;if(n.length>1){var t,i,r=n.map(function(n){var e;return null===(e=n.lineItems)||void 0===e?void 0:e.reduce(function(n,e){return n+(e.total||0)*e.qty},0)});e={high:(t=Math).max.apply(t,(0,B.Z)(r||[])),low:(i=Math).min.apply(i,(0,B.Z)(r||[]))}}return e},nn=function(n){var e=n.variables,t=n.user,i=n.queryParams,r=n.hasRole,o=e.limit,a=e.offset,d=e.orderBy,c=e.q,l=e.status,m=e.userId,p=e.asAt,f=e.locationId,h=e.managerId,g=e.tagsWhere,v=i.hasOwnProperty("tileName");if(!e.isChangedStatusSelect)switch(i.show){case"unsent":e.status=["quoteOffered","quoteNew"];break;case"unsentQuote":e.status=["quoteOffered","quoteReceived"];break;case"overdueQuote":e.status=["quoteNew","quoteOffered","quoteReceived","quoteSent"];break;default:e.status=i.show}if(v){var _=m||+i.userId,y=+i.accountId;return r(["customer","supplier"])&&(_=t.id,y=t.accountId),{query:(0,V.Z)({tagsWhere:g}),variables:(0,u.Z)((0,s.Z)({},e),{accountId:y,locationId:f||i.locationId,managerId:h||i.managerId,asAt:p,tileName:null==i?void 0:i.tileName,monthStart:e.monthStart,dayStart:e.todayStart,yearStart:e.yearStart,adminId:null==t?void 0:t.adminId,userId:_})}}return"supplier"===t.accountType?{query:Y.L,variables:(0,s.Z)({limit:o,offset:a,orderBy:d,q:c,status:l},e)}:{query:(0,Y.w)({tagsWhere:g}),variables:(0,s.Z)({},e)}},ne=t(45416),nt=t(15033),ni=t(5336),nr=t(63139),no=t(75832),na=t(12547),ns=t(48381),nu=t(66137),nd=function(n){var e,t,a,b,I,S=n.title,$=n.subtitle,A=n.initialFilters,w=(0,Z.q)(),R=(0,C.x)(),M=R.hasRole,D=R.user,T=(0,r.useRouter)().query,P=(0,c.useState)((0,s.Z)({},A)),U=P[0],L=P[1],E=(0,c.useState)(!1),F=E[0],N=E[1],O=(0,c.useState)(!1),z=O[0],W=O[1],J=null===(e=w.admin)||void 0===e?void 0:null===(t=e.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,Q=null===(a=w.admin)||void 0===a?void 0:null===(b=a.jobSetting)||void 0===b?void 0:b.jobNumberSuffix,B=M("admin"),G=M("supplier"),V=M(["admin","customer"]),Y=M(["admin","supplier"]),X=(0,j.x)({filters:U}),nd=X.initialData,nc=X.ref,nl=nn({variables:(0,u.Z)((0,s.Z)({},nd),{monthStart:x()(T.asAt).startOf("month"),todayEnd:x()(T.asAt).endOf("day"),todayStart:x()(T.asAt).startOf("day"),yearStart:x()(T.asAt).startOf("year"),asAt:x()(T.asAt).endOf("day"),tagsWhere:(0,nu.Y)(nd.tags)}),user:D,queryParams:T,hasRole:M}),nm=nl.query,np=nl.variables;"Accepted"===np.status?(np.type="reactive",delete np.status):delete np.type;var nf=(0,l.aM)(nm,{variables:np}),nh=nf.data,ng=void 0===nh?{quotes:[],meta:{aggregate:{totalCount:0}}}:nh,nv=ng.quotes,n_=ng.meta,ny=nf.loading,nb=nf.refetch,nx=(0,d.Z)((0,m.t)(nm,{variables:(0,u.Z)((0,s.Z)({},np),{limit:(null==n_?void 0:null===(I=n_.aggregate)||void 0===I?void 0:I.totalCount)||150}),onCompleted:function(n){var e=n.quotes;try{var t=q().unparse(n$(e,!0)),i="data:application/octet-stream,"+encodeURIComponent(t);(0,k.S)(i,"quotes.csv")}finally{W(!1)}},skip:!0}),1)[0],nI=function(n){n.stopPropagation(),W(!0),nx()},nq=function(n){var e=[];return B&&(e.push({context:"secondary",icon:"edit",onClick:function(e){return o().push("/dashboard/issues/manage?id=".concat(n.number,"&quoted=1"))},tooltip:"Edit"}),e.push({context:"secondary",icon:"info",onClick:function(){return o().push("/dashboard/issues/view?id=".concat(n.number))},tooltip:"Info"})),e},nS=function(n){n.stopPropagation(),o().push("/dashboard/issues/manage?quoted=1")},n$=function(n,e){return K({data:n,isCSV:e,hasRole:M})};return(0,i.jsxs)(g.Z,{width:"100%",spacing:2,sx:{height:"100%"},children:[(0,i.jsxs)(g.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,i.jsx)(p.Z,{variant:"contained",startIcon:(0,i.jsx)(_.Z,{}),onClick:function(){return N(!0)},children:"Filters"}),(0,i.jsxs)(g.Z,{direction:"row",spacing:2,children:[B&&(0,i.jsx)(p.Z,{variant:"contained",color:"secondary",onClick:nS,children:"Create Quote"}),!(0,nr.s)()&&(0,i.jsx)(p.Z,{startIcon:!z&&(0,i.jsx)("img",{src:"/static/icons/csv.svg"}),disabled:z,variant:"contained",color:"success",onClick:nI,children:z?(0,i.jsx)(f.Z,{size:20,color:"secondary"}):"Export Quote"})]})]}),(0,i.jsxs)(h.Z,{sx:{paddingTop:"16px",paddingBottom:"16px",height:"calc(100% - 52px)"},children:[(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(v.Z,{ml:2,variant:"h5",sx:{fontWeight:600},children:S}),$&&(0,i.jsx)(v.Z,{typography:"subtitle1",ml:2,children:$})]}),(0,i.jsx)(H,{open:F,setOpen:N,initialFilters:A,filters:U,setFilters:L}),(0,i.jsx)(nt.i,{autoHeight:!1,loading:ny,ref:nc,columns:[{sortable:!0,minWidth:100,field:"id",headerName:"ID",sortName:"id",renderCell:function(n){var e=n.row;return(0,i.jsx)(ne.D,{id:e.id,number:e.number,numberPrefix:J,numberSuffix:Q,status:e.status,openCanvas:!0,type:e.type,isQuote:e.quoted})}},{sortable:!1,flex:1,minWidth:80,field:"type",headerName:"Type",sortName:"type"},{minWidth:300,field:"tags",headerName:"Tags",sortable:!1,flex:1,renderCell:function(n){var e=n.row;return(0,i.jsx)(ns.K,{row:e,refetchQueries:["GetQuotes","GetDashboardList"],entity:"Job"})}},{sortable:!1,flex:1,minWidth:180,field:"description",headerName:"Description"},{sortable:!0,hide:!B,sortName:'{"Manager": {"nameFirst": "ORDER"}}',flex:1,minWidth:180,field:"manager",headerName:"Assigned to",renderCell:function(n){var e=n.row;return(0,i.jsx)(na.r,{color:"secondary",href:"/dashboard/users/view?id=".concat(e.managerId),children:e.manager})}},{sortable:!0,hide:!V,flex:1,minWidth:180,field:"location-admin-customer",headerName:"Location",sortName:'{"Location": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,i.jsx)(na.r,{color:"secondary",href:"/dashboard/properties/view?id=".concat(e.propertyId),children:e.location})}},{sortable:!0,hide:V,flex:1,minWidth:180,field:"location",headerName:"Location",sortName:'{"Location": {"name": "ORDER"}}'},{sortable:!0,hide:!B,flex:1,minWidth:180,field:"customer",headerName:"Customer",sortName:'{"Customer": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,i.jsx)(na.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(e.customerId),children:e.customer})}},{minWidth:180,flex:1,field:"customerManager",headerName:"Account Manager",sortName:'{"Customer": {"Manager": {"fullName": "ORDER"}}}',renderCell:function(n){var e=n.row;return(0,i.jsx)(na.r,{noWrap:!e.customerManagerId,color:"secondary",href:"/dashboard/users/view?id=".concat(e.customerManagerId),children:e.customerManager})}},{sortable:!0,hide:!B&&!G,flex:1,minWidth:180,field:"acceptSupplier",headerName:"Accepted Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,i.jsx)(na.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(e.supplierId),children:e.acceptSupplier})}},{sortable:!0,hide:!B&&!G,flex:1,minWidth:180,field:"offeredSupplier",headerName:"Offered Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(n){var e,t=n.row;return(0,i.jsx)(i.Fragment,{children:(null==t?void 0:null===(e=t.offeredSupplier)||void 0===e?void 0:e.length)>0?(0,i.jsx)(g.Z,{children:((null==t?void 0:t.offeredSupplier)||[]).map(function(n){var e,t;return(0,i.jsx)(na.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(null==n?void 0:null===(e=n.supplier)||void 0===e?void 0:e.id),children:null==n?void 0:null===(t=n.supplier)||void 0===t?void 0:t.name})})}):"-"})}},{sortable:!1,hide:!B,flex:1,minWidth:100,field:"quotations",headerName:"Quotations"},{sortable:!1,hide:!B&&!G,flex:1,minWidth:80,field:"received",headerName:"Quotations (Received)"},{sortable:!1,hide:!B,flex:1,minWidth:140,field:"range",headerName:"Quotations Range",renderCell:function(n){var e=n.row.range;return e?(0,i.jsxs)(g.Z,{children:[(0,i.jsxs)(v.Z,{sx:{whiteSpace:"nowrap"},children:["high: ",(0,no.T)(e.high)]}),(0,i.jsxs)(v.Z,{sx:{whiteSpace:"nowrap"},children:["low: ",(0,no.T)(e.low)]})]}):"N/A"}},{sortable:!0,headerName:"Quote Due",flex:1,minWidth:120,field:"due",sortName:"quoteDue",renderCell:function(n){var e=n.row,t=x()().format("YYYY-MM-DD"),r="Quote"===e.type,o=e.status.includes("quoteSent");if(r&&e.due<t&&!o)return(0,i.jsxs)(g.Z,{alignItems:"center",children:[(0,i.jsx)(y.Z,{color:"error",sx:{height:"20px"}}),(0,i.jsx)(v.Z,{children:e.due})]})}},{flex:1,minWidth:120,field:"scheduleDate",headerName:"Scheduled",sortable:!0,sortName:"scheduledAt"},{flex:1,minWidth:120,field:"date",headerName:"Created",sortable:!0,sortName:"createdAt"},{flex:1,minWidth:140,field:"statusText",headerName:"Status",sortable:!0,sortName:"status",renderCell:function(n){var e=n.row;return(null==e?void 0:e.offeredSupplier.length)>0&&(null==e?void 0:e.offeredSupplier.every(function(n){return"quotationRejected"===n.status}))?"Rejected":e.statusText}},{sortable:!1,hide:!B,flex:1,field:"actions",headerName:"",maxWidth:50,renderCell:function(n){var e=n.row;return(0,i.jsx)(ni.C,{actionsData:nq,row:e})}}],rows:n$(nv),meta:n_,refetch:nb,containerHeight:"calc(100% - 32px)",columnVisibilityModel:{manager:B,"location-admin-customer":V,location:!V,customer:B,customerManager:B,acceptSupplier:Y,offeredSupplier:Y,quotations:B,received:!G,range:B,actions:B,tags:B}})]})]})};nd.defaultProps={initialFilters:{},title:"",subtitle:""},nd.propTypes={initialFilters:$().object,title:$().string,subtitle:$().string};var nc={id:null,q:null,startDate:null,endDate:null,status:[],customerId:null,supplierId:null,userId:null,isChangedStatusSelect:!1,customerManager:null,filterType:"quotes_table"},nl=function(){var n,e=(0,Z.q)().hasUserModule,t=(0,C.x)(),s=t.user,u=t.hasRole,d=(0,r.useRouter)().query,c=e("quotes"),l=u("customer_user"),m=u("tenant_user");if(!s)return o().push("/account/sign-in"),null;if(!c&&(l||m))throw Error("Permission denied");return(0,i.jsx)(a.Z,{children:(0,i.jsx)(nd,{title:null!==(n=null==d?void 0:d.title)&&void 0!==n?n:"Quotes",subtitle:null==d?void 0:d.subtitle,initialFilters:nc})})};nl.getLayout=function(n){return n};var nm=nl},57460:function(n,e){var t,i,r,o; /* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/ o=function n(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},t=!e.document&&!!e.postMessage,i=t&&/blob:/i.test((e.location||{}).protocol),r={},o=0,a={parse:function(t,i){var s=(i=i||{}).dynamicTyping||!1;if(x(s)&&(i.dynamicTypingFunction=s,s={}),i.dynamicTyping=s,i.transform=!!x(i.transform)&&i.transform,i.worker&&a.WORKERS_SUPPORTED){var u=function(){if(!a.WORKERS_SUPPORTED)return!1;var t,i,s=(t=e.URL||e.webkitURL||null,i=n.toString(),a.BLOB_URL||(a.BLOB_URL=t.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),u=new e.Worker(s);return u.onmessage=g,u.id=o++,r[u.id]=u}();return u.userStep=i.step,u.userChunk=i.chunk,u.userComplete=i.complete,u.userError=i.error,i.step=x(i.step),i.chunk=x(i.chunk),i.complete=x(i.complete),i.error=x(i.error),delete i.worker,void u.postMessage({input:t,config:i,workerId:u.id})}var p=null;return a.NODE_STREAM_INPUT,"string"==typeof t?p=i.download?new d(i):new l(i):!0===t.readable&&x(t.read)&&x(t.on)?p=new m(i):(e.File&&t instanceof File||t instanceof Object)&&(p=new c(i)),p.stream(t)},unparse:function(n,e){var t=!1,i=!0,r=",",o="\r\n",s='"',u=s+s,d=!1,c=null,l=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter(function(n){return -1!==e.delimiter.indexOf(n)}).length||(r=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(t=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(d=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+s),"boolean"==typeof e.escapeFormulae&&(l=e.escapeFormulae)}}();var m=RegExp(f(s),"g");if("string"==typeof n&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return h(null,n,d);if("object"==typeof n[0])return h(c||p(n[0]),n,d)}else if("object"==typeof n)return"string"==typeof n.data&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:p(n.data[0])),Array.isArray(n.data[0])||"object"==typeof n.data[0]||(n.data=[n.data])),h(n.fields||[],n.data||[],d);throw Error("Unable to serialize unrecognized input");function p(n){if("object"!=typeof n)return[];var e=[];for(var t in n)e.push(t);return e}function h(n,e,t){var a="";"string"==typeof n&&(n=JSON.parse(n)),"string"==typeof e&&(e=JSON.parse(e));var s=Array.isArray(n)&&0<n.length,u=!Array.isArray(e[0]);if(s&&i){for(var d=0;d<n.length;d++)0<d&&(a+=r),a+=g(n[d],d);0<e.length&&(a+=o)}for(var c=0;c<e.length;c++){var l=s?n.length:e[c].length,m=!1,p=s?0===Object.keys(e[c]).length:0===e[c].length;if(t&&!s&&(m="greedy"===t?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===t&&s){for(var f=[],h=0;h<l;h++){var v=u?n[h]:h;f.push(e[c][v])}m=""===f.join("").trim()}if(!m){for(var _=0;_<l;_++){0<_&&!p&&(a+=r);var y=s&&u?n[_]:_;a+=g(e[c][y],_)}c<e.length-1&&(!t||0<l&&!p)&&(a+=o)}}return a}function g(n,e){if(null==n)return"";if(n.constructor===Date)return JSON.stringify(n).slice(1,25);!0===l&&"string"==typeof n&&null!==n.match(/^[=+\-@].*$/)&&(n="'"+n);var i=n.toString().replace(m,u);return"boolean"==typeof t&&t||"function"==typeof t&&t(n,e)||Array.isArray(t)&&t[e]||function(n,e){for(var t=0;t<e.length;t++)if(-1<n.indexOf(e[t]))return!0;return!1}(i,a.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1)?s+i+s:i}}};if(a.RECORD_SEP="\x1e",a.UNIT_SEP="\x1f",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!t&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=h,a.ParserHandle=p,a.NetworkStreamer=d,a.FileStreamer=c,a.StringStreamer=l,a.ReadableStreamStreamer=m,e.jQuery){var s=e.jQuery;s.fn.parse=function(n){var t=n.config||{},i=[];return this.each(function(n){if(!("INPUT"===s(this).prop("tagName").toUpperCase()&&"file"===s(this).attr("type").toLowerCase()&&e.FileReader)||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:s.extend({},t)})}),r(),this;function r(){if(0!==i.length){var e,t,r,u,d=i[0];if(x(n.before)){var c=n.before(d.file,d.inputElem);if("object"==typeof c){if("abort"===c.action)return e="AbortError",t=d.file,r=d.inputElem,u=c.reason,void(x(n.error)&&n.error({name:e},t,r,u));if("skip"===c.action)return void o();"object"==typeof c.config&&(d.instanceConfig=s.extend(d.instanceConfig,c.config))}else if("skip"===c)return void o()}var l=d.instanceConfig.complete;d.instanceConfig.complete=function(n){x(l)&&l(n,d.file,d.inputElem),o()},a.parse(d.file,d.instanceConfig)}else x(n.complete)&&n.complete()}function o(){i.splice(0,1),r()}}}function u(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var e=y(n);e.chunkSize=parseInt(e.chunkSize),n.step||n.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}).call(this,n),this.parseChunk=function(n,t){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(n);void 0!==r&&(n=r)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+n;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=s.meta.cursor;this._finished||(this._partialLine=o.substring(u-this._baseIndex),this._baseIndex=u),s&&s.data&&(this._rowCount+=s.data.length);var d=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)e.postMessage({results:s,workerId:a.WORKER_ID,finished:d});else if(x(this._config.chunk)&&!t){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!d||!x(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(n){x(this._config.error)?this._config.error(n):i&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:n,finished:!1})}}function d(n){var e;(n=n||{}).chunkSize||(n.chunkSize=a.RemoteChunkSize),u.call(this,n),this._nextChunk=t?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),t||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!t),this._config.downloadRequestHeaders){var n=this._config.downloadRequestHeaders;for(var i in n)e.setRequestHeader(i,n[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{e.send(this._config.downloadRequestBody)}catch(o){this._chunkError(o.message)}t&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){var n,t;4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(t=(n=e).getResponseHeader("Content-Range"))?-1:parseInt(t.substring(t.lastIndexOf("/")+1))),this.parseChunk(e.responseText)))},this._chunkError=function(n){var t=e.statusText||n;this._sendError(Error(t))}}function c(n){(n=n||{}).chunkSize||(n.chunkSize=a.LocalChunkSize),u.call(this,n);var e,t,i="undefined"!=typeof FileReader;this.stream=function(n){this._input=n,t=n.slice||n.webkitSlice||n.mozSlice,i?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);n=t.call(n,this._start,r)}var o=e.readAsText(n,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(e.error)}}function l(n){var e;u.call(this,n=n||{}),this.stream=function(n){return e=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n,t=this._config.chunkSize;return t?(n=e.substring(0,t),e=e.substring(t)):(n=e,e=""),this._finished=!e,this.parseChunk(n)}}}function m(n){u.call(this,n=n||{});var e=[],t=!0,i=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):t=!0},this._streamData=b(function(n){try{e.push("string"==typeof n?n:n.toString(this._config.encoding)),t&&(t=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(i){this._streamError(i)}},this),this._streamError=b(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=b(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(n){var e,t,i,r=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,o=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,s=this,u=0,d=0,c=!1,l=!1,m=[],p={data:[],errors:[],meta:{}};if(x(n.step)){var g=n.step;n.step=function(e){if(p=e,b())_();else{if(_(),0===p.data.length)return;u+=e.data.length,n.preview&&u>n.preview?t.abort():(p.data=p.data[0],g(p,s))}}}function v(e){return"greedy"===n.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function _(){if(p&&i&&(q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),i=!1),n.skipEmptyLines)for(var e=0;e<p.data.length;e++)v(p.data[e])&&p.data.splice(e--,1);return b()&&function(){if(p){if(Array.isArray(p.data[0])){for(var e=0;b()&&e<p.data.length;e++)p.data[e].forEach(t);p.data.splice(0,1)}else p.data.forEach(t)}function t(e,t){x(n.transformHeader)&&(e=n.transformHeader(e,t)),m.push(e)}}(),function(){if(!p||!n.header&&!n.dynamicTyping&&!n.transform)return p;function e(e,t){var i,r=n.header?{}:[];for(i=0;i<e.length;i++){var o=i,a=e[i];n.header&&(o=i>=m.length?"__parsed_extra":m[i]),n.transform&&(a=n.transform(a,o)),a=I(o,a),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(a)):r[o]=a}return n.header&&(i>m.length?q("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+i,d+t):i<m.length&&q("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+i,d+t)),r}var t=1;return!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(e),t=p.data.length):p.data=e(p.data,0),n.header&&p.meta&&(p.meta.fields=m),d+=t,p}()}function b(){return n.header&&0===m.length}function I(e,t){return n.dynamicTypingFunction&&void 0===n.dynamicTyping[e]&&(n.dynamicTyping[e]=n.dynamicTypingFunction(e)),!0===(n.dynamicTyping[e]||n.dynamicTyping)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&(!function(n){if(r.test(n)){var e=parseFloat(n);if(-9007199254740992<e&&e<9007199254740992)return!0}return!1}(t)?o.test(t)?new Date(t):""===t?null:t:parseFloat(t)):t}function q(n,e,t,i){var r={type:n,code:e,message:t};void 0!==i&&(r.row=i),p.errors.push(r)}this.parse=function(r,o,s){var u=n.quoteChar||'"';if(n.newline||(n.newline=function(n,e){n=n.substring(0,1048576);var t=RegExp(f(e)+"([^]*?)"+f(e),"gm"),i=(n=n.replace(t,"")).split("\r"),r=n.split("\n"),o=1<r.length&&r[0].length<i[0].length;if(1===i.length||o)return"\n";for(var a=0,s=0;s<i.length;s++)"\n"===i[s][0]&&a++;return a>=i.length/2?"\r\n":"\r"}(r,u)),i=!1,n.delimiter)x(n.delimiter)&&(n.delimiter=n.delimiter(r),p.meta.delimiter=n.delimiter);else{var d=function(e,t,i,r,o){var s,u,d,c;o=o||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var l=0;l<o.length;l++){var m=o[l],p=0,f=0,g=0;d=void 0;for(var _=new h({comments:r,delimiter:m,newline:t,preview:10}).parse(e),y=0;y<_.data.length;y++)if(i&&v(_.data[y]))g++;else{var b=_.data[y].length;f+=b,void 0!==d?0<b&&(p+=Math.abs(b-d),d=b):d=b}0<_.data.length&&(f/=_.data.length-g),(void 0===u||p<=u)&&(void 0===c||c<f)&&1.99<f&&(u=p,s=m,c=f)}return{successful:!!(n.delimiter=s),bestDelimiter:s}}(r,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess);d.successful?n.delimiter=d.bestDelimiter:(i=!0,n.delimiter=a.DefaultDelimiter),p.meta.delimiter=n.delimiter}var l=y(n);return n.preview&&n.header&&l.preview++,e=r,p=(t=new h(l)).parse(e,o,s),_(),c?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,t.abort(),e=x(n.chunk)?"":e.substring(t.getCharIndex())},this.resume=function(){s.streamer._halted?(c=!1,s.streamer.parseChunk(e,!0)):setTimeout(s.resume,3)},this.aborted=function(){return l},this.abort=function(){l=!0,t.abort(),p.meta.aborted=!0,x(n.complete)&&n.complete(p),e=""}}function f(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(n){var e,t=(n=n||{}).delimiter,i=n.newline,r=n.comments,o=n.step,s=n.preview,u=n.fastMode,d=e=void 0===n.quoteChar?'"':n.quoteChar;if(void 0!==n.escapeChar&&(d=n.escapeChar),("string"!=typeof t||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var c=0,l=!1;this.parse=function(n,a,m){if("string"!=typeof n)throw Error("Input must be a string");var p=n.length,h=t.length,g=i.length,v=r.length,_=x(o),y=[],b=[],I=[],q=c=0;if(!n)return U();if(u||!1!==u&&-1===n.indexOf(e)){for(var S=n.split(i),$=0;$<S.length;$++){if(c+=(I=S[$]).length,$!==S.length-1)c+=i.length;else if(m)break;if(!r||I.substring(0,v)!==r){if(_){if(y=[],M(I.split(t)),L(),l)return U()}else M(I.split(t));if(s&&s<=$)return y=y.slice(0,s),U(!0)}}return U()}for(var Z=n.indexOf(t,c),C=n.indexOf(i,c),j=RegExp(f(d)+f(e),"g"),k=n.indexOf(e,c);;)if(n[c]!==e){if(r&&0===I.length&&n.substring(c,c+v)===r){if(-1===C)return U();c=C+g,C=n.indexOf(i,c),Z=n.indexOf(t,c)}else{if(-1!==Z&&(Z<C||-1===C)){if(!(Z<k)){I.push(n.substring(c,Z)),c=Z+h,Z=n.indexOf(t,c);continue}var A=E(Z,k,C);if(A&&void 0!==A.nextDelim){Z=A.nextDelim,k=A.quoteSearch,I.push(n.substring(c,Z)),c=Z+h,Z=n.indexOf(t,c);continue}}if(-1===C)break;if(I.push(n.substring(c,C)),P(C+g),_&&(L(),l))return U();if(s&&y.length>=s)return U(!0)}}else for(k=c,c++;;){if(-1===(k=n.indexOf(e,k+1)))return m||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:c}),T();if(k===p-1)return T(n.substring(c,k).replace(j,e));if(e!==d||n[k+1]!==d){if(e===d||0===k||n[k-1]!==d){-1!==Z&&Z<k+1&&(Z=n.indexOf(t,k+1)),-1!==C&&C<k+1&&(C=n.indexOf(i,k+1));var w=D(-1===C?Z:Math.min(Z,C));if(n[k+1+w]===t){I.push(n.substring(c,k).replace(j,e)),n[c=k+1+w+h]!==e&&(k=n.indexOf(e,c)),Z=n.indexOf(t,c),C=n.indexOf(i,c);break}var R=D(C);if(n.substring(k+1+R,k+1+R+g)===i){if(I.push(n.substring(c,k).replace(j,e)),P(k+1+R+g),Z=n.indexOf(t,c),k=n.indexOf(e,c),_&&(L(),l))return U();if(s&&y.length>=s)return U(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:c}),k++}}else k++}return T();function M(n){y.push(n),q=c}function D(e){var t=0;if(-1!==e){var i=n.substring(k+1,e);i&&""===i.trim()&&(t=i.length)}return t}function T(e){return m||(void 0===e&&(e=n.substring(c)),I.push(e),c=p,M(I),_&&L()),U()}function P(e){c=e,M(I),I=[],C=n.indexOf(i,c)}function U(n){return{data:y,errors:b,meta:{delimiter:t,linebreak:i,aborted:l,truncated:!!n,cursor:q+(a||0)}}}function L(){o(U()),y=[],b=[]}function E(i,r,o){var a={nextDelim:void 0,quoteSearch:void 0},s=n.indexOf(e,r+1);if(r<i&&i<s&&(s<o||-1===o)){var u=n.indexOf(t,s);if(-1===u)return a;s<u&&(s=n.indexOf(e,s+1)),a=E(u,s,o)}else a={nextDelim:i,quoteSearch:r};return a}},this.abort=function(){l=!0},this.getCharIndex=function(){return c}}function g(n){var e=n.data,t=r[e.workerId],i=!1;if(e.error)t.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){i=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(x(t.userStep)){for(var a=0;a<e.results.data.length&&(t.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},o),!i);a++);delete e.results}else x(t.userChunk)&&(t.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!i&&v(e.workerId,e.results)}function v(n,e){var t=r[n];x(t.userComplete)&&t.userComplete(e),t.terminate(),delete r[n]}function _(){throw Error("Not implemented.")}function y(n){if("object"!=typeof n||null===n)return n;var e=Array.isArray(n)?[]:{};for(var t in n)e[t]=y(n[t]);return e}function b(n,e){return function(){n.apply(e,arguments)}}function x(n){return"function"==typeof n}return i&&(e.onmessage=function(n){var t=n.data;if(void 0===a.WORKER_ID&&t&&(a.WORKER_ID=t.workerId),"string"==typeof t.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(t.input,t.config),finished:!0});else if(e.File&&t.input instanceof File||t.input instanceof Object){var i=a.parse(t.input,t.config);i&&e.postMessage({workerId:a.WORKER_ID,results:i,finished:!0})}}),(d.prototype=Object.create(u.prototype)).constructor=d,(c.prototype=Object.create(u.prototype)).constructor=c,(l.prototype=Object.create(l.prototype)).constructor=l,(m.prototype=Object.create(u.prototype)).constructor=m,a},void 0!==(r=o.apply(e,[]))&&(n.exports=r)},83997:function(n,e,t){"use strict";t.d(e,{Z:function(){return r}});var i=t(71002);function r(n){var e=function(n,e){if("object"!=(0,i.Z)(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var r=t.call(n,e||"default");if("object"!=(0,i.Z)(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==(0,i.Z)(e)?e:e+""}},71002:function(n,e,t){"use strict";function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}t.d(e,{Z:function(){return i}})}},function(n){n.O(0,[3662,2283,212,8890,619,2583,4135,8579,6043,4244,3911,3776,1564,2329,778,4046,1023,7454,1870,8062,3754,4061,5497,8843,8849,8344,6096,9774,2888,179],function(){return n(n.s=56529)}),_N_E=n.O()}]);