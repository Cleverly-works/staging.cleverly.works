"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4779],{81261:function(e,t,n){var o=n(64836);t.Z=void 0;var a=o(n(64938)),r=n(85893);t.Z=(0,a.default)((0,r.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage")},29422:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(77349),a=n(11640),r=n(19013),c=n(13882),i=n(83946);function s(e,t){if((0,c.Z)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var n=t.years?(0,i.Z)(t.years):0,s=t.months?(0,i.Z)(t.months):0,l=t.weeks?(0,i.Z)(t.weeks):0,d=t.days?(0,i.Z)(t.days):0,u=t.hours?(0,i.Z)(t.hours):0,m=t.minutes?(0,i.Z)(t.minutes):0,h=t.seconds?(0,i.Z)(t.seconds):0,p=(0,r.Z)(e),v=s||n?(0,a.Z)(p,s+12*n):p,g=d||l?(0,o.Z)(v,d+7*l):v;return new Date(g.getTime()+1e3*(h+60*(m+60*u)))}},48580:function(e,t,n){n.d(t,{q:function(){return p}});var o=n(26042),a=n(69396),r=n(99534),c=n(85893),i=n(87918),s=n(98456),l=n(23776),d=n(50135),u=n(67294),m=n(45697),h=n.n(m),p=function(e){var t=e.loading,n=e.setSearch,m=e.textFieldProps,h=(0,r.Z)(e,["loading","setSearch","textFieldProps"]),p=(0,u.useState)(""),v=p[0],g=p[1];return(0,u.useEffect)(function(){var e=setTimeout(function(){n(v)},500);return function(){return clearTimeout(e)}},[v,n]),(0,c.jsx)(l.Z,(0,a.Z)((0,o.Z)({isOptionEqualToValue:function(e,t){return e.value===t.value}},h),{loading:t,onInputChange:function(e,t){g(t)},getOptionLabel:function(e){return e.label},renderTags:function(e,t){return e.map(function(e,n){return(0,c.jsx)(i.Z,(0,o.Z)({size:"small",label:e.label},t({index:n})))})},renderInput:function(e){return(0,c.jsx)(d.Z,(0,a.Z)((0,o.Z)({},e,m),{InputProps:(0,a.Z)((0,o.Z)({},e.InputProps,m.InputProps||{}),{endAdornment:(0,c.jsxs)(c.Fragment,{children:[t?(0,c.jsx)(s.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))};p.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}},p.propTypes={multiple:h().bool,limitTags:h().number,filterSelectedOptions:h().bool,color:h().string,loading:h().bool,value:h().oneOf([h().array,h().object]),onChange:h().func,options:h().arrayOf(h().shape({value:h().any.isRequired,label:h().string.isRequired})).isRequired,onOpen:h().func,setSearch:h().func,textFieldProps:h().shape({label:h().string,variant:h().oneOf(["standard"]),color:h().string,error:h().bool,helperText:h().string})}},24779:function(e,t,n){n.r(t),n.d(t,{default:function(){return e$}});var o=n(47568),a=n(14924),r=n(26042),c=n(69396),i=n(828),s=n(7297),l=n(97582),d=n(85893),u=n(67294),m=n(45697),h=n.n(m),p=n(66252),v=n(6388),g=n(50319),y=n(75063);function b(){var e=(0,s.Z)(["\n  query GetDashboard(\n    $accountId: Int\n    $adminId: Int\n    $timezone: String\n    $asAt: timestamptz\n    $monthStart: timestamptz\n    $dayStart: timestamptz\n    $userId: Int\n    $yearStart: timestamptz\n    $locationId: Int\n    $managerId: Int\n    $customerManagerId: Int\n  ) {\n    dashboardTilesData: getDashboard_HomeTiles(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n        customerManagerId: $customerManagerId\n      }\n    ) {\n      thresholdApprovals\n      outstandingInvoices\n      outstandingInvoicesValues\n      invoiceUnsent\n      reactiveJobsToday\n      plannedJobsToday\n      complianceJobToday\n      reportUnsent\n      liveP1Jobs\n      offeredJobs\n      quotesToday\n      quotesNotSent\n      quotesOverdue\n      quotesDueThisWeek\n      inprogressJobs\n      numberOfOpenJobs\n      jobsInDispute\n      worksValueMTD\n      worksValueYTD\n      overdueComplianceJobs\n      onHold\n      upliftRequested\n      ppmOverdue\n      reactiveOverdue\n      failedJobs\n      jobsWithTimeNotConfirmed\n      jobsRequiringExpenseAmount\n      imminentJobSlaBreaches\n      jobsWithTimeNotConfirmedCurrentMonth\n      jobsWithTimeNotConfirmedNext7days\n      openRemedialQuotes\n      openQuotes\n      imminentQuoteSlaBreaches\n      quoteSlaBreached\n      jobSlaBreachedOnSite\n      jobSlaBreachedJobReport\n    }\n    chartJobsPerDay: getDashboard_HomeTiles_Jobs_perDay(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n      }\n    ) {\n      jobsOnThisMonth\n    }\n    chartRevenuesPerDay: getDashboard_HomeTiles_Revenues_perDay(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n      }\n    ) {\n      revenuesOnThisMonth\n    }\n    chartRevenuesPerYear: getDashboard_HomeTiles_Revenues_perYear(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n      }\n    ) {\n      revenuesOnThisYear\n    }\n    chartTopCustomers: getDashboard_HomeTiles_Top_Customers_by_Spend(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      topCustomersBySpendOnThisYear\n    }\n    chartNotifications: getDashboard_HomeTiles_Notifications(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      notificationsLateArrivalToday\n      notificationsInvoiceNotSentToday\n      notificationsSupplierNotAssignedToday\n      notificationsLateArrivalOnThisWeek\n      notificationsInvoiceNotSentOnThisWeek\n      notificationsSupplierNotAssignedOnThisWeek\n      notificationsLateArrivalOnTwoWeeks\n      notificationsInvoiceNotSentOnTwoWeeks\n      notificationsSupplierNotAssignedOnTwoWeeks\n      notificationsLateArrivalOnThisMonth\n      notificationsInvoiceNotSentOnThisMonth\n      notificationsSupplierNotAssignedOnThisMonth\n    }\n  }\n"]);return b=function(){return e},e}function I(){var e=(0,s.Z)(["\n  query GetDashboard(\n    $accountId: Int\n    $adminId: Int\n    $asAt: timestamptz\n    $monthStart: timestamptz\n    $dayStart: timestamptz\n    $userId: Int\n    $yearStart: timestamptz\n    $locationId: Int\n    $managerId: Int\n  ) {\n    ",": getDashboard_HomeTiles_","(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n      }\n    ) {\n      sum\n    }\n  }\n"]);return I=function(){return e},e}function f(){var e=(0,s.Z)(["\n  query GetSuppliersLocation($where: UserLocation_bool_exp) {\n    suppliersLocation: UserLocation(distinct_on: userId, where: $where) {\n      id\n      geo\n      account: Account {\n        id\n        name\n      }\n      user: User {\n        id\n        fullName\n      }\n    }\n  }\n"]);return f=function(){return e},e}function w(){var e=(0,s.Z)(['\n  query GetJobsLocation($where: Job_bool_exp) {\n    jobsLocation: Job(where: $where, order_by: { createdAt: desc }) {\n      id\n      number\n      type\n      location: Location {\n        id\n        name\n        addresses: Addresses(\n          where: { registered: { _eq: true }, entity: { _eq: "Location" } }\n          order_by: { createdAt: desc }\n        ) {\n          address: Address {\n            addressLine1\n            addressLine2\n            addressLine3\n            postCode\n            name\n            geo\n          }\n        }\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n    }\n  }\n']);return w=function(){return e},e}function Z(){var e=(0,s.Z)(['\n  query getUser($id: Int) {\n    newUserDate: Account(where: { id: { _eq: $id } }) {\n      label: name\n      accountId: id\n      type\n      admin: Admins {\n        adminId: adminId\n        accountId\n      }\n      accountUsers: Account_Users(where: { role: { _eq: "owner" } }) {\n        role\n        user: User {\n          email\n          nameFirst\n          nameLast\n          userId: id\n        }\n      }\n    }\n  }\n']);return Z=function(){return e},e}function S(){var e=(0,s.Z)(['\n  query GetAccountsForSelect($type: String!, $q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      accountUsers: Account_Users(where: { role: { _eq: "owner" } }) {\n        id\n        role\n        user: User {\n          id\n        }\n      }\n    }\n  }\n']);return S=function(){return e},e}var k=(0,y.Ps)(b()),M=(0,y.Ps)(f()),j=(0,y.Ps)(w());(0,y.Ps)(Z());var x=(0,y.Ps)(S()),T=n(11163),C=n.n(T),N=n(83894),A=n(23855),D=n(43703),J=n(69119),$=n(38148),q=n(74975),B=n(10367),_=[{type:"tile",pinned:!0,colourConfig:{success:[0,15],danger:[16,30],warning:[30,null]},name:"reactiveJobsToday",greaterIsBetter:!0},{type:"tile",pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},name:"plannedJobsToday",greaterIsBetter:!0},{type:"tile",pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},name:"quotesToday",greaterIsBetter:!0},{type:"tile",pinned:!0,colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},name:"offeredJobs",greaterIsBetter:!0},{type:"chart",name:"chartJobMetrics"},{type:"mapChart",name:"mapChart"},{type:"chart",name:"numberOfNotifications"}],L=n(29815),O=n(7069),z=n(77349),P=n(29383),E=n(96486),R="/dashboard",W=function(e){var t,n,o,a,i,s,l,d,u,m,h=e.asAt,p=e.userTiles,v=e.dashboardTilesData,g=e.userId,y=e.locationId,b=e.managerId,I=e.customerManagerId,f=e.accountId,w=v||{},Z=w.thresholdApprovals,S=w.outstandingInvoices,k=w.outstandingInvoicesValues,M=w.invoiceUnsent,j=w.complianceJobToday,x=w.inprogressJobs,T=w.jobsInDispute,C=w.liveP1Jobs,N=w.numberOfOpenJobs,A=w.offeredJobs,D=w.onHold,J=w.overdueComplianceJobs,$=w.plannedJobsToday,B=w.ppmOverdue,_=w.quotesDueThisWeek,W=w.quotesNotSent,U=w.quotesOverdue,Q=w.quotesToday,F=w.reactiveJobsToday,V=w.reportUnsent,H=w.reactiveOverdue,Y=w.upliftRequested,G=w.worksValueMTD,K=w.worksValueYTD,X=w.jobsOnThisMonth,ee=w.revenuesOnThisMonth,et=w.revenuesOnThisYear,en=w.topCustomersBySpendOnThisYear,eo=w.notificationsLateArrivalToday,ea=w.notificationsInvoiceNotSentToday,er=w.notificationsSupplierNotAssignedToday,ec=w.notificationsLateArrivalOnThisWeek,ei=w.notificationsInvoiceNotSentOnThisWeek,es=w.notificationsSupplierNotAssignedOnThisWeek,el=w.notificationsLateArrivalOnTwoWeeks,ed=w.notificationsInvoiceNotSentOnTwoWeeks,eu=w.notificationsSupplierNotAssignedOnTwoWeeks,em=w.notificationsLateArrivalOnThisMonth,eh=w.notificationsInvoiceNotSentOnThisMonth,ep=w.notificationsSupplierNotAssignedOnThisMonth,ev=w.suppliersLocation,eg=w.jobsLocation,ey=w.failedJobs,eb=w.jobsWithTimeNotConfirmed,eI=w.jobsRequiringExpenseAmount,ef=w.imminentJobSlaBreaches,ew=w.jobsWithTimeNotConfirmedCurrentMonth,eZ=w.jobsWithTimeNotConfirmedNext7days,eS=w.openRemedialQuotes,ek=w.openQuotes,eM=w.imminentQuoteSlaBreaches,ej=w.quoteSlaBreached,ex=w.jobSlaBreachedOnSite,eT=w.jobSlaBreachedJobReport,eC=[],eN=[],eA=[],eD=[],eJ=[],e$=[],eq=[],eB=[],e_=[],eL=[];if(X&&X.length>0&&X.forEach(function(e,t){var n=e.date,o=e.ppmJobsOnThisMonth,a=e.reactiveJobsOnThisMonth,r=new Date(h),c=new Date(n);if(c>=(0,O.Z)(r,8)&&c<=(0,z.Z)(r,7)){if(X[t-1])for(var i=X[t-1].date,s=(0,P.Z)(c,new Date(i)),l=1;l<s;l++)eC.push({date:(0,O.Z)(c,l),values:[]}),eD.push({date:(0,O.Z)(c,l),values:[]});eC.push({date:c,values:o}),eD.push({date:c,values:a})}if(c>=(0,O.Z)(r,15)&&c<=(0,z.Z)(r,14)){if(X[t-1])for(var d=X[t-1].date,u=(0,P.Z)(c,new Date(d)),m=1;m<u;m++)eN.push({date:(0,O.Z)(c,m),values:[]}),eJ.push({date:(0,O.Z)(c,m),values:[]});eN.push({date:c,values:o}),eJ.push({date:c,values:a})}if(c>=(0,O.Z)(r,31)&&c<=(0,z.Z)(r,30)){if(X[t-1])for(var p=X[t-1].date,v=(0,P.Z)(c,new Date(p)),g=1;g<v;g++)eA.push({date:(0,O.Z)(c,g),values:[]}),e$.push({date:(0,O.Z)(c,g),values:[]});eA.push({date:c,values:o}),e$.push({date:c,values:a})}}),ee&&ee.length>0){var eO="dd/MM";ee.forEach(function(e,t){var n=e.date,o=e.revenuesOnThisDay,a=new Date(h),r=new Date(n);if(r>=(0,O.Z)(a,8)){if(ee[t-1])for(var c=ee[t-1].date,i=(0,P.Z)(new Date(c),r),s=1;s<i;s++)eq.push({date:(0,z.Z)(r,s),sum:[]});eq.push({date:r,sum:o,formatDate:eO})}if(r>=(0,O.Z)(a,15)){if(ee[t-1])for(var l=ee[t-1].date,d=(0,P.Z)(new Date(l),r),u=1;u<d;u++)eB.push({date:(0,z.Z)(r,u),sum:[]});eB.push({date:r,sum:o,formatDate:eO})}if(r>=(0,O.Z)(a,31)){if(ee[t-1])for(var m=ee[t-1].date,p=(0,P.Z)(new Date(m),r),v=1;v<p;v++)e_.push({date:(0,z.Z)(r,v),sum:[]});e_.push({date:r,sum:o,formatDate:eO})}})}et&&et.length>0&&et.forEach(function(e){var t=e.date,n=e.revenuesOnThisMonth;eL.push({date:t,sum:n,formatDate:"MM/yyyy"})});var ez=h?(0,q.Z)(h,"yyyy-MM-dd"):"",eP=[{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,15],danger:[16,30],warning:[30,null]},title:"Reactive jobs today",description:"Reactive jobs scheduled to happen today",name:"reactiveJobsToday",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=reactiveJobsToday").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==F?void 0:F.today)||0,week:(null==F?void 0:F.week)||0,month:(null==F?void 0:F.month)||0,threeMonth:(null==F?void 0:F.threeMonth)||0,year:(null==F?void 0:F.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"PPM jobs today",description:"Planned maintenance jobs scheduled to happen today",name:"plannedJobsToday",to:"".concat(R,"/issues?type=ppm&asAt=").concat(ez,"&tileName=plannedJobsToday").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==$?void 0:$.today)||0,week:(null==$?void 0:$.week)||0,month:(null==$?void 0:$.month)||0,threeMonth:(null==$?void 0:$.threeMonth)||0,year:(null==$?void 0:$.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Quotes today",description:"Quotes where due date is today",name:"quotesToday",to:"".concat(R,"/quotes?asAt=").concat(ez,"&tileName=quotesToday").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==Q?void 0:Q.today)||0,week:(null==Q?void 0:Q.week)||0,month:(null==Q?void 0:Q.month)||0,threeMonth:(null==Q?void 0:Q.threeMonth)||0,year:(null==Q?void 0:Q.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Unassigned jobs",description:"Reactive jobs that have been sent to supplier(s) but not yet accepted",name:"offeredJobs",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=offeredJobs").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==A?void 0:A.today)||0,week:(null==A?void 0:A.week)||0,month:(null==A?void 0:A.month)||0,threeMonth:(null==A?void 0:A.threeMonth)||0,year:(null==A?void 0:A.year)||0},greaterIsBetter:!0},{type:"chart",size:[2,1],title:"Jobs metrics",name:"chartJobMetrics",values:{week:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(t=(0,E.orderBy)(eC,"date","asc"))&&void 0!==t?t:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(n=(0,E.orderBy)(eD,"date","asc"))&&void 0!==n?n:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(o=(0,E.orderBy)(eq,"date","asc"))&&void 0!==o?o:[]}]}],twoWeeks:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(a=(0,E.orderBy)(eN,"date","asc"))&&void 0!==a?a:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(i=(0,E.orderBy)(eJ,"date","asc"))&&void 0!==i?i:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(s=(0,E.orderBy)(eB,"date","asc"))&&void 0!==s?s:[]}]}],month:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(l=(0,E.orderBy)(eA,"date","asc"))&&void 0!==l?l:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(d=(0,E.orderBy)(e$,"date","asc"))&&void 0!==d?d:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(u=(0,E.orderBy)(e_,"date","asc"))&&void 0!==u?u:[]}]}],year:[{groupLabel:"Monthly job revenue",groupName:"revenuesPerYear",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(m=(0,E.orderBy)(eL,"date","asc"))&&void 0!==m?m:[]}]},{groupLabel:"Top customers by spend",groupName:"customersBySpend",groupDescription:"Top 10 customers by spend over last 12 months",chartData:[{label:"Top customers by spend",color:"#1E88E5",data:null!=en?en:[]}]}]}},{type:"mapChart",size:[2,1],title:"Geolocation info",name:"mapChart",values:{month:[{groupLabel:"Last supplier location",groupName:"suppliersLocation",groupDescription:"Last supplier location",chartData:[{label:"Last supplier location",markerIcon:"supplier",data:(null==ev?void 0:ev.month)||[]}]},{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==eg?void 0:eg.month)||[]}]}],threeMonth:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==eg?void 0:eg.threeMonth)||[]}]}],tomorrow:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==eg?void 0:eg.tomorrow)||[]}]}],today:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==eg?void 0:eg.today)||[]}]}],nextWeek:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==eg?void 0:eg.nextWeek)||[]}]}],nextTwoWeeks:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==eg?void 0:eg.nextTwoWeeks)||[]}]}],nextMonth:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==eg?void 0:eg.nextMonth)||[]}]}],week:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==eg?void 0:eg.week)||[]}]}]}},{type:"chart",size:[2,1],title:"Notifications",name:"numberOfNotifications",values:{today:[{groupLabel:"Notifications",groupName:"notifications",chartData:[{label:"Late Arrival",color:"#1E88E5",data:[null!=eo?eo:0]},{label:"Invoice not sent",color:"#1565C0",data:[null!=ea?ea:0]},{label:"Supplier not assigned",color:"#E0E0E0",data:[null!=er?er:0]}]}],week:[{groupLabel:"Notifications",groupName:"notifications",chartData:[{label:"Late Arrival",color:"#1E88E5",data:[null!=ec?ec:0]},{label:"Invoice not sent",color:"#1565C0",data:[null!=ei?ei:0]},{label:"Supplier not assigned",color:"#E0E0E0",data:[null!=es?es:0]}]}],twoWeeks:[{groupLabel:"Notifications",groupName:"notifications",chartData:[{label:"Late Arrival",color:"#1E88E5",data:[null!=el?el:0]},{label:"Invoice not sent",color:"#1565C0",data:[null!=ed?ed:0]},{label:"Supplier not assigned",color:"#E0E0E0",data:[null!=eu?eu:0]}]}],month:[{groupLabel:"Notifications",groupName:"notifications",chartData:[{label:"Late Arrival",color:"#1E88E5",data:[null!=em?em:0]},{label:"Invoice not sent",color:"#1565C0",data:[null!=eh?eh:0]},{label:"Supplier not assigned",color:"#E0E0E0",data:[null!=ep?ep:0]}]}]}},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Live P1 jobs",description:"Jobs with P1 status scheduled for today but not completed",name:"liveP1Jobs",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=liveP1Jobs").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==C?void 0:C.today)||0,week:(null==C?void 0:C.week)||0,month:(null==C?void 0:C.month)||0,threeMonth:(null==C?void 0:C.threeMonth)||0,year:(null==C?void 0:C.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Quotes not sent",description:"Quotes that have been submitted but not sent",name:"quotesNotSent",to:"".concat(R,"/quotes?asAt=").concat(ez,"&tileName=quotesNotSent").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==W?void 0:W.today)||0,week:(null==W?void 0:W.week)||0,month:(null==W?void 0:W.month)||0,threeMonth:(null==W?void 0:W.threeMonth)||0,year:(null==W?void 0:W.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Overdue reactive jobs",description:"Reactive jobs that have not yet been started or completed 24 hours after scheduled time.",name:"reactiveOverdue",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=reactiveOverdue").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==H?void 0:H.today)||0,week:(null==H?void 0:H.week)||0,month:(null==H?void 0:H.month)||0,threeMonth:(null==H?void 0:H.threeMonth)||0,year:(null==H?void 0:H.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Quotes overdue",description:"Quotes which are past due date but have not had resolution.",name:"quotesOverdue",to:"".concat(R,"/quotes?asAt=").concat(ez,"&tileName=quotesOverdue").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==U?void 0:U.today)||0,week:(null==U?void 0:U.week)||0,month:(null==U?void 0:U.month)||0,threeMonth:(null==U?void 0:U.threeMonth)||0,year:(null==U?void 0:U.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Overdue PPM",description:"Planned maintenance jobs that have not yet been started or completed 24 hours after scheduled time",name:"ppmOverdue",to:"".concat(R,"/issues?type=ppm&asAt=").concat(ez,"&tileName=ppmOverdue").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==B?void 0:B.today)||0,week:(null==B?void 0:B.week)||0,month:(null==B?void 0:B.month)||0,threeMonth:(null==B?void 0:B.threeMonth)||0,year:(null==B?void 0:B.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Compliance jobs today",description:"Compliance work orders that are scheduled to take place today",name:"complianceJobToday",to:"".concat(R,"/issues?type=cppm&asAt=").concat(ez,"&tileName=complianceJobToday").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==j?void 0:j.today)||0,week:(null==j?void 0:j.week)||0,month:(null==j?void 0:j.month)||0,threeMonth:(null==j?void 0:j.threeMonth)||0,year:(null==j?void 0:j.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Overdue compliance jobs",description:"Compliance jobs that have not yet been started or completed 24 hours after scheduled time",name:"overdueComplianceJobs",to:"".concat(R,"/issues?type=cppm&asAt=").concat(ez,"&tileName=overdueComplianceJobs").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==J?void 0:J.today)||0,week:(null==J?void 0:J.week)||0,month:(null==J?void 0:J.month)||0,threeMonth:(null==J?void 0:J.threeMonth)||0,year:(null==J?void 0:J.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Number of open jobs",description:"Jobs scheduled for a date prior to today but where job has not been closed",name:"numberOfOpenJobs",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=numberOfOpenJobs").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==N?void 0:N.today)||0,week:(null==N?void 0:N.week)||0,month:(null==N?void 0:N.month)||0,threeMonth:(null==N?void 0:N.threeMonth)||0,year:(null==N?void 0:N.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,20],danger:[21,40],warning:[41,null]},title:"Jobs in progress",description:"Jobs currently in progress",name:"inprogressJobs",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=inprogressJobs").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==x?void 0:x.today)||0,week:(null==x?void 0:x.week)||0,month:(null==x?void 0:x.month)||0,threeMonth:(null==x?void 0:x.threeMonth)||0,year:(null==x?void 0:x.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Reports unsent",description:"Jobs that have been completed but where a report has not been sent within 24 hours",name:"reportUnsent",to:"".concat(R,"/issues?type=all&asAt=").concat(ez,"&tileName=reportUnsent").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==V?void 0:V.today)||0,week:(null==V?void 0:V.week)||0,month:(null==V?void 0:V.month)||0,threeMonth:(null==V?void 0:V.threeMonth)||0,year:(null==V?void 0:V.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Jobs on hold",description:"Jobs currently marked as on hold",name:"onHold",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=onHold").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==D?void 0:D.today)||0,week:(null==D?void 0:D.week)||0,month:(null==D?void 0:D.month)||0,threeMonth:(null==D?void 0:D.threeMonth)||0,year:(null==D?void 0:D.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,14],danger:[15,15],warning:[16,null]},title:"Jobs in dispute",description:"Jobs currently marked as in dispute",name:"jobsInDispute",to:"".concat(R,"/issues?type=all&asAt=").concat(ez,"&tileName=jobsInDispute").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==T?void 0:T.today)||0,week:(null==T?void 0:T.week)||0,month:(null==T?void 0:T.month)||0,threeMonth:(null==T?void 0:T.threeMonth)||0,year:(null==T?void 0:T.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Uplift requests",description:"Jobs where an uplift has been requested but not yet approved or rejected",name:"upliftRequested",to:"".concat(R,"/issues?type=all&asAt=").concat(ez,"&tileName=upliftRequested").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==Y?void 0:Y.today)||0,week:(null==Y?void 0:Y.week)||0,month:(null==Y?void 0:Y.month)||0,threeMonth:(null==Y?void 0:Y.threeMonth)||0,year:(null==Y?void 0:Y.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Invoice not sent",description:"Jobs where report has been sent but job has not yet been invoiced",name:"invoiceUnsent",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=invoiceUnsent").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==M?void 0:M.today)||0,week:(null==M?void 0:M.week)||0,month:(null==M?void 0:M.month)||0,threeMonth:(null==M?void 0:M.threeMonth)||0,year:(null==M?void 0:M.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Work order value (MTD)",description:"Value of jobs completed in the month to date",name:"worksValueMTD",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=worksValueMTD").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==G?void 0:G.today)||0,week:(null==G?void 0:G.week)||0,month:(null==G?void 0:G.month)||0,threeMonth:(null==G?void 0:G.threeMonth)||0,year:(null==G?void 0:G.year)||0},greaterIsBetter:!0,valueType:"price"},{type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Work order value (YTD)",description:"Value of jobs completed in the year to date",name:"worksValueYTD",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=worksValueYTD").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==K?void 0:K.today)||0,week:(null==K?void 0:K.week)||0,month:(null==K?void 0:K.month)||0,threeMonth:(null==K?void 0:K.threeMonth)||0,year:(null==K?void 0:K.year)||0},greaterIsBetter:!0,valueType:"price"},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Quotes due this week",description:"Quotes where due date is within next 7 days",name:"quotesDueThisWeek",to:"".concat(R,"/quotes?asAt=").concat(ez,"&tileName=quotesDueThisWeek").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==_?void 0:_.today)||0,week:(null==_?void 0:_.week)||0,month:(null==_?void 0:_.month)||0,threeMonth:(null==_?void 0:_.threeMonth)||0,year:(null==_?void 0:_.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Number of outstanding invoices",description:"The number of invoices that have been sent to customers but not reconciled",name:"outstandingInvoices",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=outstandingInvoices").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==S?void 0:S.today)||0,week:(null==S?void 0:S.week)||0,month:(null==S?void 0:S.month)||0,threeMonth:(null==S?void 0:S.threeMonth)||0,year:(null==S?void 0:S.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Value of outstanding invoices",description:"The value of invoices that have been sent to customers but not reconciled",name:"outstandingInvoicesValues",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=outstandingInvoices").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==k?void 0:k.today)||0,week:(null==k?void 0:k.week)||0,month:(null==k?void 0:k.month)||0,threeMonth:(null==k?void 0:k.threeMonth)||0,year:(null==k?void 0:k.year)||0},greaterIsBetter:!0,valueType:"price"},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Threshold approvals outstanding",description:"Work orders and quotes where approval is required based on threshold levels",name:"thresholdApprovals",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=thresholdApprovals").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==Z?void 0:Z.today)||0,week:(null==Z?void 0:Z.week)||0,month:(null==Z?void 0:Z.month)||0,threeMonth:(null==Z?void 0:Z.threeMonth)||0,year:(null==Z?void 0:Z.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Failed jobs",description:"Jobs where supplier has reported failures and these have not been resolved.",name:"failedJobs",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=failedJobs").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==ey?void 0:ey.today)||0,week:(null==ey?void 0:ey.week)||0,month:(null==ey?void 0:ey.month)||0,threeMonth:(null==ey?void 0:ey.threeMonth)||0,year:(null==ey?void 0:ey.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed",description:"Scheduled jobs where an attendance time has not been specified by supplier.",name:"jobsWithTimeNotConfirmed",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=jobsWithTimeNotConfirmed").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==eb?void 0:eb.today)||0,week:(null==eb?void 0:eb.week)||0,month:(null==eb?void 0:eb.month)||0,threeMonth:(null==eb?void 0:eb.threeMonth)||0,year:(null==eb?void 0:eb.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs requiring expense amounts",description:"Jobs where expenses have amount expense pending.",name:"jobsRequiringExpenseAmount",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=jobsRequiringExpenseAmount").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==eI?void 0:eI.today)||0,week:(null==eI?void 0:eI.week)||0,month:(null==eI?void 0:eI.month)||0,threeMonth:(null==eI?void 0:eI.threeMonth)||0,year:(null==eI?void 0:eI.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Imminent job SLA breaches",description:"These are jobs where there is a potential SLA breach in 1 hour or less.",name:"imminentJobSlaBreaches",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=imminentJobSlaBreaches").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==ef?void 0:ef.today)||0,week:(null==ef?void 0:ef.week)||0,month:(null==ef?void 0:ef.month)||0,threeMonth:(null==ef?void 0:ef.threeMonth)||0,year:(null==ef?void 0:ef.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed.",subtitle:"Current month",description:"Scheduled jobs that are due to be completed in the current calendar month but where no attendance time has been specified by the supplier.",name:"jobsWithTimeNotConfirmedCurrentMonth",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=jobsWithTimeNotConfirmedCurrentMonth").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==ew?void 0:ew.today)||0,week:(null==ew?void 0:ew.week)||0,month:(null==ew?void 0:ew.month)||0,threeMonth:(null==ew?void 0:ew.threeMonth)||0,year:(null==ew?void 0:ew.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed.",subtitle:"Next 7 days",description:"Scheduled jobs that are due to be completed within the next 7 days but where no attendance time has been specified by the supplier.",name:"jobsWithTimeNotConfirmedNext7days",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=jobsWithTimeNotConfirmedNext7days").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==eZ?void 0:eZ.today)||0,week:(null==eZ?void 0:eZ.week)||0,month:(null==eZ?void 0:eZ.month)||0,threeMonth:(null==eZ?void 0:eZ.threeMonth)||0,year:(null==eZ?void 0:eZ.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Open remedial quotes",description:"These are remedial quotes that have not yet been resolved - for example, accepted or rejected by the customer or closed.",name:"openRemedialQuotes",to:"".concat(R,"/quotes?asAt=").concat(ez,"&tileName=openRemedialQuotes").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==eS?void 0:eS.today)||0,week:(null==eS?void 0:eS.week)||0,month:(null==eS?void 0:eS.month)||0,threeMonth:(null==eS?void 0:eS.threeMonth)||0,year:(null==eS?void 0:eS.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Open quotes",description:"These are quotes that have not yet been resolved - for example, accepted or rejected by the customer or closed.",name:"openQuotes",to:"".concat(R,"/quotes?asAt=").concat(ez,"&tileName=openQuotes").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==ek?void 0:ek.today)||0,week:(null==ek?void 0:ek.week)||0,month:(null==ek?void 0:ek.month)||0,threeMonth:(null==ek?void 0:ek.threeMonth)||0,year:(null==ek?void 0:ek.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Imminent quote SLA breaches",description:"These are quotes where there is a potential SLA breach in 1 day or less.",name:"imminentQuoteSlaBreaches",to:"".concat(R,"/quotes?asAt=").concat(ez,"&tileName=imminentQuoteSlaBreaches").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==eM?void 0:eM.today)||0,week:(null==eM?void 0:eM.week)||0,month:(null==eM?void 0:eM.month)||0,threeMonth:(null==eM?void 0:eM.threeMonth)||0,year:(null==eM?void 0:eM.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Quotes - Quote return time",description:"These are quotes where the SLA was not returned within the relevant timeframe.",name:"quoteSlaBreached",to:"".concat(R,"/quotes?asAt=").concat(ez,"&tileName=quoteSlaBreached").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==ej?void 0:ej.today)||0,week:(null==ej?void 0:ej.week)||0,month:(null==ej?void 0:ej.month)||0,threeMonth:(null==ej?void 0:ej.threeMonth)||0,year:(null==ej?void 0:ej.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Work orders - On site time",description:"These are jobs where the time taken for the engineer / operative to arrive on site was beyond the relevant SL.A. ",name:"jobSlaBreachedOnSite",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=jobSlaBreachedOnSite").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==ex?void 0:ex.today)||0,week:(null==ex?void 0:ex.week)||0,month:(null==ex?void 0:ex.month)||0,threeMonth:(null==ex?void 0:ex.threeMonth)||0,year:(null==ex?void 0:ex.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Work orders - Report submission time",description:"These are jobs where the time taken to submit the report to the customer was more than the relevant SL.A.",name:"jobSlaBreachedJobReport",to:"".concat(R,"/issues?asAt=").concat(ez,"&tileName=jobSlaBreachedJobReport").concat(g?"&userId=".concat(g):"").concat(b?"&managerId=".concat(b):"").concat(I?"&customerManagerId=".concat(I):"").concat(y?"&locationId=".concat(y):"").concat(f?"&accountId=".concat(f):""),values:{today:(null==eT?void 0:eT.today)||0,week:(null==eT?void 0:eT.week)||0,month:(null==eT?void 0:eT.month)||0,threeMonth:(null==eT?void 0:eT.threeMonth)||0,year:(null==eT?void 0:eT.year)||0},greaterIsBetter:!0}],eE=eP.map(function(e){return e.name}),eR={success:[0,10],danger:[11,20],warning:[21,null]},eW=p.reduce(function(e,t){var n,o=t.colourConfig,a=t.pinned,i=t.greaterIsBetter,s=t.name,l=eP.find(function(e){return e.name===s});return l?(0,L.Z)(e).concat([(0,c.Z)((0,r.Z)({},l),{pinned:null!==(n=null!=a?a:l.pinned)&&void 0!==n&&n,colourConfig:void 0===o?eR:o,greaterIsBetter:void 0===i||i})]):e},[]).sort(function(e,t){return eE.indexOf(e)-eE.indexOf(t)});return{fullTilesList:eP,userTilesList:eW}},U=n(5616),Q=n(11057),F=n(87918),V=n(98456),H=n(86886),Y=n(51233),G=n(5339),K=n(98572),X=n(67868),ee=n(83537),et=n(6425),en=n(75327),eo=n(29422),ea=n(30734),er=function(e){var t=e.groupName,n=e.time,o=e.asAt,a=null,r={};switch(t){case"jobsLocation":a=j;break;case"suppliersLocation":a=M}if("jobsLocation"===t)switch(r.Location={Addresses:{registered:{_eq:!0},entity:{_eq:"Location"},Address:{geo:{_is_null:!1}}}},n){case"today":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,J.Z)(o)}}];break;case"tomorrow":r._and=[{timingStart:{_lte:(0,eo.Z)(o,{days:1})}},{timingStart:{_gte:(0,eo.Z)((0,J.Z)(o),{days:1})}}];break;case"nextWeek":r._and=[{timingStart:{_lte:(0,eo.Z)(o,{weeks:1})}},{timingStart:{_gte:(0,eo.Z)((0,J.Z)(o),{days:1})}}];break;case"nextTwoWeeks":r._and=[{timingStart:{_lte:(0,eo.Z)(o,{weeks:2})}},{timingStart:{_gte:(0,eo.Z)((0,J.Z)(o),{days:1})}}];break;case"nextMonth":r._and=[{timingStart:{_lte:(0,eo.Z)(o,{months:1})}},{timingStart:{_gte:(0,eo.Z)((0,J.Z)(o),{days:1})}}];break;case"week":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,ea.Z)(o,{weeks:1})}}];break;case"month":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,ea.Z)(o,{months:1})}}];break;case"threeMonth":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,ea.Z)(o,{months:3})}}]}else r.geo={_is_null:!1},"month"===n&&(r._and=[{createdAt:{_lte:o}},{createdAt:{_gte:(0,ea.Z)(o,{months:1})}}]);return{query:a,variables:{where:r}}},ec=function(e){var t=e.state,n=e.data,o=e.groupName,i=e.time,s={};if("suppliersLocation"===o)s=(0,c.Z)((0,r.Z)({},t[o]||{}),(0,a.Z)({},i,n[o].map(function(e){var t,n,o,a=e.id,r=e.geo;return{id:a,account:e.account,user:e.user,position:{lat:null===(t=r.coordinates)||void 0===t?void 0:t[1],lng:null===(n=r.coordinates)||void 0===n?void 0:n[0]}}})));else{var l=n[o].map(function(e){var t,n,o,a,r,c=e.id,i=e.number,s=e.type,l=e.location;return{id:c,number:i,type:s,location:l,supplier:e.supplier,service:e.service,position:{lat:null===(t=l.addresses[0].address.geo)||void 0===t?void 0:null===(n=t.coordinates)||void 0===n?void 0:n[1],lng:null===(o=l.addresses[0].address.geo)||void 0===o?void 0:null===(a=o.coordinates)||void 0===a?void 0:a[0]}}});s=(0,c.Z)((0,r.Z)({},t[o]||{}),(0,a.Z)({},i,l))}return s},ei=function(e){var t=e.prevData,n=e.data,o=e.type;return Object.keys(n).reduce(function(e,i){return(0,c.Z)((0,r.Z)({},e),(0,a.Z)({},i,(0,c.Z)((0,r.Z)({},(null==t?void 0:t[i])||{}),(0,a.Z)({},o,n[i]))))},{})},es=function(e){var t,n=e.name,o=e.asAt,a=e.userId,r=e.adminId,c=e.time,i=e.locationId,s=e.managerId,l=(0,y.Ps)(I(),n,n),d=null;switch(c){case"week":d=(0,ea.Z)(o,{weeks:1});break;case"month":d=(0,ea.Z)(o,{months:1});break;case"threeMonth":d=(0,ea.Z)(o,{months:3});break;case"year":d=(0,ea.Z)(o,{years:1})}return{query:l,variables:{adminId:r,asAt:d,dayStart:(0,J.Z)(d),monthStart:(0,D.Z)(d),userId:a,yearStart:(0,$.Z)(d),locationId:i,managerId:s}}},el=n(81261),ed=n(69368),eu=n(50480),em=n(11994),eh=n(90629),ep=n(61730),ev=n(2845),eg=n(42283),ey=n(4972),eb=n(10166),eI=n(48580),ef=function(e){var t=e.open,n=e.setOpen,o=e.initialFilters,a=e.filters,r=e.setFilters,c=(0,ep.Z)("(max-width: 400px)")?4:0,i=(0,ev.x)().user,s=(0,eg.cI)({defaultValues:a||o}),l=s.control,m=s.handleSubmit,h=s.reset,p=(0,s.watch)(),g=(0,u.useState)(""),y=g[0],b=g[1],I=(0,u.useState)(""),f=I[0],w=I[1],Z=(0,u.useState)(""),S=Z[0],k=Z[1],M=(0,u.useState)(""),j=M[0],T=M[1],C=(0,v.aM)(x,{variables:{type:"customer",q:""!==y?"%".concat(y,"%"):null,limit:50,offset:0}}),N=C.loading,A=C.data,D=(void 0===A?{items:[]}:A).items,J=(0,v.aM)(ey._d,{variables:{where:{name:{_ilike:""!==S?"%".concat(S,"%"):null},status:{_eq:"active"}},limit:50,offset:0}}),$=J.loading,q=J.data,B=(void 0===q?{items:[]}:q).items,_=(0,v.aM)(x,{variables:{type:"supplier",q:""!==f?"%".concat(f,"%"):null,limit:50,offset:0}}),L=_.loading,O=_.data,z=(void 0===O?{items:[]}:O).items,P=(0,v.aM)(ey.K4,{variables:{accountId:i.accountId,limit:50,offset:0,q:""!==j?"%".concat(j,"%"):null}}),E=P.data,R=(void 0===E?{items:[]}:E).items,W=P.loading,U=function(e){try{var t={customer:e.customer,location:e.location,manager:e.manager?{value:i.id,label:i.fullName}:null,supplier:e.supplier,customerManager:e.customerManager};r(t)}finally{n(!1)}},F=function(){r(o),h(o),n(!1)};return(0,d.jsx)(ew,{keepMounted:!0,open:t,onClose:function(){return n(!1)},children:(0,d.jsx)("form",{onSubmit:m(U),children:(0,d.jsx)(eZ,{children:(0,d.jsxs)(H.ZP,{container:!0,rowGap:4,children:[(0,d.jsx)(H.ZP,{container:!0,children:(0,d.jsx)(H.ZP,{item:!0,xs:12,children:(0,d.jsx)(eg.Qr,{fullWidth:!0,name:"customer",control:l,render:function(e){var t=e.value,n=e.onChange;return(0,d.jsx)(eI.q,{disabled:p.supplier||p.location,value:t,onChange:function(e,t){return n(t)},loading:N,options:D,setSearch:b,textFieldProps:{color:"secondary",variant:"standard",label:"Select customer"}})}})})}),(0,d.jsxs)(H.ZP,{container:!0,columnSpacing:4,rowGap:c,children:[(0,d.jsx)(H.ZP,{item:!0,xs:12,xs2:6,children:(0,d.jsx)(eg.Qr,{name:"location",control:l,render:function(e){var t=e.value,n=e.onChange;return(0,d.jsx)(eI.q,{disabled:p.supplier||p.customer,value:t,onChange:function(e,t){return n(t)},loading:$,options:B,setSearch:k,textFieldProps:{color:"secondary",variant:"standard",label:"Select location"}})}})}),(0,d.jsx)(H.ZP,{item:!0,xs:12,xs2:6,children:(0,d.jsx)(eg.Qr,{name:"supplier",control:l,render:function(e){var t=e.value,n=e.onChange;return(0,d.jsx)(eI.q,{disabled:p.location||p.customer,value:t,onChange:function(e,t){return n(t)},loading:L,options:z,setSearch:w,textFieldProps:{color:"secondary",variant:"standard",label:"Select supplier"}})}})})]}),(0,d.jsx)(H.ZP,{container:!0,columnSpacing:4,rowGap:c,children:(0,d.jsx)(H.ZP,{item:!0,xs:12,sm:6,children:(0,d.jsx)(eg.Qr,{name:"customerManager",control:l,render:function(e){var t=e.value,n=e.onChange;return(0,d.jsx)(eI.q,{value:t,onChange:function(e,t){return n(t)},loading:W,options:R,setSearch:T,textFieldProps:{color:"secondary",variant:"standard",label:"Select account manager"}})}})})}),(0,d.jsx)(H.ZP,{container:!0,rowGap:c,children:(0,d.jsx)(H.ZP,{item:!0,xs:12,children:(0,d.jsx)(eg.Qr,{name:"manager",control:l,render:function(e){var t=e.value,n=e.onChange;return(0,d.jsx)(eu.Z,{control:(0,d.jsx)(ed.Z,{color:"secondary",checked:t,onChange:function(e){return n(e.target.checked)}}),label:"Assigned to me"})}})})}),(0,d.jsx)(H.ZP,{container:!0,item:!0,xs:12,children:(0,d.jsxs)(Y.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,d.jsx)(Q.Z,{variant:"contained",color:"danger",onClick:function(){return F()},children:"Cancel"}),(0,d.jsx)(Q.Z,{variant:"contained",color:"secondary",type:"submit",children:"Submit"})]})})]})})})})};ef.defaultProps={open:!1,setOpen:function(){},initialFilters:{},filters:{},setFilters:function(){}},ef.propTypes={open:h().bool,setOpen:h().func,initialFilters:h().object,filters:h().object,setFilters:h().func};var ew=(0,eb.Z)(em.Z)(function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}),eZ=(0,eb.Z)(eh.Z)(function(){return{padding:"24px",maxWidth:"700px",maxHeight:"100vh",overflowY:"scroll"}});function eS(){var e=(0,s.Z)(["\n  width: 100%;\n  height: 100%;\n\n  .firstBlock {\n    margin: 0;\n    flex-basis: 50% !important;\n    max-width: 50% !important;\n    min-width: auto;\n  }\n\n  .firstBlockItem {\n    padding-left: 24px;\n    padding-top: 24px;\n  }\n\n  .bigTile {\n    flex-basis: 50% !important;\n    max-width: 50%;\n  }\n\n  .secondBlock {\n    margin: 0;\n    flex-basis: 50% !important;\n    min-width: auto;\n  }\n\n  .secondBlockItem {\n    flex-basis: 50% !important;\n    max-width: 50% !important;\n    padding-left: 24px;\n    padding-top: 24px;\n  }\n\n  @media (max-width: 1550px) {\n    .firstBlock {\n      margin: 0;\n      flex-basis: 100% !important;\n      max-width: 100% !important;\n    }\n\n    .bigTile {\n      flex-basis: 100% !important;\n      max-width: 100%;\n    }\n  }\n"]);return eS=function(){return e},e}function ek(){var e=(0,s.Z)(["\n  align-content: flex-start;\n  height: auto;\n  min-height: 400px;\n  justify-content: space-between;\n"]);return ek=function(){return e},e}function eM(){var e=(0,s.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n\n  min-width: 824px;\n\n  justify-content: space-between;\n  align-content: space-between;\n"]);return eM=function(){return e},e}function ej(){var e=(0,s.Z)(["\n  justify-content: space-between;\n"]);return ej=function(){return e},e}var ex=(0,N.Z)(new Date),eT={customer:null,location:null,supplier:null,manager:null,customerManager:null},eC=function(e){var t,n,s,m,h,y,b,I,f,w,Z,S,M,j,x,B,L,O=e.user,z=(0,T.useRouter)(),P=(0,p.x)(),E=(0,u.useState)(!1),R=E[0],eo=E[1],ea=(0,u.useState)({}),ed=ea[0],eu=ea[1],em=(0,u.useState)(_),eh=em[0],ep=em[1],ev=(0,u.useState)([]),eg=ev[0],ey=ev[1],eb=(0,u.useState)([]),eI=eb[0],ew=eb[1],eZ=(0,u.useState)(!1),eS=eZ[0],ek=eZ[1],eM=(0,u.useState)((0,r.Z)({},eT)),ej=eM[0],eC=eM[1],e$=(0,u.useCallback)(function(e,t){return"".concat({customer:"Customer is",location:"Location is",supplier:"Supplier is",manager:"Assign to",customerManager:"Account manager is"}[t]," ").concat(e[t].label," ")},[]),eq=function(){eC(eT)},eB=(0,u.useState)(z.query.asAt?(0,N.Z)((0,A.Z)(z.query.asAt)):ex)[0],e_=(0,u.useState)({monthStart:(0,D.Z)(eB),todayEnd:(0,N.Z)(eB),todayStart:(0,J.Z)(eB),yearStart:(0,$.Z)(eB)})[0],eL=(0,u.useState)(z.query.userId?z.query.userId:O.id)[0];(0,u.useEffect)(function(){"/dashboard"===C().pathname&&C().push({pathname:"/dashboard",query:(0,c.Z)((0,r.Z)({},z.query),{asAt:(0,q.Z)(eB,"yyyy-MM-dd"),userId:eL})})},[eB,z.query,eL]);var eO=(0,v.aM)(en.iM,{variables:{userId:(null===(t=ej.customer)||void 0===t?void 0:null===(n=t.accountUser)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:null===(m=s.user)||void 0===m?void 0:m.id)||(null===(h=ej.supplier)||void 0===h?void 0:null===(y=h.accountUser)||void 0===y?void 0:null===(b=y[0])||void 0===b?void 0:null===(I=b.user)||void 0===I?void 0:I.id)||O.id,accountId:(null===(f=ej.customer)||void 0===f?void 0:f.value)||(null===(w=ej.supplier)||void 0===w?void 0:w.value)||O.accountId}}),ez=eO.data,eP=eO.refetch,eE=null==ez?void 0:null===(Z=ez.accountUser)||void 0===Z?void 0:null===(S=Z[0])||void 0===S?void 0:S.meta,eR=(0,i.Z)((0,g.D)(en.fA),1)[0];(0,u.useEffect)(function(){(null==eE?void 0:eE.dashboard)&&ep(eE.dashboard)},[null==eE?void 0:eE.dashboard]),(0,u.useEffect)(function(){var e,t,n,o,a,c=W({asAt:eB,dashboardTilesData:(0,r.Z)({},ed),userTiles:eh,userId:ej.customer||ej.supplier||ej.location||ej.manager||ej.customerManager?null:O.id,locationId:null===(e=ej.location)||void 0===e?void 0:e.value,managerId:null===(t=ej.manager)||void 0===t?void 0:t.value,customerManagerId:null===(n=ej.customerManager)||void 0===n?void 0:n.value,accountId:(null===(o=ej.customer)||void 0===o?void 0:o.value)||(null===(a=ej.supplier)||void 0===a?void 0:a.value)||O.accountId}),i=c.userTilesList,s=c.fullTilesList;ew(i),ey(s)},[eB,ed,ej.customer,ej.customerManager,ej.location,ej.manager,ej.supplier,O,eh]);var eW,eU,eQ,eF=(0,v.aM)(k,{variables:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,accountId:(null===(M=ej.customer)||void 0===M?void 0:M.value)||(null===(j=ej.supplier)||void 0===j?void 0:j.value)||O.accountId,adminId:O.adminId,asAt:eB,dayStart:e_.todayStart,monthStart:e_.monthStart,userId:ej.customer||ej.supplier||ej.location||ej.manager||ej.customerManager?null:O.id,yearStart:e_.yearStart,locationId:null===(x=ej.location)||void 0===x?void 0:x.value,managerId:null===(B=ej.manager)||void 0===B?void 0:B.value,customerManagerId:null===(L=ej.customerManager)||void 0===L?void 0:L.value},onCompleted:function(e){eu(function(t){return(0,r.Z)((0,c.Z)((0,r.Z)({},t,ei({prevData:t,data:e.dashboardTilesData[0],type:"today"})),{jobsOnThisMonth:e.chartJobsPerDay.jobsOnThisMonth}),e.chartRevenuesPerDay[0],e.chartRevenuesPerYear[0],e.chartTopCustomers[0],e.chartNotifications[0])}),eY()}}),eV=eF.loading,eH=eF.refetch,eY=(eW=(0,o.Z)(function(){var e,t;return(0,l.__generator)(this,function(e){switch(e.label){case 0:var n;return[4,Promise.all(eh.map((n=(0,o.Z)(function(e){var t,n,o,r,c,s,d,u,m,h,p,v,g;return(0,l.__generator)(this,function(n){switch(n.label){case 0:if(t=e.name,"tile"!==e.type)return[2,{}];return d=(s=es({name:t,asAt:eB,adminId:O.adminId,time:"week",locationId:null===(o=ej.location)||void 0===o?void 0:o.value,managerId:null===(r=ej.manager)||void 0===r?void 0:r.value,customerManagerId:null===(c=ej.customerManager)||void 0===c?void 0:c.value})).query,u=s.variables,[4,P.query({query:d,variables:u})];case 1:return p=void 0===(h=n.sent().data)?(0,a.Z)({},t,[{sum:0}]):h,g=(0,i.Z)(p[t],1)[0].sum,[2,(0,a.Z)({},t,g||0)]}})}),function(e){return n.apply(this,arguments)})))];case 1:return t=e.sent().reduce(function(e,t){return(0,r.Z)({},e,t)},{}),eu(function(e){return(0,r.Z)({},e,ei({prevData:e,data:t,type:"week"}))}),[2]}})}),function(){return eW.apply(this,arguments)}),eG=(0,u.useCallback)(function(e){var t=e.tiles,n=e.skipRefetch,o=e.skipRefetchMeta;eR({variables:{userId:O.id,accountId:O.accountId,changes:{meta:(0,c.Z)((0,r.Z)({},eE||{}),{dashboard:t})}}}).then(function(){n||eH(),o||eP()})},[eE,eH,eP,eR,O.accountId,O.id]),eK=(0,u.useCallback)(function(e){eG({tiles:eh.filter(function(t){return t.name!==e})})},[eG,eh]),eX=(0,u.useCallback)(function(e,t){eG({tiles:eh.map(function(n){return n.name===e?(0,c.Z)((0,r.Z)({},n),{colourConfig:t}):n}),skipRefetch:!0})},[eG,eh]),e0=(0,u.useCallback)((eU=(0,o.Z)(function(e,t){var n,o,s,d,u,m,h,p;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return o=(n=es({name:e,asAt:eB,adminId:O.adminId,time:t})).query,s=n.variables,[4,P.query({query:o,variables:s})];case 1:return m=void 0===(u=l.sent().data)?(0,a.Z)({},e,[{sum:0}]):u,p=(0,i.Z)(m[e],1)[0].sum,eu(function(n){return(0,c.Z)((0,r.Z)({},n),(0,a.Z)({},e,(0,c.Z)((0,r.Z)({},n[e]||{}),(0,a.Z)({},t,p||0))))}),[2]}})}),function(e,t){return eU.apply(this,arguments)}),[eB,P,O.adminId]),e1=(0,u.useCallback)((eQ=(0,o.Z)(function(e,t){var n,o,i,s;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return o=(n=er({groupName:e,time:t,asAt:eB})).query,i=n.variables,[4,P.query({query:o,variables:i})];case 1:return s=l.sent().data,eu(function(n){return(0,c.Z)((0,r.Z)({},n),(0,a.Z)({},e,ec({state:n,data:s,groupName:e,time:t})))}),[2]}})}),function(e,t){return eQ.apply(this,arguments)}),[eB,P]),e2=function(e){e.stopPropagation(),C().push("".concat("/dashboard/issues/","manage"))},e5=(0,u.useCallback)(function(){var e=[],t=[],n=[],o=[];if(eI.forEach(function(e){"tile"===e.type&&e.pinned?t.push(e):"mapChart"===e.type||"chart"===e.type?n.push(e):o.push(e)}),t.length){var a=(0,d.jsx)(eD,{container:!0,spacing:3,className:"firstBlock",children:t.map(function(e,t){var n=e.title,o=e.subtitle,a=e.name,r=e.description,c=e.colourConfig,i=e.values,s=e.valueType,l=e.size,u=e.to,m=e.greaterIsBetter;return(0,d.jsx)(K.Z,{name:a,asAt:eB,className:"firstBlockItem",xs:12,sm3:6,colourConfig:c,title:n,subtitle:o,description:r,to:u,values:i,valueType:s,size:l,greaterIsBetter:m,editable:!0,onEdit:function(){return eo(!0)},onVersusChange:e0,onConfigChange:eX})})});e.push(a)}if(n.length){var r=n.map(function(e){var t=e.type,n=e.title,o=e.description,a=e.name,r=e.values,c=e.size;return"chart"===t?(0,d.jsx)(H.ZP,{item:!0,className:"bigTile",children:(0,d.jsx)(X.Z,{asAt:eB,title:n,description:o,showLegend:!0,name:a,data:r,size:c})}):"mapChart"===t?(0,d.jsx)(H.ZP,{item:!0,className:"bigTile",children:(0,d.jsx)(ee.Z,{asAt:eB,title:n,description:o,showLegend:!0,name:a,data:r,size:c,onChangeChartGroup:e1})}):null});e.push(r)}if(n.length%2==0){var c=o.splice(0,4),i=(0,d.jsx)(eD,{container:!0,spacing:3,className:"secondBlock",children:c.slice(0,4).map(function(e,t){var n=e.title,o=e.subtitle,a=e.name,r=e.description,i=e.colourConfig,s=e.values,l=e.valueType,u=e.size,m=e.to,h=e.greaterIsBetter;return(0,d.jsx)(K.Z,{name:a,asAt:eB,className:"secondBlockItem",sm:12,lg:6,xl:t===c.length-4?12:4,colourConfig:i,title:n,subtitle:o,description:r,to:m,values:s,valueType:l,size:u,greaterIsBetter:h,onVersusChange:e0,onConfigChange:eX})})});e.push(i)}var s=o.map(function(e){var t=e.name,n=e.subtitle,o=e.title,a=e.description,r=e.colourConfig,c=e.values,i=e.valueType,s=e.size,l=e.to,u=e.greaterIsBetter;return(0,d.jsx)(K.Z,{asAt:eB,xs:12,md:6,lg:4,xl3:3,className:"restTilesBoxItem",colourConfig:r,name:t,title:o,subtitle:n,description:a,to:l,values:c,valueType:i,size:s,greaterIsBetter:u,editable:!0,onEdit:function(){return eo(!0)},deletable:!0,onDelete:eK,onVersusChange:e0,onConfigChange:eX})});eg.length>eI.length&&s.push((0,d.jsx)(G.Z,{width:"100%",xs:12,md:6,lg:4,xl3:3,onAddCard:function(){return eo(!0)}}));var l=(0,d.jsx)(eJ,{container:!0,spacing:3,m:0,sx:{justifyContent:"flex-start"},children:s});return e.push(l),(0,d.jsx)(eA,{container:!0,spacing:3,children:e})},[eB,eI,eg.length,eX,eK,e0,e1]);return(0,d.jsxs)(U.Z,{sx:{width:"100%",height:"100%"},children:[!eV&&(0,d.jsxs)(Y.Z,{width:"100%",direction:"row",justifyContent:"space-between",paddingBottom:2,children:[(0,d.jsx)(Q.Z,{variant:"contained",startIcon:(0,d.jsx)(el.Z,{}),onClick:function(){return ek(!0)},children:"Filters"}),(0,d.jsx)(Y.Z,{direction:"row",spacing:2,children:(0,d.jsx)(Q.Z,{variant:"contained",color:"secondary",onClick:e2,children:"Create Work Order"})})]}),(0,d.jsx)(eN,{children:eV?(0,d.jsx)(U.Z,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(V.Z,{})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ef,{open:eS,setOpen:ek,initialFilters:eT,filters:ej,setFilters:eC}),(ej.customer||ej.supplier||ej.manager||ej.location||ej.customerManager)&&Object.keys(ej).map(function(e){return!!ej[e]&&(0,d.jsx)(F.Z,{sx:{margin:"0px 0px 15px 0px",padding:"0.8vmin 0.5vmin"},label:e$(ej,e),onDelete:function(){return eq()}})}),e5()]})}),(0,d.jsx)(et.Z,{open:R,fullTilesList:eg,selectedTiles:eh,onSaveTilesList:function(e){return eG({tiles:e})},onClose:function(){return eo(!1)}})]})},eN=(0,B.ZP)(U.Z).withConfig({displayName:"dashboard__DashboardBox",componentId:"sc-a733742b-0"})(eS()),eA=(0,B.ZP)(H.ZP).withConfig({displayName:"dashboard__SecondRowBox",componentId:"sc-a733742b-1"})(ek()),eD=(0,B.ZP)(H.ZP).withConfig({displayName:"dashboard__FirstBox",componentId:"sc-a733742b-2"})(eM()),eJ=(0,B.ZP)(H.ZP).withConfig({displayName:"dashboard__RestTilesBox",componentId:"sc-a733742b-3"})(ej());eC.propTypes={user:m.object.isRequired};var e$=(0,B.Zz)(eC)}}]);