"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8191],{29422:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(77349),a=n(11640),r=n(19013),s=n(13882),i=n(83946);function l(e,t){if((0,s.Z)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var n=t.years?(0,i.Z)(t.years):0,l=t.months?(0,i.Z)(t.months):0,u=t.weeks?(0,i.Z)(t.weeks):0,d=t.days?(0,i.Z)(t.days):0,c=t.hours?(0,i.Z)(t.hours):0,h=t.minutes?(0,i.Z)(t.minutes):0,m=t.seconds?(0,i.Z)(t.seconds):0,p=(0,r.Z)(e),v=l||n?(0,a.Z)(p,l+12*n):p,y=d||u?(0,o.Z)(v,d+7*u):v;return new Date(y.getTime()+1e3*(m+60*(h+60*c)))}},18191:function(e,t,n){n.r(t),n.d(t,{default:function(){return eh}});var o=n(47568),a=n(14924),r=n(26042),s=n(69396),i=n(828),l=n(7297),u=n(97582),d=n(85893),c=n(67294),h=n(45697),m=n(66252),p=n(6388),v=n(50319),y=n(75063);function b(){var e=(0,l.Z)(["\n  query GetDashboard(\n    $accountId: Int\n    $adminId: Int\n    $timezone: String\n    $asAt: timestamptz\n    $monthStart: timestamptz\n    $dayStart: timestamptz\n    $userId: Int\n    $currentUserId: Int\n    $yearStart: timestamptz\n  ) {\n    dashboardTilesData: getDashboard_HomeTiles(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      thresholdApprovals\n      quotesNotSubmitted\n      reactiveJobsToday\n      plannedJobsToday\n      complianceJobToday\n      reportUnsent\n      liveP1Jobs\n      offeredJobs\n      quotesToday\n      quotesNotSent\n      quotesOverdue\n      quotesDueThisWeek\n      inprogressJobs\n      numberOfOpenJobs\n      jobsInDispute\n      worksValueMTD\n      worksValueYTD\n      overdueComplianceJobs\n      onHold\n      upliftRequested\n      ppmOverdue\n      reactiveOverdue\n      failedJobs\n      jobsWithTimeNotConfirmed\n      jobsRequiringExpenseAmount\n      imminentJobSlaBreaches\n      jobsWithTimeNotConfirmedNext7days\n      jobsWithTimeNotConfirmedCurrentMonth\n      openRemedialQuotes\n      openQuotes\n      imminentQuoteSlaBreaches\n      quoteSlaBreached\n      jobSlaBreachedOnSite\n      jobSlaBreachedJobReport\n    }\n    chartJobsPerDay: getDashboard_HomeTiles_Jobs_perDay(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      jobsOnThisMonth\n    }\n    chartRevenuesPerDay: getDashboard_HomeTiles_Revenues_perDay(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      revenuesOnThisMonth\n    }\n    chartRevenuesPerYear: getDashboard_HomeTiles_Revenues_perYear(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      revenuesOnThisYear\n    }\n  }\n"]);return b=function(){return e},e}function g(){var e=(0,l.Z)(["\n  query GetDashboard(\n    $accountId: Int\n    $adminId: Int\n    $asAt: timestamptz\n    $monthStart: timestamptz\n    $dayStart: timestamptz\n    $userId: Int\n    $yearStart: timestamptz\n  ) {\n    ",": getDashboard_HomeTiles_","(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      sum\n    }\n  }\n"]);return g=function(){return e},e}function f(){var e=(0,l.Z)(["\n  query GetSuppliersLocation($where: UserLocation_bool_exp) {\n    suppliersLocation: UserLocation(distinct_on: userId, where: $where) {\n      id\n      geo\n      account: Account {\n        id\n        name\n      }\n      user: User {\n        id\n        fullName\n      }\n    }\n  }\n"]);return f=function(){return e},e}function w(){var e=(0,l.Z)(['\n  query GetJobsLocation($where: Job_bool_exp) {\n    jobsLocation: Job(where: $where, order_by: { createdAt: desc }) {\n      id\n      number\n      type\n      location: Location {\n        id\n        name\n        addresses: Addresses(\n          where: { registered: { _eq: true }, entity: { _eq: "Location" } }\n          order_by: { createdAt: desc }\n        ) {\n          address: Address {\n            addressLine1\n            addressLine2\n            addressLine3\n            postCode\n            name\n            geo\n          }\n        }\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n    }\n  }\n']);return w=function(){return e},e}var I=(0,y.Ps)(b()),Z=(0,y.Ps)(f()),k=(0,y.Ps)(w()),S=n(11163),j=n.n(S),T=n(83894),M=n(23855),C=n(43703),x=n(69119),J=n(38148),N=n(74975),B=n(10367),D=[{pinned:!0,colourConfig:{success:[0,15],danger:[16,30],warning:[30,null]},name:"reactiveJobsToday",greaterIsBetter:!0},{pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},name:"plannedJobsToday",greaterIsBetter:!0},{pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},name:"quotesToday",greaterIsBetter:!0},{pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},name:"liveP1Jobs",greaterIsBetter:!0},{name:"chartJobMetrics"},{name:"mapChart"},{name:"numberOfNotifications"}],A=n(29815),q=n(7069),_=n(77349),L=n(29383),$=n(96486),z="/dashboard",R=function(e){var t,n,o,a,i,l,u,d,c,h,m=e.asAt,p=e.userTiles,v=e.dashboardTilesData,y=e.userId,b=e.accountId,g=v||{},f=g.thresholdApprovals,w=g.quotesNotSubmitted,I=g.complianceJobToday,Z=g.inprogressJobs,k=g.liveP1Jobs,S=g.onHold,j=g.overdueComplianceJobs,T=g.plannedJobsToday,M=g.ppmOverdue,C=g.quotesDueThisWeek,x=g.quotesOverdue,J=g.quotesToday,B=g.reactiveJobsToday,D=g.reportUnsent,R=g.reactiveOverdue,P=g.upliftRequested,O=g.worksValueMTD,E=g.worksValueYTD,W=g.jobsOnThisMonth,Q=g.revenuesOnThisMonth,U=g.revenuesOnThisYear,V=g.suppliersLocation,Y=g.jobsLocation,H=g.failedJobs,G=g.jobsWithTimeNotConfirmed,F=g.jobsRequiringExpenseAmount,K=g.imminentJobSlaBreaches,X=g.jobsWithTimeNotConfirmedCurrentMonth,ee=g.jobsWithTimeNotConfirmedNext7days,et=g.openRemedialQuotes,en=g.openQuotes,eo=g.imminentQuoteSlaBreaches,ea=g.quoteSlaBreached,er=g.jobSlaBreachedOnSite,es=g.jobSlaBreachedJobReport,ei=[],el=[],eu=[],ed=[],ec=[],eh=[],em=[],ep=[],ev=[],ey=[];if(W&&W.length>0&&W.forEach(function(e,t){var n=e.date,o=e.ppmJobsOnThisMonth,a=e.reactiveJobsOnThisMonth,r=new Date(m),s=new Date(n);if(s>=(0,q.Z)(r,8)&&s<=(0,_.Z)(r,7)){if(W[t-1])for(var i=W[t-1].date,l=(0,L.Z)(s,new Date(i)),u=1;u<l;u++)ei.push({date:(0,q.Z)(s,u),values:[]}),ed.push({date:(0,q.Z)(s,u),values:[]});ei.push({date:s,values:o}),ed.push({date:s,values:a})}if(s>=(0,q.Z)(r,15)&&s<=(0,_.Z)(r,14)){if(W[t-1])for(var d=W[t-1].date,c=(0,L.Z)(s,new Date(d)),h=1;h<c;h++)el.push({date:(0,q.Z)(s,h),values:[]}),ec.push({date:(0,q.Z)(s,h),values:[]});el.push({date:s,values:o}),ec.push({date:s,values:a})}if(s>=(0,q.Z)(r,31)&&s<=(0,_.Z)(r,30)){if(W[t-1])for(var p=W[t-1].date,v=(0,L.Z)(s,new Date(p)),y=1;y<v;y++)eu.push({date:(0,q.Z)(s,y),values:[]}),eh.push({date:(0,q.Z)(s,y),values:[]});eu.push({date:s,values:o}),eh.push({date:s,values:a})}}),Q&&Q.length>0){var eb="dd/MM";Q.forEach(function(e,t){var n=e.date,o=e.revenuesOnThisDay,a=new Date(m),r=new Date(n);if(r>=(0,q.Z)(a,8)){if(Q[t-1])for(var s=Q[t-1].date,i=(0,L.Z)(new Date(s),r),l=1;l<i;l++)em.push({date:(0,_.Z)(r,l),sum:[]});em.push({date:r,sum:o,formatDate:eb})}if(r>=(0,q.Z)(a,15)){if(Q[t-1])for(var u=Q[t-1].date,d=(0,L.Z)(new Date(u),r),c=1;c<d;c++)ep.push({date:(0,_.Z)(r,c),sum:[]});ep.push({date:r,sum:o,formatDate:eb})}if(r>=(0,q.Z)(a,31)){if(Q[t-1])for(var h=Q[t-1].date,p=(0,L.Z)(new Date(h),r),v=1;v<p;v++)ev.push({date:(0,_.Z)(r,v),sum:[]});ev.push({date:r,sum:o,formatDate:eb})}})}U&&U.length>0&&U.forEach(function(e){var t=e.date,n=e.revenuesOnThisMonth;ey.push({date:t,sum:n,formatDate:"MM/yyyy"})});var eg=m?(0,N.Z)(m,"yyyy-MM-dd"):"",ef=[{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,15],danger:[16,30],warning:[30,null]},title:"Reactive jobs today",description:"Reactive jobs scheduled to happen today",name:"reactiveJobsToday",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=reactiveJobsToday").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==B?void 0:B.today)||0,week:(null==B?void 0:B.week)||0,month:(null==B?void 0:B.month)||0,threeMonth:(null==B?void 0:B.threeMonth)||0,year:(null==B?void 0:B.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"PPM jobs today",description:"Planned maintenance jobs scheduled to happen today",name:"plannedJobsToday",to:"".concat(z,"/issues?type=ppm&asAt=").concat(eg,"&tileName=plannedJobsToday").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==T?void 0:T.today)||0,week:(null==T?void 0:T.week)||0,month:(null==T?void 0:T.month)||0,threeMonth:(null==T?void 0:T.threeMonth)||0,year:(null==T?void 0:T.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Quotes today",description:"Quotes where due date is today",name:"quotesToday",to:"".concat(z,"/quotes?asAt=").concat(eg,"&tileName=quotesToday").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==J?void 0:J.today)||0,week:(null==J?void 0:J.week)||0,month:(null==J?void 0:J.month)||0,threeMonth:(null==J?void 0:J.threeMonth)||0,year:(null==J?void 0:J.year)||0},greaterIsBetter:!0},{type:"chart",size:[2,1],title:"Jobs metrics",name:"chartJobMetrics",values:{week:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(t=(0,$.orderBy)(ei,"date","asc"))&&void 0!==t?t:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(n=(0,$.orderBy)(ed,"date","asc"))&&void 0!==n?n:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(o=(0,$.orderBy)(em,"date","asc"))&&void 0!==o?o:[]}]}],twoWeeks:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(a=(0,$.orderBy)(el,"date","asc"))&&void 0!==a?a:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(i=(0,$.orderBy)(ec,"date","asc"))&&void 0!==i?i:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(l=(0,$.orderBy)(ep,"date","asc"))&&void 0!==l?l:[]}]}],month:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(u=(0,$.orderBy)(eu,"date","asc"))&&void 0!==u?u:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(d=(0,$.orderBy)(eh,"date","asc"))&&void 0!==d?d:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(c=(0,$.orderBy)(ev,"date","asc"))&&void 0!==c?c:[]}]}],year:[{groupLabel:"Monthly job revenue",groupName:"revenuesPerYear",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(h=(0,$.orderBy)(ey,"date","asc"))&&void 0!==h?h:[]}]}]}},{type:"mapChart",size:[2,1],title:"Geolocation info",name:"mapChart",values:{month:[{groupLabel:"Last supplier location",groupName:"suppliersLocation",groupDescription:"Last supplier location",chartData:[{label:"Last supplier location",markerIcon:"supplier",data:(null==V?void 0:V.month)||[]}]},{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==Y?void 0:Y.month)||[]}]}],threeMonth:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==Y?void 0:Y.threeMonth)||[]}]}],tomorrow:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==Y?void 0:Y.tomorrow)||[]}]}],today:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==Y?void 0:Y.today)||[]}]}],nextWeek:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==Y?void 0:Y.nextWeek)||[]}]}],nextTwoWeeks:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==Y?void 0:Y.nextTwoWeeks)||[]}]}],nextMonth:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==Y?void 0:Y.nextMonth)||[]}]}],week:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==Y?void 0:Y.week)||[]}]}]}},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Live P1 jobs",description:"Jobs with P1 status scheduled for today but not completed",name:"liveP1Jobs",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=liveP1Jobs").concat(y?"&userId=".concat(y):""),values:{today:(null==k?void 0:k.today)||0,week:(null==k?void 0:k.week)||0,month:(null==k?void 0:k.month)||0,threeMonth:(null==k?void 0:k.threeMonth)||0,year:(null==k?void 0:k.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Overdue reactive jobs",description:"Reactive jobs that have not yet been started or completed 24 hours after scheduled time",name:"reactiveOverdue",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=reactiveOverdue").concat(y?"&userId=".concat(y):""),values:{today:(null==R?void 0:R.today)||0,week:(null==R?void 0:R.week)||0,month:(null==R?void 0:R.month)||0,threeMonth:(null==R?void 0:R.threeMonth)||0,year:(null==R?void 0:R.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Overdue PPM",description:"Planned maintenance jobs that have not yet been started or completed 24 hours after scheduled time",name:"ppmOverdue",to:"".concat(z,"/issues?type=ppm&asAt=").concat(eg,"&tileName=ppmOverdue").concat(y?"&userId=".concat(y):""),values:{today:(null==M?void 0:M.today)||0,week:(null==M?void 0:M.week)||0,month:(null==M?void 0:M.month)||0,threeMonth:(null==M?void 0:M.threeMonth)||0,year:(null==M?void 0:M.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Quotes overdue",description:"Quotes which are past due date but have not had resolution.",name:"quotesOverdue",to:"".concat(z,"/quotes?asAt=").concat(eg,"&tileName=quotesOverdue").concat(y?"&userId=".concat(y):""),values:{today:(null==x?void 0:x.today)||0,week:(null==x?void 0:x.week)||0,month:(null==x?void 0:x.month)||0,threeMonth:(null==x?void 0:x.threeMonth)||0,year:(null==x?void 0:x.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Compliance jobs today",description:"Compliance work orders that are scheduled to take place today",name:"complianceJobToday",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=complianceJobToday").concat(y?"&userId=".concat(y):""),values:{today:(null==I?void 0:I.today)||0,week:(null==I?void 0:I.week)||0,month:(null==I?void 0:I.month)||0,threeMonth:(null==I?void 0:I.threeMonth)||0,year:(null==I?void 0:I.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Overdue compliance jobs",description:"Compliance jobs that have not yet been started or completed 24 hours after scheduled time",name:"overdueComplianceJobs",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=overdueComplianceJobs").concat(y?"&userId=".concat(y):""),values:{today:(null==j?void 0:j.today)||0,week:(null==j?void 0:j.week)||0,month:(null==j?void 0:j.month)||0,threeMonth:(null==j?void 0:j.threeMonth)||0,year:(null==j?void 0:j.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,20],danger:[21,40],warning:[41,null]},title:"Jobs in progress",description:"Jobs currently in progress",name:"inprogressJobs",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=inprogressJobs").concat(y?"&userId=".concat(y):""),values:{today:(null==Z?void 0:Z.today)||0,week:(null==Z?void 0:Z.week)||0,month:(null==Z?void 0:Z.month)||0,threeMonth:(null==Z?void 0:Z.threeMonth)||0,year:(null==Z?void 0:Z.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Reports unsent",description:"Jobs that have been completed but where a report has not been sent within 24 hours",name:"reportUnsent",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=reportUnsent").concat(y?"&userId=".concat(y):""),values:{today:(null==D?void 0:D.today)||0,week:(null==D?void 0:D.week)||0,month:(null==D?void 0:D.month)||0,threeMonth:(null==D?void 0:D.threeMonth)||0,year:(null==D?void 0:D.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Jobs on hold",description:"Jobs currently marked as on hold",name:"onHold",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=onHold").concat(y?"&userId=".concat(y):""),values:{today:(null==S?void 0:S.today)||0,week:(null==S?void 0:S.week)||0,month:(null==S?void 0:S.month)||0,threeMonth:(null==S?void 0:S.threeMonth)||0,year:(null==S?void 0:S.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Uplift requests",description:"Jobs where an uplift has been requested but not yet approved or rejected",name:"upliftRequested",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=upliftRequested").concat(y?"&userId=".concat(y):""),values:{today:(null==P?void 0:P.today)||0,week:(null==P?void 0:P.week)||0,month:(null==P?void 0:P.month)||0,threeMonth:(null==P?void 0:P.threeMonth)||0,year:(null==P?void 0:P.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Quotes due this week",description:"Quotes where due date is within next 7 days",name:"quotesDueThisWeek",to:"".concat(z,"/quotes?asAt=").concat(eg,"&tileName=quotesDueThisWeek").concat(y?"&userId=".concat(y):""),values:{today:(null==C?void 0:C.today)||0,week:(null==C?void 0:C.week)||0,month:(null==C?void 0:C.month)||0,threeMonth:(null==C?void 0:C.threeMonth)||0,year:(null==C?void 0:C.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Quotes not submitted",description:"Quotes that have not yet been submitted",name:"quotesNotSubmitted",to:"".concat(z,"/quotes?asAt=").concat(eg,"&tileName=quotesNotSubmitted").concat(y?"&userId=".concat(y):""),values:{today:(null==w?void 0:w.today)||0,week:(null==w?void 0:w.week)||0,month:(null==w?void 0:w.month)||0,threeMonth:(null==w?void 0:w.threeMonth)||0,year:(null==w?void 0:w.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Work order value (MTD)",description:"Value of jobs completed in the month to date",name:"worksValueMTD",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=worksValueMTD").concat(y?"&userId=".concat(y):""),values:{today:(null==O?void 0:O.today)||0,week:(null==O?void 0:O.week)||0,month:(null==O?void 0:O.month)||0,threeMonth:(null==O?void 0:O.threeMonth)||0,year:(null==O?void 0:O.year)||0},greaterIsBetter:!0,valueType:"price"},{type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Work order value (YTD)",description:"Value of jobs completed in the year to date",name:"worksValueYTD",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=worksValueYTD").concat(y?"&userId=".concat(y):""),values:{today:(null==E?void 0:E.today)||0,week:(null==E?void 0:E.week)||0,month:(null==E?void 0:E.month)||0,threeMonth:(null==E?void 0:E.threeMonth)||0,year:(null==E?void 0:E.year)||0},greaterIsBetter:!0,valueType:"price"},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Threshold approvals outstanding",description:"Work orders and quotes where approval is required based on threshold levels",name:"thresholdApprovals",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=thresholdApprovals").concat(y?"&userId=".concat(y):""),values:{today:(null==f?void 0:f.today)||0,week:(null==f?void 0:f.week)||0,month:(null==f?void 0:f.month)||0,threeMonth:(null==f?void 0:f.threeMonth)||0,year:(null==f?void 0:f.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Failed jobs",description:"Jobs where supplier has reported failures and these have not been resolved.",name:"failedJobs",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=failedJobs").concat(y?"&userId=".concat(y):""),values:{today:(null==H?void 0:H.today)||0,week:(null==H?void 0:H.week)||0,month:(null==H?void 0:H.month)||0,threeMonth:(null==H?void 0:H.threeMonth)||0,year:(null==H?void 0:H.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed",description:"Scheduled jobs where an attendance time has not been specified by supplier.",name:"jobsWithTimeNotConfirmed",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=jobsWithTimeNotConfirmed").concat(y?"&userId=".concat(y):""),values:{today:(null==G?void 0:G.today)||0,week:(null==G?void 0:G.week)||0,month:(null==G?void 0:G.month)||0,threeMonth:(null==G?void 0:G.threeMonth)||0,year:(null==G?void 0:G.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs requiring expense amounts",description:"Jobs where expenses have amount expense pending.",name:"jobsRequiringExpenseAmount",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=jobsRequiringExpenseAmount").concat(y?"&userId=".concat(y):""),values:{today:(null==F?void 0:F.today)||0,week:(null==F?void 0:F.week)||0,month:(null==F?void 0:F.month)||0,threeMonth:(null==F?void 0:F.threeMonth)||0,year:(null==F?void 0:F.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Imminent job SLA breaches",description:"These are jobs where there is a potential SLA breach in 1 hour or less.",name:"imminentJobSlaBreaches",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=imminentJobSlaBreaches").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==K?void 0:K.today)||0,week:(null==K?void 0:K.week)||0,month:(null==K?void 0:K.month)||0,threeMonth:(null==K?void 0:K.threeMonth)||0,year:(null==K?void 0:K.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed.",subtitle:"Current month",description:"Scheduled jobs that are due to be completed in the current calendar month but where no attendance time has been specified by the supplier.",name:"jobsWithTimeNotConfirmedCurrentMonth",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=jobsWithTimeNotConfirmedCurrentMonth").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==X?void 0:X.today)||0,week:(null==X?void 0:X.week)||0,month:(null==X?void 0:X.month)||0,threeMonth:(null==X?void 0:X.threeMonth)||0,year:(null==X?void 0:X.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed",subtitle:"Next 7 days",description:"Scheduled jobs that are due to be completed within the next 7 days but where no attendance time has been specified by the supplier.",name:"jobsWithTimeNotConfirmedNext7days",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=jobsWithTimeNotConfirmedNext7days").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==ee?void 0:ee.today)||0,week:(null==ee?void 0:ee.week)||0,month:(null==ee?void 0:ee.month)||0,threeMonth:(null==ee?void 0:ee.threeMonth)||0,year:(null==ee?void 0:ee.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Open remedial quotes",description:"These are remedial quotes that have not yet been resolved -\n        for example, accepted or rejected by the customer or closed.",name:"openRemedialQuotes",to:"".concat(z,"/quotes?asAt=").concat(eg,"&tileName=openRemedialQuotes").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==et?void 0:et.today)||0,week:(null==et?void 0:et.week)||0,month:(null==et?void 0:et.month)||0,threeMonth:(null==et?void 0:et.threeMonth)||0,year:(null==et?void 0:et.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Open quotes",description:"These are quotes that have not yet been resolved -\n      for example, accepted or rejected by the customer or closed.",name:"openQuotes",to:"".concat(z,"/quotes?asAt=").concat(eg,"&tileName=openQuotes").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==en?void 0:en.today)||0,week:(null==en?void 0:en.week)||0,month:(null==en?void 0:en.month)||0,threeMonth:(null==en?void 0:en.threeMonth)||0,year:(null==en?void 0:en.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Imminent quote SLA breaches",description:"These are quotes where there is a potential SLA breach in 1 day or less.",name:"imminentQuoteSlaBreaches",to:"".concat(z,"/quotes?asAt=").concat(eg,"&tileName=imminentQuoteSlaBreaches").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==eo?void 0:eo.today)||0,week:(null==eo?void 0:eo.week)||0,month:(null==eo?void 0:eo.month)||0,threeMonth:(null==eo?void 0:eo.threeMonth)||0,year:(null==eo?void 0:eo.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Quotes - Quote return time",description:"These are quotes where the SLA was not returned within the relevant timeframe.",name:"quoteSlaBreached",to:"".concat(z,"/quotes?asAt=").concat(eg,"&tileName=quoteSlaBreached").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==ea?void 0:ea.today)||0,week:(null==ea?void 0:ea.week)||0,month:(null==ea?void 0:ea.month)||0,threeMonth:(null==ea?void 0:ea.threeMonth)||0,year:(null==ea?void 0:ea.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Work orders - On site time",description:"These are jobs where the time taken for the engineer /\n       operative to arrive on site was beyond the relevant SLA. ",name:"jobSlaBreachedOnSite",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=jobSlaBreachedOnSite").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==er?void 0:er.today)||0,week:(null==er?void 0:er.week)||0,month:(null==er?void 0:er.month)||0,threeMonth:(null==er?void 0:er.threeMonth)||0,year:(null==er?void 0:er.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Work orders - Report submission time",description:"These are jobs where the time taken to submit the report\n        to the customer was more than the relevant SL.A.",name:"jobSlaBreachedJobReport",to:"".concat(z,"/issues?asAt=").concat(eg,"&tileName=jobSlaBreachedJobReport").concat(y?"&userId=".concat(y):"").concat(b?"&accountId=".concat(b):""),values:{today:(null==es?void 0:es.today)||0,week:(null==es?void 0:es.week)||0,month:(null==es?void 0:es.month)||0,threeMonth:(null==es?void 0:es.threeMonth)||0,year:(null==es?void 0:es.year)||0},greaterIsBetter:!0}],ew=ef.map(function(e){return e.name}),eI={success:[0,10],danger:[11,20],warning:[21,null]},eZ=p.reduce(function(e,t){var n,o=t.colourConfig,a=t.pinned,i=t.greaterIsBetter,l=t.name,u=ef.find(function(e){return e.name===l});return u?(0,A.Z)(e).concat([(0,s.Z)((0,r.Z)({},u),{pinned:null!==(n=null!=a?a:u.pinned)&&void 0!==n&&n,colourConfig:void 0===o?eI:o,greaterIsBetter:void 0===i||i})]):e},[]).sort(function(e,t){return ew.indexOf(e)-ew.indexOf(t)});return{fullTilesList:ef,userTilesList:eZ}},P=n(5616),O=n(98456),E=n(86886),W=n(5339),Q=n(98572),U=n(67868),V=n(83537),Y=n(6425),H=n(75327),G=n(29422),F=n(30734),K=function(e){var t=e.groupName,n=e.time,o=e.asAt,a=null,r={};switch(t){case"jobsLocation":a=k;break;case"suppliersLocation":a=Z}if("jobsLocation"===t)switch(r.Location={Addresses:{registered:{_eq:!0},entity:{_eq:"Location"},Address:{geo:{_is_null:!1}}}},n){case"today":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,x.Z)(o)}}];break;case"tomorrow":r._and=[{timingStart:{_lte:(0,G.Z)(o,{days:1})}},{timingStart:{_gte:(0,G.Z)((0,x.Z)(o),{days:1})}}];break;case"nextWeek":r._and=[{timingStart:{_lte:(0,G.Z)(o,{weeks:1})}},{timingStart:{_gte:(0,G.Z)((0,x.Z)(o),{days:1})}}];break;case"nextTwoWeeks":r._and=[{timingStart:{_lte:(0,G.Z)(o,{weeks:2})}},{timingStart:{_gte:(0,G.Z)((0,x.Z)(o),{days:1})}}];break;case"nextMonth":r._and=[{timingStart:{_lte:(0,G.Z)(o,{months:1})}},{timingStart:{_gte:(0,G.Z)((0,x.Z)(o),{days:1})}}];break;case"week":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,F.Z)(o,{weeks:1})}}];break;case"month":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,F.Z)(o,{months:1})}}];break;case"threeMonth":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,F.Z)(o,{months:3})}}]}else r.geo={_is_null:!1},"month"===n&&(r._and=[{createdAt:{_lte:o}},{createdAt:{_gte:(0,F.Z)(o,{months:1})}}]);return{query:a,variables:{where:r}}},X=function(e){var t=e.state,n=e.data,o=e.groupName,i=e.time,l={};if("suppliersLocation"===o)l=(0,s.Z)((0,r.Z)({},t[o]||{}),(0,a.Z)({},i,n[o].map(function(e){var t,n,o,a=e.id,r=e.geo;return{id:a,account:e.account,user:e.user,position:{lat:null===(t=r.coordinates)||void 0===t?void 0:t[1],lng:null===(n=r.coordinates)||void 0===n?void 0:n[0]}}})));else{var u=n[o].map(function(e){var t,n,o,a,r,s=e.id,i=e.number,l=e.type,u=e.location;return{id:s,number:i,type:l,location:u,supplier:e.supplier,service:e.service,position:{lat:null===(t=u.addresses[0].address.geo)||void 0===t?void 0:null===(n=t.coordinates)||void 0===n?void 0:n[1],lng:null===(o=u.addresses[0].address.geo)||void 0===o?void 0:null===(a=o.coordinates)||void 0===a?void 0:a[0]}}});l=(0,s.Z)((0,r.Z)({},t[o]||{}),(0,a.Z)({},i,u))}return l},ee=function(e){var t=e.prevData,n=e.data,o=e.type;return Object.keys(n).reduce(function(e,i){return(0,s.Z)((0,r.Z)({},e),(0,a.Z)({},i,(0,s.Z)((0,r.Z)({},(null==t?void 0:t[i])||{}),(0,a.Z)({},o,n[i]))))},{})},et=function(e){var t,n=e.name,o=e.asAt,a=e.userId,r=e.adminId,s=e.accountId,i=e.time,l=(0,y.Ps)(g(),n,n),u=null;switch(i){case"week":u=(0,F.Z)(o,{weeks:1});break;case"month":u=(0,F.Z)(o,{months:1});break;case"threeMonth":u=(0,F.Z)(o,{months:3});break;case"year":u=(0,F.Z)(o,{years:1})}return{query:l,variables:{adminId:r,accountId:s,asAt:u,dayStart:(0,x.Z)(u),monthStart:(0,C.Z)(u),userId:a,yearStart:(0,J.Z)(u)}}};function en(){var e=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n\n  .firstBlock {\n    margin: 0;\n    flex-basis: 50% !important;\n    max-width: 50% !important;\n    min-width: auto;\n  }\n\n  .firstBlockItem {\n    padding-left: 24px;\n    padding-top: 24px;\n  }\n\n  .bigTile {\n    flex-basis: 50% !important;\n    max-width: 50%;\n  }\n\n  .secondBlock {\n    margin: 0;\n    flex-basis: 50% !important;\n    min-width: auto;\n  }\n\n  .secondBlockItem {\n    flex-basis: 50% !important;\n    max-width: 50% !important;\n    padding-left: 24px;\n    padding-top: 24px;\n  }\n\n  @media (max-width: 1550px) {\n    .firstBlock {\n      margin: 0;\n      flex-basis: 100% !important;\n      max-width: 100% !important;\n    }\n\n    .bigTile {\n      flex-basis: 100% !important;\n      max-width: 100%;\n    }\n\n    .secondBlock {\n      flex-basis: 100% !important;\n    }\n    .restTilesBoxItem {\n      flex-basis: 100% !important;\n    }\n  }\n\n  @media (max-width: 800px) {\n    .secondBlock {\n      flex-basis: 100% !important;\n    }\n    .secondBlockItem {\n      flex-basis: 100% !important;\n      max-width: 100% !important;\n  }\n"]);return en=function(){return e},e}function eo(){var e=(0,l.Z)(["\n  align-content: flex-start;\n  height: auto;\n  min-height: 400px;\n  justify-content: space-between;\n"]);return eo=function(){return e},e}function ea(){var e=(0,l.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n\n  min-width: 824px;\n\n  justify-content: space-between;\n  align-content: space-between;\n"]);return ea=function(){return e},e}function er(){var e=(0,l.Z)(["\n  justify-content: space-between;\n"]);return er=function(){return e},e}var es=(0,T.Z)(new Date),ei=function(e){var t,n,l=e.user;e.theme;var h=(0,S.useRouter)(),y=(0,m.x)(),b=(0,c.useState)(!1),g=b[0],f=b[1],w=(0,c.useState)({}),Z=w[0],k=w[1],B=(0,c.useState)(D),A=B[0],q=B[1],_=(0,c.useState)([]),L=_[0],$=_[1],z=(0,c.useState)([]),G=z[0],F=z[1],en=(0,c.useState)(h.query.asAt?(0,T.Z)((0,M.Z)(h.query.asAt)):es)[0],eo=(0,c.useState)({monthStart:(0,C.Z)(en),todayEnd:(0,T.Z)(en),todayStart:(0,x.Z)(en),yearStart:(0,J.Z)(en)})[0],ea=(0,c.useState)(h.query.userId?h.query.userId:l.id)[0];(0,c.useEffect)(function(){"/dashboard"===j().pathname&&j().push({pathname:"/dashboard",query:(0,s.Z)((0,r.Z)({},h.query),{asAt:(0,N.Z)(en,"yyyy-MM-dd"),userId:ea})})},[en,ea]);var er=(0,p.aM)(H.iM,{variables:{userId:l.id,accountId:l.accountId}}),ei=er.data,eh=er.refetch,em=(null==ei?void 0:null===(t=ei.accountUser)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.meta)||{},ep=(0,i.Z)((0,v.D)(H.fA),1)[0];(0,c.useEffect)(function(){(null==em?void 0:em.dashboard)&&q(em.dashboard)},[em]),(0,c.useEffect)(function(){var e=R({asAt:en,dashboardTilesData:(0,r.Z)({},Z),userTiles:A,accountId:l.accountId,userId:ea}),t=e.userTilesList,n=e.fullTilesList;F(t),$(n)},[Z]);var ev,ey,eb,eg=(0,p.aM)(I,{variables:{accountId:l.accountId,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,adminId:l.adminId,asAt:en,currentUserId:l.id,dayStart:eo.todayStart,monthStart:eo.monthStart,userId:ea,yearStart:eo.yearStart},onCompleted:function(e){k(function(t){return(0,r.Z)((0,s.Z)((0,r.Z)({},t,ee({prevData:t,data:e.dashboardTilesData[0],type:"today"})),{jobsOnThisMonth:e.chartJobsPerDay.jobsOnThisMonth}),e.chartRevenuesPerDay[0],e.chartRevenuesPerYear[0])}),eI()}}),ef=eg.loading,ew=eg.refetch,eI=(ev=(0,o.Z)(function(){var e,t;return(0,u.__generator)(this,function(e){switch(e.label){case 0:var n;return[4,Promise.all(A.map((n=(0,o.Z)(function(e){var t,n,o,r,s,d,c,h,m,p;return(0,u.__generator)(this,function(n){switch(n.label){case 0:if(t=e.name,"tile"!==e.type)return[2,{}];return r=(o=et({name:t,asAt:en,adminId:l.adminId,accountId:l.accountId,userId:ea,time:"week"})).query,s=o.variables,[4,y.query({query:r,variables:s})];case 1:return h=void 0===(c=n.sent().data)?(0,a.Z)({},t,[{sum:0}]):c,p=(0,i.Z)(h[t],1)[0].sum,[2,(0,a.Z)({},t,p||0)]}})}),function(e){return n.apply(this,arguments)})))];case 1:return t=e.sent().reduce(function(e,t){return(0,r.Z)({},e,t)},{}),k(function(e){return(0,r.Z)({},e,ee({prevData:e,data:t,type:"week"}))}),[2]}})}),function(){return ev.apply(this,arguments)}),eZ=function(e){var t=e.tiles,n=e.skipRefetch,o=e.skipRefetchMeta;ep({variables:{userId:l.id,accountId:l.accountId,changes:{meta:(0,s.Z)((0,r.Z)({},em),{dashboard:t})}}}).then(function(){n||ew(),o||eh()})},ek=function(e){eZ({tiles:A.filter(function(t){return t.name!==e})})},eS=function(e,t){eZ({tiles:A.map(function(n){return n.name===e?(0,s.Z)((0,r.Z)({},n),{colourConfig:t}):n}),skipRefetch:!0})},ej=(ey=(0,o.Z)(function(e,t){var n,o,d,c,h,m,p,v;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return o=(n=et({name:e,asAt:en,adminId:l.adminId,accountId:l.accountId,userId:ea,time:t})).query,d=n.variables,[4,y.query({query:o,variables:d})];case 1:return m=void 0===(h=u.sent().data)?(0,a.Z)({},e,[{sum:0}]):h,v=(0,i.Z)(m[e],1)[0].sum,k(function(n){return(0,s.Z)((0,r.Z)({},n),(0,a.Z)({},e,(0,s.Z)((0,r.Z)({},n[e]||{}),(0,a.Z)({},t,v||0))))}),[2]}})}),function(e,t){return ey.apply(this,arguments)}),eT=(eb=(0,o.Z)(function(e,t){var n,o,i,l;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return o=(n=K({groupName:e,time:t,asAt:en})).query,i=n.variables,[4,y.query({query:o,variables:i})];case 1:return l=u.sent().data,k(function(n){return(0,s.Z)((0,r.Z)({},n),(0,a.Z)({},e,X({state:n,data:l,groupName:e,time:t})))}),[2]}})}),function(e,t){return eb.apply(this,arguments)}),eM=(0,c.useCallback)(function(){var e=[],t=[],n=[],o=[];if(G.forEach(function(e){"tile"===e.type&&e.pinned?t.push(e):"mapChart"===e.type||"chart"===e.type?n.push(e):o.push(e)}),t.length){var a=(0,d.jsx)(ed,{container:!0,spacing:3,className:"firstBlock",children:t.map(function(e,t){var n=e.title,o=e.subtitle,a=e.name,r=e.description,s=e.colourConfig,i=e.values,l=e.valueType,u=e.size,c=e.to,h=e.greaterIsBetter;return(0,d.jsx)(Q.Z,{name:a,asAt:en,className:"firstBlockItem",xs:12,sm3:6,colourConfig:s,title:n,subtitle:o,description:r,to:c,values:i,valueType:l,size:u,greaterIsBetter:h,editable:!0,onEdit:function(){return f(!0)},onVersusChange:ej,onConfigChange:eS})})});e.push(a)}if(n.length){var r=n.map(function(e){var t=e.type,n=e.title,o=e.description,a=e.name,r=e.values,s=e.size;return"chart"===t?(0,d.jsx)(E.ZP,{item:!0,className:"bigTile",children:(0,d.jsx)(U.Z,{asAt:en,title:n,description:o,showLegend:!0,name:a,data:r,size:s})}):"mapChart"===t?(0,d.jsx)(E.ZP,{item:!0,className:"bigTile",children:(0,d.jsx)(V.Z,{asAt:en,title:n,description:o,showLegend:!0,name:a,data:r,size:s,onChangeChartGroup:eT})}):null});e.push(r)}if(n.length%2==0){var s=o.splice(0,4),i=(0,d.jsx)(ed,{container:!0,spacing:3,className:"secondBlock",children:s.slice(0,4).map(function(e,t){var n=e.title,o=e.subtitle,a=e.name,r=e.description,i=e.colourConfig,l=e.values,u=e.valueType,c=e.size,h=e.to,m=e.greaterIsBetter;return(0,d.jsx)(Q.Z,{name:a,asAt:en,className:"secondBlockItem",sm:12,lg:6,xl:t===s.length-4?12:4,colourConfig:i,title:n,subtitle:o,description:r,to:h,values:l,valueType:u,size:c,greaterIsBetter:m,onVersusChange:ej,onConfigChange:eS})})});e.push(i)}var l=o.map(function(e){var t=e.name,n=e.title,o=e.subtitle,a=e.description,r=e.colourConfig,s=e.values,i=e.valueType,l=e.size,u=e.to,c=e.greaterIsBetter;return(0,d.jsx)(Q.Z,{asAt:en,xs:12,sm3:6,xl:3,className:"restTilesBoxItem",colourConfig:r,name:t,title:n,subtitle:o,description:a,to:u,values:s,valueType:i,size:l,greaterIsBetter:c,editable:!0,onEdit:function(){return f(!0)},deletable:!0,onDelete:ek,onVersusChange:ej,onConfigChange:eS})});L.length>G.length&&l.push((0,d.jsx)(W.Z,{width:"100%",xs:12,sm3:6,xl:3,onAddCard:function(){return f(!0)}}));var u=(0,d.jsx)(ec,{container:!0,spacing:3,m:0,sx:{justifyContent:"flex-start"},children:l});return e.push(u),(0,d.jsx)(eu,{container:!0,spacing:3,children:e})},[G]);return(0,d.jsxs)(P.Z,{sx:{width:"100%",height:"100%"},children:[(0,d.jsx)(el,{children:ef?(0,d.jsx)(P.Z,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(O.Z,{})}):eM()}),(0,d.jsx)(Y.Z,{open:g,fullTilesList:L,selectedTiles:A,onSaveTilesList:function(e){return eZ({tiles:e})},onClose:function(){return f(!1)}})]})},el=(0,B.ZP)(P.Z).withConfig({displayName:"dashboard__DashboardBox",componentId:"sc-b543bac5-0"})(en()),eu=(0,B.ZP)(E.ZP).withConfig({displayName:"dashboard__SecondRowBox",componentId:"sc-b543bac5-1"})(eo()),ed=(0,B.ZP)(E.ZP).withConfig({displayName:"dashboard__FirstBox",componentId:"sc-b543bac5-2"})(ea()),ec=(0,B.ZP)(E.ZP).withConfig({displayName:"dashboard__RestTilesBox",componentId:"sc-b543bac5-3"})(er());ei.propTypes={user:h.object.isRequired};var eh=(0,B.Zz)(ei)}}]);