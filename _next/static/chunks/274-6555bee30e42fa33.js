"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[274],{58473:function(e,n,t){t.d(n,{P:function(){return J}});var r=t(26042),a=t(69396),o=t(85893),s=t(45697),i=t(67294),l=t(42283),u=t(79665),c=t(76600),d=t(11585),p=t(9270),m=t(62140),v=t(49501),y=t(55563),b=t(95103),h=t(84043),x=t(58594),f=t(48580),g=t(25742),Z=t(16879),j=t(66812),T=t(32339),C=function(e){var n,t={errors:e.errors,register:e.register};return(0,o.jsxs)(p.Z,{children:[(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"Type Of organisation",children:(0,o.jsx)(b.Z,(0,a.Z)((0,r.Z)({},t),{name:"typeOfOrganisation",options:T.E}))})}),(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"Quoting Email",children:(0,o.jsx)(y.Z,(0,a.Z)((0,r.Z)({},t),{name:"quotingEmail",type:"email"}))})}),(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"UTR Number",children:(0,o.jsx)(y.Z,(0,a.Z)((0,r.Z)({},t),{name:"utrNumber"}))})}),(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"CIS registration number",children:(0,o.jsx)(y.Z,(0,a.Z)((0,r.Z)({},t),{name:"cisRegistered"}))})})]})};C.propTypes={errors:s.object.isRequired,register:s.func.isRequired};var I=t(56361),q=t(8986),S=t(21789),_=t(2845),A=t(32749),$=t(64666),R=t(37645),B=t(6514),P=t(58951),w=t(31425),O=t(11057),L=t(5616),k=t(98456),U=t(83395),J=function(e){var n=e.account,t=e.displayXeroContacts,s=void 0!==t&&t,T=e.xeroContacts,J=e.displaySignin,E=e.handleXeroAuthorize,N=e.onSubmit,F=e.schema,G=e.type,Q=e.loading,D=(0,_.x)(),V=D.hasRole,z=D.user,W=(0,i.useState)(!1),H=W[0],M=W[1],X=(0,i.useState)(""),K=X[0],Y=X[1],ee=null==T?void 0:T.find(function(e){var t;return e.value===(null==n?void 0:null===(t=n.meta)||void 0===t?void 0:t.xeroContactId)}),en=(0,a.Z)((0,r.Z)({},n),{availableCharts:null!==(es=null==n?void 0:null===(ea=n.meta)||void 0===ea?void 0:ea.availableCharts)&&void 0!==es?es:[],xeroContact:ee})||{},et="Assign",er="Assigned To";if(("customer"===G||"admin"===G)&&(en.contactUsernameFirst=null===(ei=null==n?void 0:n.contactUsers[0])||void 0===ei?void 0:null===(el=ei.user)||void 0===el?void 0:el.nameFirst,en.contactUsernameLast=null===(eu=null==n?void 0:n.contactUsers[0])||void 0===eu?void 0:null===(ec=eu.user)||void 0===ec?void 0:ec.nameLast,en.contactUseremail=null===(ed=null==n?void 0:n.contactUsers[0])||void 0===ed?void 0:null===(ep=ed.user)||void 0===ep?void 0:ep.email,en.contactUserphone=null===(em=null==n?void 0:n.contactUsers[0])||void 0===em?void 0:null===(ev=em.user)||void 0===ev?void 0:ev.phone,en.contactUserstatus=null===(ey=null==n?void 0:n.contactUsers[0])||void 0===ey?void 0:null===(eb=ey.user)||void 0===eb?void 0:eb.status,en.contactUseruserId=null===(eh=null==n?void 0:n.contactUsers[0])||void 0===eh?void 0:null===(ex=eh.user)||void 0===ex?void 0:ex.id,et="Manager",er="Account manager"),"admin"===G){var ea,eo,es,ei,el,eu,ec,ed,ep,em,ev,ey,eb,eh,ex,ef,eg,eZ=null==n?void 0:null===(ef=n.meta)||void 0===ef?void 0:ef.timeZone;en.timeZone=eZ||{value:"Europe/London",label:"Europe/London +00:00"},en.modules=[],(null==n?void 0:null===(eg=n.meta)||void 0===eg?void 0:eg.modules)&&Object.keys(n.meta.modules).forEach(function(e){!0===n.meta.modules[e]&&en.modules.push(e)})}var ej=(0,l.cI)({defaultValues:en,resolver:(0,u.S)(F())}),eT=ej.control,eC=ej.errors,eI=ej.setValue,eq=ej.handleSubmit,eS=ej.register,e_=ej.watch,eA=e_("vatId"),e$=(0,U.b)(eA),eR=e_("modules"),eB={control:eT,errors:eC,register:eS};return((0,i.useEffect)(function(){s&&T.length&&eI("xeroContact",null==T?void 0:T.find(function(e){var t;return e.value===(null==n?void 0:null===(t=n.meta)||void 0===t?void 0:t.xeroContactId)}))},[null==n?void 0:null===(eo=n.meta)||void 0===eo?void 0:eo.xeroContactId,s,eI,T]),Q)?(0,o.jsx)(L.Z,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,o.jsx)(k.Z,{})}):(0,o.jsxs)(c.Z,{handleSubmit:eq(N),children:[(0,o.jsxs)($.Z,{open:H,onClose:function(){M(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,o.jsx)(R.Z,{id:"alert-dialog-title",children:"VAT Number"}),(0,o.jsx)(B.Z,{children:(0,o.jsxs)(P.Z,{id:"alert-dialog-description",children:["This supplier does not appear to have a valid VAT number supplied.",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"Please note that no VAT will be charged for this supplier without a valid VAT number."]})}),(0,o.jsxs)(w.Z,{children:[(0,o.jsx)(O.Z,{variant:"contained",onClick:function(){eq(N)(),M(!1)},children:"Confirm"}),(0,o.jsx)(O.Z,{variant:"outlined",onClick:function(){M(!1)},children:"Cancel"})]})]}),(null==n?void 0:n.type)!=="superadmin"&&(0,o.jsx)(d.Z,{open:!0,title:et,children:(0,o.jsx)(p.Z,{children:(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(j.P,(0,a.Z)((0,r.Z)({},eB),{accountId:z.accountId,errors:(0,r.Z)({},eC),label:er,name:"managerSelected",type:"user"}))})})}),(0,o.jsx)(d.Z,{open:!0,title:"Company",children:(0,o.jsxs)(p.Z,{children:[(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"Name",children:(0,o.jsx)(y.Z,(0,a.Z)((0,r.Z)({},eB),{name:"name"}))})}),(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"Website",children:(0,o.jsx)(y.Z,(0,a.Z)((0,r.Z)({},eB),{name:"website"}))})}),(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"Company Number",children:(0,o.jsx)(y.Z,(0,a.Z)((0,r.Z)({},eB),{name:"companyNumber"}))})}),(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"VAT ID",children:(0,o.jsx)(y.Z,(0,a.Z)((0,r.Z)({},eB),{name:"vatId"}))})}),(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"Status",children:(0,o.jsx)(b.Z,(0,a.Z)((0,r.Z)({},eB),{name:"status",options:S.bg}))})})]})}),"admin"===G&&(0,o.jsxs)(d.Z,{open:!0,title:"Admin Settings",children:[(0,o.jsx)(p.Z,{children:(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(v.Z,{label:"Client Type",children:(0,o.jsx)(h.Z,(0,a.Z)((0,r.Z)({options:(0,Z.r)()},eB),{name:"timeZone"}))})})}),V("superadmin")&&(0,o.jsx)(p.Z,{children:(0,o.jsx)(m.Z,{md:12,children:(0,o.jsx)(x.Z,(0,a.Z)((0,r.Z)({},eB),{data:q.o,legend:"Modules",name:"modules"}))})}),V("superadmin")&&eR.includes("dataCharts")&&(0,o.jsx)(L.Z,{sx:{width:"300px"},children:(0,o.jsx)(l.Qr,{name:"availableCharts",control:eT,render:function(e){var n,t=e.value,r=e.onChange;return(0,o.jsx)(f.q,{value:t||[],onChange:function(e,n){return r(n)},multiple:!0,limitTags:1,setSearch:Y,textFieldProps:{color:"secondary",variant:"standard",label:"Select available charts",error:!!eC.availableCharts,helperText:null===(n=eC.availableCharts)||void 0===n?void 0:n.message},options:q.O.filter(function(e){return e.label.toLowerCase().includes(K.toLowerCase())})})}})})]}),"customer"===G&&(0,o.jsx)(d.Z,{open:!0,title:"Customer",children:(0,o.jsx)(p.Z,{children:(0,o.jsx)(m.Z,{md:6,children:(0,o.jsx)(A.l,(0,a.Z)((0,r.Z)({},eB),{label:"Customer Type",name:"clientType",type:"clientType"}))})})}),"supplier"===G&&(0,o.jsx)(d.Z,{open:!0,title:"Supplier",children:(0,o.jsx)(C,(0,r.Z)({},eB))}),s&&(0,o.jsx)(d.Z,{open:!0,title:"Xero User Sync",children:(0,o.jsx)(m.Z,{md:12,children:(0,o.jsx)(v.Z,{label:"Xero Contact",children:J?(0,o.jsx)(O.Z,{variant:"contained",onClick:function(){E()},children:"Connect to Xero to select Contact"}):(0,o.jsx)(h.Z,(0,a.Z)((0,r.Z)({options:T},eB),{name:"xeroContact"}))})})}),(!n||"customer"===G||"admin"===G)&&(0,o.jsxs)(d.Z,{open:!0,title:"Contact User",children:[(0,o.jsx)(I.q,(0,a.Z)((0,r.Z)({},eB),{prefix:"contactUser"})),(0,o.jsx)(y.Z,(0,a.Z)((0,r.Z)({},eB),{defaultValue:"true",name:"contactUser",type:"hidden"}))]}),"supplier"!==G||e$?(0,o.jsx)(g.H,{content:"Submit",type:"submit"}):(0,o.jsx)(g.H,{content:"Submit",handleClick:function(){return M(!0)}})]})};J.propTypes={account:s.object,onSubmit:s.func.isRequired,schema:s.func.isRequired,type:s.string.isRequired,loading:s.bool,xeroContacts:s.array,displaySignin:s.bool,handleXeroAuthorize:s.func}},48580:function(e,n,t){t.d(n,{q:function(){return v}});var r=t(26042),a=t(69396),o=t(99534),s=t(85893),i=t(87918),l=t(98456),u=t(23776),c=t(50135),d=t(67294),p=t(45697),m=t.n(p),v=function(e){var n=e.loading,t=e.setSearch,p=e.textFieldProps,m=(0,o.Z)(e,["loading","setSearch","textFieldProps"]),v=(0,d.useState)(""),y=v[0],b=v[1];return(0,d.useEffect)(function(){var e=setTimeout(function(){t(y)},500);return function(){return clearTimeout(e)}},[y,t]),(0,s.jsx)(u.Z,(0,a.Z)((0,r.Z)({isOptionEqualToValue:function(e,n){return e.value===n.value}},m),{loading:n,onInputChange:function(e,n){b(n)},getOptionLabel:function(e){return e.label},renderTags:function(e,n){return e.map(function(e,t){return(0,s.jsx)(i.Z,(0,r.Z)({size:"small",label:e.label},n({index:t})))})},renderInput:function(e){return(0,s.jsx)(c.Z,(0,a.Z)((0,r.Z)({},e,p),{InputProps:(0,a.Z)((0,r.Z)({},e.InputProps,p.InputProps||{}),{endAdornment:(0,s.jsxs)(s.Fragment,{children:[n?(0,s.jsx)(l.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))};v.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}},v.propTypes={multiple:m().bool,limitTags:m().number,filterSelectedOptions:m().bool,color:m().string,loading:m().bool,value:m().oneOf([m().array,m().object]),onChange:m().func,options:m().arrayOf(m().shape({value:m().any.isRequired,label:m().string.isRequired})).isRequired,onOpen:m().func,setSearch:m().func,textFieldProps:m().shape({label:m().string,variant:m().oneOf(["standard"]),color:m().string,error:m().bool,helperText:m().string})}},25742:function(e,n,t){t.d(n,{H:function(){return u}});var r=t(26042),a=t(85893),o=t(45697),s=t(55377),i=t(16551),l=t(77439),u=function(e){var n=e.children,t=e.content,o=e.context,u=e.data,c=e.disabled,d=e.handleClick,p=e.size,m=e.type;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{size:"sm"}),(0,a.jsxs)(i.Z,{align:"flex-end",children:[n,(0,a.jsx)(l.Z,(0,r.Z)({content:t,context:o,disabled:c,onClick:d,size:p,type:m},u))]})]})};u.propTypes={children:o.node,content:o.string,context:o.string,data:o.object,disabled:o.bool,handleClick:o.func,size:o.string,type:o.string},u.defaultProps={content:"Add",context:"secondary",disabled:!1,size:"sm",type:"button"}},16879:function(e,n,t){t.d(n,{r:function(){return o}});var r=t(22091).ZP.getAllTimezones(),a=Object.keys(r).map(function(e){return r[e]}),o=function(){return a.map(function(e){return{label:"".concat(e.name," ").concat(e.utcOffsetStr),value:e.name}})}},66812:function(e,n,t){t.d(n,{P:function(){return C}});var r=t(47568),a=t(26042),o=t(99534),s=t(7297),i=t(97582),l=t(85893),u=t(67294),c=t(45697),d=t(10367),p=t(66252),m=t(4972),v=t(78289),y=t(52019),b=t(49501),h=t(9270),x=t(62140),f=t(84043),g=t(77439);function Z(){var e=(0,s.Z)(["\n  position: relative;\n  right: 25px;\n  top: 2px;\n"]);return Z=function(){return e},e}var j=function(e,n){var t,r,a,o=!0;return(null===(t=e.errors[e.name])||void 0===t?void 0:t.message)!==(null===(r=n.errors[n.name])||void 0===r?void 0:r.message)&&(o=!1),["accountId","assetCategoryId","entity","entityId","locationId","serviceId","type","value","customerId","customerRole"].forEach(function(t){e[t]!==n[t]&&(o=!1)}),o},T=function(e){var n=e.accountId,t=e.area,r=e.assetCategoryId,a=e.entity,o=e.entityId,s=(e.hasRole,e.id),i=e.locationId,l=e.serviceId,u=e.taxonomyGroupType,c=e.customerId,d=e.customerRole,p=e.type,v=e.userId,y=e.invoiceThreshold,b=e.quoteThreshold,h=p;switch(d&&(h="".concat(p,"_").concat(d)),h){case"address":return{query:m.cz,variables:{entity:a,entityId:o}};case"asset":return{query:m.UH,variables:{categoryId:r,locationId:i}};case"assetBookable":return{query:m.UH,variables:{categoryId:r,locationId:i,bookable:"yes"}};case"assetCategory":return{query:m.nD,variables:{id:s}};case"assetSublocation":return{query:m.UH,variables:{category:"sublocation",adminId:n,locationId:i}};case"compliance":return{query:m.kU,variables:{locationId:i}};case"coverage":return{query:m.j$};case"customer":return{query:m.SW};case"job":return{query:m.Qn,variables:{locationId:i}};case"manager":return{query:m.he,variables:{accountId:n,userId:v}};case"thresholdManagers":return{query:m.Ak,variables:{accountId:n,userId:v,invoiceThreshold:y,quoteThreshold:b}};case"product":return{query:m.UH,variables:{category:"product",locationId:i}};case"property":return{query:m._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:n}}}}};case"property_user":return{query:m._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:n},Account:{type:{_eq:"customer"},Account_Users:{role:{_eq:"user"},userId:{_eq:c}}},User_Account_Locations:{Account_User:{userId:{_eq:c},accountId:{_eq:n}}}}}}};case"sensor":return{query:m.UH,variables:{category:"sensor",locationId:i}};case"service":return{query:m.kx};case"sla":return{query:m.t1,variables:{type:"priority",adminId:n}};case"sublocation":return{query:m.zR,variables:{locationId:i}};case"supplier":var x={type:{_eq:"supplier"}};return t&&(x.PostcodeAreas={PostcodeArea:{area:{_eq:t}},entity:{_eq:"Account"},status:{_eq:"active"}}),l&&(x.ServiceSchedule={status:{_eq:"active"},entity:{_eq:"Supplier"},serviceId:{_eq:l}},t&&(x.ServiceSchedule.PostcodeAreas={PostcodeArea:{area:{_eq:t}}})),{query:m.by,variables:{where:x}};case"user":return{query:m.yR,variables:{accountId:n}};case"usersForBookings":return{query:m.yR,variables:{accountId:v}};case"tenant":return{query:m.RJ};case"taxonomyGroup":return{query:m.Cj,variables:{type:u}};case"expenseCategory":return{query:m.Ve};default:return{query:m.qd}}},C=(0,u.memo)(function(e){var n,t=e.AddForm,s=e.accountId,c=e.area,d=e.assetCategoryId,m=e.control,Z=e.entity,j=e.entityId,C=e.errors,q=e.id,S=e.isClearable,_=e.isDisabled,A=e.label,$=e.locationId,R=e.name,B=e.serviceId,P=e.taxonomyGroupType,w=e.customerId,O=e.customerRole,L=e.type,k=e.userId,U=e.invoiceThreshold,J=e.quoteThreshold,E=(0,o.Z)(e,["AddForm","accountId","area","assetCategoryId","control","entity","entityId","errors","id","isClearable","isDisabled","label","locationId","name","serviceId","taxonomyGroupType","customerId","customerRole","type","userId","invoiceThreshold","quoteThreshold"]),N=(0,p.x)(),F=(0,u.useState)(!1),G=F[0],Q=F[1],D=(0,u.useState)(),V=D[0],z=D[1],W=(0,u.useState)(!1),H=W[0],M=W[1],X=(0,u.useContext)(v.Z),K=(0,u.useContext)(y.Z).hasRole,Y=(0,u.useState)(!1),ee=Y[0],en=Y[1];(0,u.useEffect)(function(){return en(!1),M(!1),function(){}},[s,d,Z,j,$,B,L,w,O,k]);var et=(n=(0,r.Z)(function(){var e,n,t,r,o,l,u;return(0,i.__generator)(this,function(o){switch(o.label){case 0:if(H)return en(!0),[2,null];return Q(!0),n=(e=T({accountId:s,area:c,assetCategoryId:d,entity:Z,entityId:j,hasRole:K,id:q,locationId:$,serviceId:B,taxonomyGroupType:P,customerId:w,customerRole:O,type:L,userId:k,invoiceThreshold:U,quoteThreshold:J})).query,r=void 0===(t=e.variables)?{}:t,[4,N.query({query:n,variables:(0,a.Z)({},r)})];case 1:return z((void 0===(l=o.sent().data)?{items:[]}:l).items),Q(!1),M(!0),en(!0),[2]}})}),function(){return n.apply(this,arguments)}),er=function(){X.show({content:(0,l.jsx)("div",{children:(0,l.jsx)(t,{})}),title:"Add form"})};return(0,l.jsx)(b.Z,{id:R,label:A,children:(0,l.jsxs)(h.Z,{children:[(0,l.jsx)(x.Z,{md:t?11:12,children:(0,l.jsx)(f.Z,(0,a.Z)({autoload:!1,blurInputOnSelect:!0,cacheOptions:!0,control:m,errors:C,isDisabled:_,isClearable:S,isLoading:G,menuIsOpen:ee,options:V,onFocus:et,onBlur:function(){en(!1)},name:R,searchable:!0},E),E.defaultValue)}),t&&(0,l.jsx)(x.Z,{md:1,children:(0,l.jsx)(I,{children:(0,l.jsx)(g.Z,{content:null,startIcon:"plus",size:"sm",onClick:er})})})]})})},j),I=d.ZP.div.withConfig({displayName:"select__ButtonWrapper",componentId:"sc-fdff7245-0"})(Z());C.propTypes={AddForm:c.object,area:c.string,accountId:c.number,assetCategoryId:c.number,control:c.object.isRequired,errors:c.object.isRequired,entity:c.string,entityId:c.number,id:c.number,isClearable:c.bool,label:c.string.isRequired,locationId:c.number,name:c.string.isRequired,serviceId:c.number,taxonomyGroupType:(0,c.oneOf)(["expenseCategory","costCategory","jobTags"]),type:c.string},C.defaultProps={isClearable:!0,label:"Account",name:"account",type:"account"}},42575:function(e,n,t){t.d(n,{Im:function(){return p},RQ:function(){return y},X4:function(){return h},fC:function(){return b},mW:function(){return m},ze:function(){return v}});var r=t(7297),a=t(75063);function o(){var e=(0,r.Z)(['\n  query GetTaxonomys(\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: Taxonomy_order_by!\n    $status: String = "active"\n    $type: String\n    $typeGroup: String\n    $parentId: Int\n    $fetchGroup: Boolean! = true\n    $id: Int\n    $isGroup: Boolean = false\n  ) {\n    taxonomy: Taxonomy(\n      limit: $limit\n      offset: $offset\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: $status }\n        type: { _eq: $type }\n        parentId: { _eq: $parentId }\n        id: { _eq: $id }\n        isGroup: { _eq: $isGroup }\n      }\n      order_by: [$orderBy]\n    ) {\n      options: Taxonomies(\n        where: {\n          type: { _eq: $type }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n\n        childs: Taxonomies(order_by: { id: asc }, where: { status: { _eq: "active" } }) {\n          taxonomyId: id\n          name\n          type\n          meta\n          status\n        }\n      }\n      id\n      name\n      type\n      status\n      parentId\n      createdAt\n      meta\n      parent: Parent {\n        id\n        name\n        type\n      }\n      childs: Taxonomies(order_by: { id: asc }, where: { status: { _eq: "active" } }) {\n        taxonomyId: id\n        name\n        type\n        meta\n        status\n      }\n      jobs: Taxonomy_Entities_aggregate(\n        where: { Taxonomy: { type: { _eq: "jobTags" } }, entity: { _eq: "Job" } }\n      ) {\n        aggregate {\n          count\n        }\n      }\n    }\n    meta: Taxonomy_aggregate(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: $status }\n        type: { _eq: $type }\n        parentId: { _eq: $parentId }\n        id: { _eq: $id }\n        isGroup: { _eq: $isGroup }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n    taxonomyGroup: Taxonomy(where: { isGroup: { _eq: true }, type: { _eq: $typeGroup } })\n      @include(if: $fetchGroup) {\n      value: id\n      text: name\n    }\n  }\n']);return o=function(){return e},e}function s(){var e=(0,r.Z)(["\n  query GetTaxonomy($id: Int!) {\n    taxonomy: Taxonomy_by_pk(id: $id) {\n      id\n      name\n      type\n      status\n      parentId\n      createdAt\n      meta\n    }\n  }\n"]);return s=function(){return e},e}function i(){var e=(0,r.Z)(["\n  mutation AddTaxonomy($objects: [Taxonomy_insert_input!]!) {\n    insert_Taxonomy(objects: $objects) {\n      returning {\n        id\n        type\n      }\n    }\n  }\n"]);return i=function(){return e},e}function l(){var e=(0,r.Z)(["\n  mutation UpdateTaxonomy($id: Int!, $changes: Taxonomy_set_input) {\n    update_Taxonomy_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n      type\n    }\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,r.Z)(["\n  query GeTaxonomyWithEntities($type: String!, $entity: String!, $entityId: Int!) {\n    questions: Taxonomy(where: { type: { _eq: $type } }) {\n      id\n      meta\n      name\n      status\n      taxonomy_entity: Taxonomy_Entities(\n        where: { entityId: { _eq: $entityId }, entity: { _eq: $entity } }\n      ) {\n        comments\n      }\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,r.Z)(["\n  mutation InsertTaxonomyEntity(\n    $entity: String!\n    $entityId: Int!\n    $questions: [Taxonomy_Entity_insert_input!]!\n    $objectStatusLog: [StatusLog_insert_input!]!\n    $hasStatusLog: Boolean!\n  ) {\n    delete_Taxonomy_Entity(where: { entityId: { _eq: $entityId }, entity: { _eq: $entity } }) {\n      returning {\n        id\n      }\n    }\n    insert_Taxonomy_Entity(objects: $questions) {\n      returning {\n        id\n      }\n    }\n\n    insert_StatusLog(objects: $objectStatusLog) @include(if: $hasStatusLog) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function d(){var e=(0,r.Z)(["\n  query GetSlasForTemplate($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    slas: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      id\n      label: name\n      subtype\n      notes\n      onSite\n      onSiteUnit\n      quoteReturned\n      quoteReturnedUnit\n    }\n  }\n"]);return d=function(){return e},e}var p=(0,a.Ps)(o());(0,a.Ps)(s());var m=(0,a.Ps)(i()),v=(0,a.Ps)(l()),y=(0,a.Ps)(u()),b=(0,a.Ps)(c()),h=(0,a.Ps)(d())},32749:function(e,n,t){t.d(n,{l:function(){return v}});var r=t(26042),a=t(69396),o=t(99534),s=t(85893),i=t(67294),l=t(45697),u=t(6388),c=t(42575),d=t(49501),p=t(84043),m=function(e,n){var t,r,a,o=!0;return(null===(t=e.errors[e.name])||void 0===t?void 0:t.message)!==(null===(r=n.errors[n.name])||void 0===r?void 0:r.message)&&(o=!1),["name","type"].forEach(function(t){e[t]!==n[t]&&(o=!1)}),o},v=(0,i.memo)(function(e){var n,t,i,l=e.control,m=e.errors,v=e.label,y=e.name,b=e.register,h=e.type,x=e.filters,f=(0,o.Z)(e,["control","errors","label","name","register","type","filters"]),g=(i=(void 0===(t=(0,u.aM)(c.Im,{variables:(0,a.Z)((0,r.Z)({isGroup:"assetCategory"===h},x),{orderBy:{name:"asc"},type:h})}).data)?{taxonomy:[]}:t).taxonomy,"assetCategory"===h?i.map(function(e){return{label:e.name,options:e.options,childs:e.childs,meta:e.meta}}):i.map(function(e){return{label:e.name,value:e.id,childs:e.childs,meta:e.meta}}));return(0,s.jsx)(d.Z,{id:y,label:v,children:(0,s.jsx)(p.Z,(0,r.Z)((0,a.Z)((0,r.Z)({},{control:l,errors:m,register:b}),{cacheOptions:!0,isClearable:!0,options:g,name:y}),f))})},m);v.propTypes={control:l.object.isRequired,errors:l.object.isRequired,label:l.string.isRequired,filters:l.object,type:(0,l.oneOf)(["assetCategory","expenseCategory","jobTags","costCategory","clientType","tags"])},v.defaultProps={filters:{}}},56361:function(e,n,t){t.d(n,{q:function(){return h}});var r=t(26042),a=t(69396),o=t(29815),s=t(85893),i=t(45697),l=t(9270),u=t(62140),c=t(49501),d=t(55563),p=t(70982),m=t(95103),v=t(21789),y=t(2845),b=t(92148),h=function(e){var n=e.errors,t=e.prefix,i=e.register,h=(0,y.x)().hasRole,x={errors:n,register:i};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(u.Z,{md:6,children:(0,s.jsx)(c.Z,{label:"First name",children:(0,s.jsx)(d.Z,(0,a.Z)((0,r.Z)({},x),{name:"".concat(t,"nameFirst")}))})}),(0,s.jsx)(u.Z,{md:6,children:(0,s.jsx)(c.Z,{label:"Last name",children:(0,s.jsx)(d.Z,(0,a.Z)((0,r.Z)({},x),{name:"".concat(t,"nameLast")}))})}),(0,s.jsx)(u.Z,{md:6,children:(0,s.jsxs)(c.Z,{label:"Email",children:[(0,s.jsx)(d.Z,(0,a.Z)((0,r.Z)({},x),{name:"".concat(t,"email"),type:"email"})),n["".concat(t,"email")]&&"duplicate"===n["".concat(t,"email")].type&&(0,s.jsx)(p.Z,{message:n["".concat(t,"email")].message})]})}),(0,s.jsx)(u.Z,{md:6,children:(0,s.jsx)(c.Z,{label:"Mobile",children:(0,s.jsx)(d.Z,(0,a.Z)((0,r.Z)({},x),{name:"".concat(t,"phone")}))})})]}),h((0,o.Z)(b.td).concat((0,o.Z)(b.Sf),(0,o.Z)(b.n),(0,o.Z)(b.nx)))&&(0,s.jsx)(c.Z,{label:"Status",children:(0,s.jsx)(m.Z,(0,a.Z)((0,r.Z)({},x),{name:"".concat(t,"status"),options:v.bg}))}),(0,s.jsx)(d.Z,(0,a.Z)((0,r.Z)({},x),{name:"".concat(t,"userId"),type:"hidden"}))]})};h.propTypes={errors:i.object.isRequired,prefix:i.string,register:i.func.isRequired},h.defaultProps={prefix:""}},83395:function(e,n,t){t.d(n,{b:function(){return r}});var r=function(e){return String(e).toLowerCase().replace("gb","").length>=9}},8986:function(e,n,t){t.d(n,{O:function(){return a},o:function(){return r}});var r=[{id:"quotes",label:"Quotes",value:"quotes"},{id:"cleverCalendar",label:"Planned Maintenance",value:"cleverCalendar"},{id:"assets",label:"Assets",value:"assets"},{id:"sensors",label:"IoT/Sensors",value:"sensors"},{id:"compliance",label:"Compliance",value:"compliance"},{id:"tasks",label:"Tasks",value:"tasks"},{id:"workflows",label:"Automated Workflows",value:"workflows"},{id:"sageIntegration",label:"Sage Integration",value:"sageIntegration"},{id:"dataReports",label:"Data Reports",value:"dataReports"},{id:"dataCharts",label:"Data Charts",value:"dataCharts"},{id:"nonLoggedUser",label:"Non logged user",value:"nonLoggedUser"}],a=[{value:"AverageDaysOutstandingChart",label:"Average Days Outstanding"},{value:"AverageJobLengthChart",label:"Average Job Length"},{value:"AverageJobRevenueChart",label:"Average Job Revenue"},{value:"SlaBreachCountChart",label:"SLA Breach (Count)"},{value:"SlaBreachPercentageChart",label:"SLA Breach (Percentage)"},{value:"AverageToCloseByHourChart",label:"Average Time To Close Job"},{value:"AvgPriceChart",label:"Average Price"},{value:"AverageProfitChart",label:"Average Profit"},{value:"AverageQuoteValueChart",label:"Average Quote Value"},{value:"AverageTimeToAcceptByMinuteChart",label:"Average Time To Accept Job"},{value:"AverageTimeToAttendanceChart",label:"Average Time To Attendance"},{value:"AverageTimeToSubmitJobReportChart",label:"Average Time To Submit Job Report"},{value:"CountByActiveAccountChart",label:"Count By Active Account"},{value:"CountJobsEngagementRateChart",label:"Count Jobs Engagement Rate"},{value:"CountOpenJobsByDateChart",label:"Count Open Jobs By Date"},{value:"CustomerAndSupplierAmounts",label:"Customer And Supplier Amounts"},{value:"JobsByDayLineChart",label:"Jobs By Day Line"},{value:"JobsByMonth",label:"Jobs By Month"},{value:"JobsFinancialByDayLineChart",label:"Jobs Financial By Day Line"},{value:"NewCustomerAccountsChart",label:"New Customer Accounts"},{value:"NewSupplierAccountsChart",label:"New Supplier Accounts"},{value:"PercentageOfWorkOrdersByServiceLineTable",label:"Percentage Of Work Orders By Service Line "},{value:"QuoteAcceptanceRateChart",label:"Quote Acceptance Rate"},{value:"SpendByCoverageAreaTable",label:"Spend By Coverage Area "},{value:"SpendFromNewCustomerAccountsChart",label:"Spend From New Customer Accounts"},{value:"SumQuoteAccepted",label:"Value of Quotes Accepted "},{value:"SumQuoteSent",label:"Value of quotations sent"},{value:"TopAssetsByNumberOfJobsTable",label:"Top Assets By Number Of Jobs"},{value:"TopAssetsBySpendTable",label:"Top Assets By Spend "},{value:"TopAssetTypesBySpendTable",label:"Top Asset Types By Spend "},{value:"TopCustomersByNumberOfPropertiesTable",label:"Top Customers By Number Of Properties"},{value:"TopCustomersByProfitChart",label:"Top Customers By Profit"},{value:"TopPropertiesBySpendTable",label:"Top Properties By Spend "},{value:"TopSuppliersByNumberOfJobsTable",label:"Top Suppliers By Number Of Jobs"},{value:"TopSuppliersByQuoteReturnTable",label:"Top Suppliers By Quote Return"},{value:"TopSuppliersByTimeToSubmitJobReportTable",label:"Top Suppliers By Time To Submit Job Report"},{value:"TotalJobRevenueChart",label:"Total Job Revenue"},{value:"TotalQuoteInvoiceSent",label:"Total Quote Invoice Sent"},{value:"TotalQuoteSentChart",label:"Number Of Quotes"},{value:"TotalQuoteReportSent",label:"Total Quote Report Sent"},{value:"TotalQuoteSent",label:"Total Quotes Sent"},{value:"WorstCustomersByAgedReceivablesTable",label:"Worst Customers By Aged Receivables"}]},32339:function(e,n,t){t.d(n,{E:function(){return r}});var r=[{text:"Select Type Of Organisation",value:""},{text:"Sole trader",value:"soleTrader"},{text:"Limited company",value:"limitedCompany"},{text:"Partnership",value:"partnership"},{text:"LLP",value:"llp"},{text:"PLC",value:"plc"}]},21789:function(e,n,t){t.d(n,{bg:function(){return r}});var r=[{text:"Status",value:""},{text:"Active",value:"active"},{text:"Inactive",value:"inactive"}]}}]);